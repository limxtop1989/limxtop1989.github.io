{
    "version": "https://jsonfeed.org/version/1",
    "title": "è‹¥æ‰¹è¯„ä¸è‡ªç”±ï¼Œåˆ™èµç¾æ— æ„ä¹‰",
    "subtitle": "æœ‰æ¢¦ä¹¦æ¶",
    "icon": "https://limxtop1989.github.io/limxtop/images/favicon.ico",
    "description": "",
    "home_page_url": "https://limxtop1989.github.io/limxtop",
    "items": [
        {
            "id": "https://limxtop1989.github.io/limxtop/2024/01/01/Privacy-Policy/",
            "url": "https://limxtop1989.github.io/limxtop/2024/01/01/Privacy-Policy/",
            "title": "Privacy Policy",
            "date_published": "2024-01-01T13:55:00.000Z",
            "content_html": "<p>Last updated: January 01, 2024</p>\n<p>Flashcard app request access to the following data and only for the purposes stated in the following list:</p>\n<ul>\n<li>Device internal or external storage</li>\n</ul>\n<p>Required to download and move the dictionary files, which will be accessed by GoldenDict, in Downloads or user-specified folders. No other data is accessed. No content found on the device is ever transmitted over the network.</p>\n<ul>\n<li>User interaction</li>\n</ul>\n<p>Information about how a user interacts with Flashcard app. For example, the action of user clicking download button and the action result, which will be used to analyze whether the app works fine. The information is collected by Google Analysis SDK, which obeys General Data Protection Regulation (GDPR). Please refer to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vYW5hbHl0aWNzL2Fuc3dlci82MDA0MjQ1P2hsPWVuJmFtcDt2aXNpdF9pZD02MzgzOTUyMjUyODkxNTU5MjYtMjgxNTM4MzI0MSZhbXA7cmQ9MSN6aXBweT0lMkNvdXItcHJpdmFjeS1wb2xpY3klMkNkYXRhLWNvbGxlY3RlZC1ieS1nb29nbGUtYW5hbHl0aWNzJTJDZGF0YS1jb250cm9scy1mb3ItcmV0ZW50aW9uLWRlbGV0aW9uLWFuZC1wb3J0YWJpbGl0eQ==\">safeguarding your data</span> for further information.</p>\n<p>We use the data to provide and improve the service. By using the service, You agree to the collection and use of information in accordance with this Privacy Policy.</p>\n<h1 id=\"contact-us\"><a class=\"anchor\" href=\"#contact-us\">#</a> Contact Us</h1>\n<p>If you have any questions about this Privacy Policy, You can contact us:</p>\n<p>By email: <span class=\"exturl\" data-url=\"bWFpbHRvOmxpbXh0b3BAZ21haWwuY29t\">limxtop@gmail.com</span></p>\n",
            "tags": []
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/12/30/new-class/",
            "url": "https://limxtop1989.github.io/limxtop/2023/12/30/new-class/",
            "title": "new class",
            "date_published": "2023-12-30T06:49:54.000Z",
            "content_html": "<pre><code>javac -d bin src/leetcode/limxtop/com/ClassLoadDemo.java\njava -cp bin com/maxim/wordcard/utils/ClassLoadDemo\n\nmiaoxins-mbp-2:java miaoxinli$ tree\n.\nâ”œâ”€â”€ bin\nâ”‚Â Â  â”œâ”€â”€ com\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ maxim\nâ”‚Â Â  â”‚Â Â      â””â”€â”€ wordcard\nâ”‚Â Â  â”‚Â Â          â””â”€â”€ utils\nâ”‚Â Â  â”‚Â Â              â””â”€â”€ ClassLoadDemo.class\nâ”‚Â Â  â””â”€â”€ leetcode\nâ”‚Â Â      â””â”€â”€ limxtop\nâ”‚Â Â          â””â”€â”€ com\nâ”‚Â Â              â”œâ”€â”€ Divide2.class\nâ”‚Â Â              â””â”€â”€ TwoSum.class\nâ””â”€â”€ src\n    â””â”€â”€ leetcode\n        â””â”€â”€ limxtop\n            â””â”€â”€ com\n                â”œâ”€â”€ ClassLoadDemo.java\n                â”œâ”€â”€ Divide2.class\n                â”œâ”€â”€ Divide2.java\n                â”œâ”€â”€ PreOrderTraversal.java\n                â”œâ”€â”€ ThreadOrder.java\n                â”œâ”€â”€ ThredOrder$1.class\n                â”œâ”€â”€ ThredOrder$2.class\n                â”œâ”€â”€ ThredOrder$3.class\n                â”œâ”€â”€ ThredOrder.class\n                â”œâ”€â”€ TwoSum.class\n                â””â”€â”€ TwoSum.java\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/11/11/Google-Play-Store-In-App-Billing/",
            "url": "https://limxtop1989.github.io/limxtop/2023/11/11/Google-Play-Store-In-App-Billing/",
            "title": "Google Play Store In App Billing Issue",
            "date_published": "2023-11-11T12:22:52.000Z",
            "content_html": "<h1 id=\"found-null-or-empty-skudetails\"><a class=\"anchor\" href=\"#found-null-or-empty-skudetails\">#</a> Found null or empty SkuDetails.</h1>\n<blockquote>\n<p>TrivialDrive:BillingDataSource: onSkuDetailsResponse: Found null or empty SkuDetails. Check to see if the SKUs you requested are correctly published in the Google Play Console.</p>\n</blockquote>\n<p>Root cause: Some of following prerequisites are not satisfied.</p>\n<ol>\n<li>Upload the application to Closing Testing, no need to publish at this stage. (Internal Testing may be sufficient, but not verified).</li>\n<li>Create SKUs, note that the ID should match the ID of the application request.</li>\n<li>Add the tester's mailbox, which is the Google account login to the device to test the app SKU.</li>\n<li>Switch License Respond to LICENSED (Path: play console homepage -&gt; Setup -&gt; License testing).</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>The Application ID for uploading Closing Testing needs to be the same as the Application ID for local debugging.</li>\n<li>Copy the link in the &quot;Testers&quot; tab, send it to testers to invite them join the test.</li>\n</ul>\n<h1 id=\"3-billing-unavailable\"><a class=\"anchor\" href=\"#3-billing-unavailable\">#</a> 3 Billing Unavailable</h1>\n<blockquote>\n<p>TrivialDrive:BillingDataSource: onSkuDetailsResponse: 3 Billing Unavailable</p>\n</blockquote>\n<p>Your &quot;Premium&quot; tab should show empty rather the paid applications list in your play store if you encounter this issue.<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/11/11/22c2efeaf37dabf6.jpeg\" style=\"zoom:25%;\" /><br />\nRoot cause: The current Play Store account of the test device does not support the Billing feature, for example, my reason is that the account is registered as China region.<br />\nSolution: Change it to US, and the address can use a US physical address, or fill in a random one.</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdXBwb3J0Lmdvb2dsZS5jb20vZ29vZ2xlcGxheS9hbnN3ZXIvNzQzMTY3NT9zamlkPTExMjAxNjA2MjQwMDQ4OTIwNTAwLUVV\">Change your Google Play country</span></p>\n<p><img data-src=\"https://storage.googleapis.com/support-kms-prod/nZJ8elMyFeFOLGEpXwigaB6zmHvq46xYOfd1\" alt=\"\" /></p>\n<ol>\n<li>On your Android device, open the Google Play Store app Google Play.</li>\n<li>At the top right, tap the profile icon.</li>\n<li>Tap Settings and then General and then Account and device preferences and then Country and profiles.</li>\n<li>Tap the country where you want to add an account.</li>\n<li>Follow the on-screen instructions to add a payment method for that country.<br />\nTips: Your profile can take up to 48 hours to update.</li>\n</ol>\n<h1 id=\"other-checkpoints-and-actions-to-try\"><a class=\"anchor\" href=\"#other-checkpoints-and-actions-to-try\">#</a> Other checkpoints and actions to try</h1>\n<ol>\n<li>Enable VPN and use American server.</li>\n<li>Register the test account in the settings and play store, remove other accounts.</li>\n<li>Clear the storage of &quot;Google Play services&quot; and &quot;Google Play Store&quot;.</li>\n</ol>\n",
            "tags": [
                "Essay",
                "Google Play Store, In App Billing, Found null or empty SkuDetails. Check to see if the SKUs you requested are correctly published in the Google Play Console, onSkuDetailsResponse 3 Billing Unavailable"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/11/08/how-to-learn-English/",
            "url": "https://limxtop1989.github.io/limxtop/2023/11/08/how-to-learn-English/",
            "title": "How to Learn English",
            "date_published": "2023-11-08T10:31:39.000Z",
            "content_html": "<h1 id=\"fundamentals-of-learning-english\"><a class=\"anchor\" href=\"#fundamentals-of-learning-english\">#</a> Fundamentals of Learning English</h1>\n<p>Mastering the English language involves adopting two fundamental approaches that work synergistically to enhance language proficiency.</p>\n<ol>\n<li>\n<p>Utilize an English-English Dictionary: Opt for an electronic English dictionary for convenience. When encountering an unfamiliar word, refer to this resource to access a plethora of explanations, contextual usage, and numerous examples. This tool provides comprehensive insights, facilitating a more profound understanding of the word.</p>\n</li>\n<li>\n<p>Consistent Practice in English: Immerse yourself in English consistently across all language domainsâ€”reading, writing, listening, speaking, and even thinking. Regular practice is paramount for language acquisition and retention.</p>\n</li>\n</ol>\n<h1 id=\"learning-english-through-translation-a-detrimental-approach\"><a class=\"anchor\" href=\"#learning-english-through-translation-a-detrimental-approach\">#</a> Learning English through Translation: A Detrimental Approach</h1>\n<p>Learning English by rote memorization of word translations is strongly discouraged. This method lacks the depth needed for a nuanced understanding of how words function within the context of communication. Language is an intricate network of interconnected words likewise a neural network forming meaningful phrases and sentences. To truly grasp English, one must learn how to seamlessly combine words to express ideas spontaneously. It is impractical to think and translate sentences directly from one's native language, such as Chinese, as the languages do not align perfectly word-for-word.</p>\n<h1 id=\"challenges-faced-by-adults-in-english-learning\"><a class=\"anchor\" href=\"#challenges-faced-by-adults-in-english-learning\">#</a> Challenges Faced by Adults in English Learning</h1>\n<p>While consistent practice is integral to language mastery, reading English articles, listening to English audios, writing essays in English, and engaging in English conversations are challenging for non-native adults. The struggle lies in the tendency to think and organize thoughts in one's native language rather than English. This challenge persists due to the lack of an English-speaking environment and the comfort of expressing oneself effortlessly in the native language. The difficulty arises when searching for the right English words, phrases, or sentences to articulate ideas, leading to frustration and a reluctance to think in English. However, effective language practice involves thinking in English and subsequently expressing thoughts through writing or speaking, demanding a concerted effort to bridge the gap between native and acquired language proficiency.</p>\n<h1 id=\"overcoming-challenges\"><a class=\"anchor\" href=\"#overcoming-challenges\">#</a> Overcoming Challenges</h1>\n<p>Don't be frustrated; there are two steps to overcome these challenges.</p>\n<ul>\n<li>\n<p>Practice Reading and Listening: Immerse yourself in English during your daily life, reading and listening as much as possible. This input-oriented approach feeds the language into your brain and can be done independently.</p>\n</li>\n<li>\n<p>Practice Writing and Speaking: These output-oriented activities follow training and are more challenging as they require you to think and combine words effectively. Start writing in English and engage in conversations once you've reached a new level during step 1.</p>\n</li>\n</ul>\n<h1 id=\"how-to-memorize-words-effectively\"><a class=\"anchor\" href=\"#how-to-memorize-words-effectively\">#</a> How to Memorize Words Effectively</h1>\n<p>To enhance your vocabulary retention, engage in repetition as a memorization technique and deepen your understanding by consulting English-English dictionaries, such as GoldenDict. Gradually reduce the frequency of review as your familiarity with the words increases.</p>\n<p>Additionally, I have developed an Android application called <span class=\"exturl\" data-url=\"aHR0cHM6Ly9iZXdhdGVycy5tZS9saW14dG9wLzIwMjMvMDUvMDcvd29yZC1jYXJkLXVzZXItbWFudWFsLw==\">&quot;Word Card&quot;</span> specifically designed to assist in memorizing English words. This app is scheduled for publication on the Play Store.</p>\n<h1 id=\"how-to-install-goldendict\"><a class=\"anchor\" href=\"#how-to-install-goldendict\">#</a> How to Install GoldenDict</h1>\n<p>Download GoldenDict software and the English relevant dictionaries from here:<br />\nlink: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMW9WNkF4UlVsWDFjN21wRTM1MmJ0OHc=\">https://pan.baidu.com/s/1oV6AxRUlX1c7mpE352bt8w</span> code: uxtw</p>\n<h2 id=\"windows-mac\"><a class=\"anchor\" href=\"#windows-mac\">#</a> Windows &amp; Mac</h2>\n<ol>\n<li>Download and install goldenDict for you computer system.</li>\n</ol>\n<ul>\n<li>Macï¼š GoldenDict-1.5.0-RC2-209-gfe9312e(Qt_563)</li>\n<li>Windowsï¼š GoldenDict-1.0.1-Portable</li>\n</ul>\n<ol start=\"2\">\n<li>Download the dictionary files and unzip them.</li>\n</ol>\n<ul>\n<li>En-En-Longman_Pronunciation3.zip</li>\n<li>En-En_OALD8.zip</li>\n<li>En-En_Merriam_Webster11</li>\n<li>En-zh_CN_OALD4</li>\n<li>En-En_Longman_DOCE5</li>\n</ul>\n<ol start=\"3\">\n<li>After the GoldenDict and the dictionaries have been prepared, go to settings of the dictionaries in GoldenDict as follows. (The path at Mac is: Edit -&gt; Dictionaries. I am not sure what it is at Window system, you should can find it by yourself). Add all unzip directories by clicking &quot;Add&quot; button and rescan them to create indexes.<br />\n<img data-src=\"https://s3.bmp.ovh/imgs/2021/08/305a1480dcfc9dbd.png\" alt=\"Add dictionaries to GoldenDict\" /><br />\nThere is a exception of the example sentences are hidden at Mac system as bellow.<br />\n<img data-src=\"https://s3.bmp.ovh/imgs/2021/08/bad36e68350614d4.png\" alt=\"\" /><br />\nTo resolve this problem, go to Preference and check &quot;Expand optional parts&quot; option in &quot;Advanced&quot; tab.<br />\n<img data-src=\"https://s3.bmp.ovh/imgs/2021/08/f3565b6d9c3abefc.png\" alt=\"\" /></li>\n</ol>\n<h2 id=\"android\"><a class=\"anchor\" href=\"#android\">#</a> Android</h2>\n",
            "tags": [
                "Essay",
                "How to Learn English, How to Learn a Foreign language, Golden Dict, English"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/09/15/generic-type/",
            "url": "https://limxtop1989.github.io/limxtop/2023/09/15/generic-type/",
            "title": "ä¸€æ–‡è¯»æ‡‚JavaèŒƒå‹",
            "date_published": "2023-09-15T13:00:07.000Z",
            "content_html": "<h1 id=\"terms\"><a class=\"anchor\" href=\"#terms\">#</a> Terms</h1>\n<table>\n<thead>\n<tr>\n<th>Term</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Parameterized type</td>\n<td>List&lt;String&gt;</td>\n</tr>\n<tr>\n<td>Actual type parameter</td>\n<td>String</td>\n</tr>\n<tr>\n<td>Generic type</td>\n<td>List&lt;E&gt;</td>\n</tr>\n<tr>\n<td>Formal type parameter</td>\n<td>E</td>\n</tr>\n<tr>\n<td>Unbonded wildcard type</td>\n<td>List&lt;?&gt;</td>\n</tr>\n<tr>\n<td>Raw type</td>\n<td>List</td>\n</tr>\n<tr>\n<td>Bounded type parameter</td>\n<td>&lt;E extends Number&gt;</td>\n</tr>\n<tr>\n<td>Recursive type bond</td>\n<td>&lt;T extends Comparable&lt;T&gt;&gt;</td>\n</tr>\n<tr>\n<td>Bounded widcard type</td>\n<td>List&lt;? extends Numbers&gt;</td>\n</tr>\n<tr>\n<td>Generic method</td>\n<td>static &lt;E&gt; List&lt;E&gt; asList(E[] a)</td>\n</tr>\n<tr>\n<td>Type token</td>\n<td>String.class</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"èŒƒå‹å®šä¹‰\"><a class=\"anchor\" href=\"#èŒƒå‹å®šä¹‰\">#</a> èŒƒå‹å®šä¹‰</h1>\n<p>ä¸€ä¸ªç±»æˆ–è€…æ¥å£ï¼Œå®ƒçš„å£°æ˜é‡Œï¼Œæœ‰ type parameter (T)ï¼Œå®ƒå°±æ˜¯èŒƒå‹ç±»æˆ–è€…æ¥å£ã€‚</p>\n<p>å‡è®¾æˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªå®¹å™¨ç±»ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„å®åŠ›ï¼Œæˆ‘ä»¬å…ˆçœ‹<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL2phdmEvZ2VuZXJpY3MvdHlwZXMuaHRtbA==\">éèŒƒå‹</span>çš„å®ç°ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Box</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>object <span class=\"token operator\">=</span> object<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> object<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">Box</span> i <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        i<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1. run time error.</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™ç§å®ç°æœ‰ä¸ªç¼ºé™·ï¼Œç¼–è¯‘æ—¶æ— æ³•éªŒè¯ Box å­˜æ”¾çš„å®ä¾‹ç±»å‹ï¼Œç¼–è¯‘æ­£å¸¸é€šè¿‡ï¼Œä½†åœ¨è¿è¡Œæ—¶ï¼Œä¸€éƒ¨åˆ†ä»£ç ä½¿ç”¨ Box å­˜æ”¾ Stringï¼Œ ç†æ‰€å½“ç„¶åœ°æœŸæœ›ï¼Œå–å‡ºæ¥çš„ä¹Ÿæ˜¯ Stringï¼Œä½†å¦‚æœæœ‰äººæ„å¤–åœ°ï¼Œåœ¨å…¶ä»–ä»£ç ä½ç½®ï¼Œæ”¾è¿›ä¸€ä¸ª Integerï¼Œä»£ç æ³¨é‡Š 1 å¤„ï¼Œä¾¿å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Generic version of the Box class.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * @param &lt;T> the type of the value being boxed</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// T stands for \"Type\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>t <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> t<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> i <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1. generic type invocation.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        i<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2. compile error.</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3. run time error.</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>èŒƒå‹ä¼˜ç‚¹ï¼šæ”¹é€ æˆèŒƒå‹ç±»åï¼Œç”±äºæˆ‘ä»¬å®šä¹‰ Box åªèƒ½æ”¾ String ç±»å‹ï¼Œæ³¨é‡Š 2 å¤„ç¼–è¯‘ä¸é€šè¿‡ã€‚é”™è¯¯çš„ä»£ç ï¼Œåœ¨ç¼–è¯‘æ—¶è¢«æ£€æµ‹å‡ºæ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ã€‚å†è€…ï¼Œè¿è¡Œæ—¶çš„é”™è¯¯ï¼Œå¹¶éå®¹æ˜“æ‰¾åˆ°æ ¹æºï¼Œå¯¼è‡´é”™è¯¯çš„ä½ç½®å¯èƒ½ç¦»å‘ç”Ÿé”™è¯¯çš„ä½ç½®å¾ˆè¿œã€‚</p>\n<h2 id=\"èŒƒå‹ç±»è°ƒç”¨-generic-type-invocation\"><a class=\"anchor\" href=\"#èŒƒå‹ç±»è°ƒç”¨-generic-type-invocation\">#</a> èŒƒå‹ç±»è°ƒç”¨ <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL2phdmEvZ2VuZXJpY3MvdHlwZXMuaHRtbA==\">generic type invocation</span></h2>\n<p>To reference the generic Box class from within your code, you must perform a generic type invocation, which replaces T with some concrete value, such as Integer:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> integerBox<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>You can think of a generic type invocation as being similar to an ordinary method invocation, but instead of passing an argument to a method, you are passing a type argument â€” Integer in this case â€” to the Box class itself.</p>\n<h2 id=\"èŒƒå‹æ–¹æ³•\"><a class=\"anchor\" href=\"#èŒƒå‹æ–¹æ³•\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm9yYWNsZS5jb20vamF2YXNlL3R1dG9yaWFsL2phdmEvZ2VuZXJpY3MvbWV0aG9kcy5odG1s\">èŒƒå‹æ–¹æ³•</span></h2>\n<p>Generic methods are methods that introduce their own type parameters. This is similar to declaring a generic type, but the type parameter's scope is limited to the method where it is declared.</p>\n<p>The syntax for a generic method includes a list of type parameters, inside angle brackets, which appears before the method's return type. (public static <strong>&lt;K, V&gt;</strong> boolean compare)</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Util</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> p1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> p2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> p1<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">.</span><span class=\"token function\">getKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>               p1<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>p2<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The complete syntax for invoking this method would be (Util. <strong>&lt;Integer, String&gt;</strong> compare(p1, p2)ğŸ˜‰:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> p1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> p2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Pair</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"pear\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">boolean</span> same <span class=\"token operator\">=</span> <span class=\"token class-name\">Util</span><span class=\"token punctuation\">.</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h1 id=\"èŒƒå‹ä¸æ•°ç»„\"><a class=\"anchor\" href=\"#èŒƒå‹ä¸æ•°ç»„\">#</a> èŒƒå‹ä¸æ•°ç»„</h1>\n<h2 id=\"èŒƒå‹å’Œæ•°ç»„æœ‰é‡è¦çš„ä¸åŒ\"><a class=\"anchor\" href=\"#èŒƒå‹å’Œæ•°ç»„æœ‰é‡è¦çš„ä¸åŒ\">#</a> èŒƒå‹å’Œæ•°ç»„æœ‰é‡è¦çš„ä¸åŒ</h2>\n<ol>\n<li>æ•°ç»„æ˜¯åå˜ï¼Œå³å¦‚æœ Sub æ˜¯ Super çš„å­ç±»ï¼Œé‚£ä¹ˆ Sub [] æ˜¯ Super [] çš„å­ç±»ã€‚ç›¸åï¼ŒèŒƒå‹ä¸æ˜¯åå˜çš„ï¼Œå¯¹äºä»»æ„ä¸¤ä¸ªä¸åŒçš„ç±» Type1 &amp; Type2ï¼Œ List<Type1> æ—¢ä¸æ˜¯ List<Type2> çš„å­ç±»ï¼Œä¹Ÿä¸æ˜¯å®ƒçš„è¶…ç±»ã€‚ åå˜å¸¦æ¥ç¼ºé™·ï¼š</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Fails at runtime!</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> objectArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>objectArray<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"I don't fit in\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Throws ArrayStoreException</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// Won't compile!</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> ol <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Incompatible types.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ol<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I don't fit in\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>æ•°ç»„æ˜¯ reifiedï¼Œ æ„å‘³ç€æ•°ç»„åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“å’Œå¼ºåˆ¶çº¦æŸå®ƒçš„å…ƒç´ ç±»å‹ï¼Œä½†èŒƒå‹ï¼Œä¸ä¹‹ç›¸åï¼Œæ˜¯é€šè¿‡èŒƒå‹æ“¦é™¤å®ç°ï¼Œæ„å‘³ç€å®ƒåœ¨ç¼–è¯‘æ—¶å¼ºåˆ¶ç±»å‹çº¦æŸï¼Œåœ¨è¿è¡Œæ—¶ä¸¢å¼ƒï¼ˆæ“¦é™¤ï¼‰èŒƒå‹ä¿¡æ¯ã€‚</li>\n</ol>\n<h2 id=\"èŒƒå‹æ•°ç»„\"><a class=\"anchor\" href=\"#èŒƒå‹æ•°ç»„\">#</a> èŒƒå‹æ•°ç»„</h2>\n<p>ç”±äºä»¥ä¸Šçš„åŒºåˆ«ï¼Œåˆ›å»ºèŒƒå‹æ•°ç»„æ˜¯éæ³•çš„ã€‚ new List<E>(), new List<String>[], new E [], åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚</p>\n<blockquote>\n<p>It is illegal to create an array of a generic type, a parameterized type, or a type parameter. <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></p>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Why generic array creation is illegal - won't compile!</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> stringLists <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// 1. å‡è®¾ Line1 æˆ‘ä»¬å¯ä»¥åˆ›å»ºèŒƒå‹æ•°ç»„</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> intList <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 2.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> objects <span class=\"token operator\">=</span> stringLists<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// 3. åˆæ³•ï¼Œæ•°ç»„æ˜¯åå˜çš„</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>objects<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> intList<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 4. åˆæ³•ï¼Œè¿è¡Œæ—¶èŒƒå‹å·²ç»è¢«æ“¦é™¤ï¼ŒList&lt;Integer> æˆä¸º Listï¼ŒList&lt;String>[] æˆä¸º List []ï¼Œæ²¡æœ‰ ArrayStoreException</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">String</span> s <span class=\"token operator\">=</span> stringLists<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//  5. ClassCastException at runtime.</span></pre></td></tr></table></figure><h2 id=\"liste-ä¼˜äº-e\"><a class=\"anchor\" href=\"#liste-ä¼˜äº-e\">#</a> List<E> ä¼˜äº E []</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">E</span> <span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> f<span class=\"token punctuation\">,</span> <span class=\"token class-name\">E</span> initVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// compiler can't check the safety of the cast at runtime because it doesn't know what E is at runtime.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">E</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> snapshot <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">)</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">E</span> result <span class=\"token operator\">=</span> intVal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e <span class=\"token operator\">:</span> snapShot<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        result <span class=\"token operator\">=</span> <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">E</span> <span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> f<span class=\"token punctuation\">,</span> <span class=\"token class-name\">E</span> initVal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> snapshot<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        snapshot <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">E</span> result <span class=\"token operator\">=</span> intVal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e <span class=\"token operator\">:</span> snapShot<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        result <span class=\"token operator\">=</span> <span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"èŒƒå‹æ“¦é™¤-type-erasure\"><a class=\"anchor\" href=\"#èŒƒå‹æ“¦é™¤-type-erasure\">#</a> èŒƒå‹æ“¦é™¤ Type Erasure</h2>\n<p>Generics were introduced to the Java language to provide tighter type checks at compile time and to support generic programming. To implement generics, the Java compiler applies type erasure to:</p>\n<ol>\n<li>Replace all type parameters in generic types with their bounds or Object if the type parameters are unbounded. The produced bytecode, therefore, contains only ordinary classes, interfaces, and methods.</li>\n<li>Insert type casts if necessary to preserve type safety.</li>\n<li>Generate bridge methods to preserve polymorphism in extended generic types.<br />\nType erasure ensures that no new classes are created for parameterized types; consequently, generics incur no runtime overhead.</li>\n</ol>\n<h3 id=\"erasure-of-generic-types\"><a class=\"anchor\" href=\"#erasure-of-generic-types\">#</a> Erasure of Generic Types</h3>\n<p>During the type erasure process, the Java compiler erases all type parameters and replaces each with its first bound if the type parameter is bounded, or Object if the type parameter is unbounded.</p>\n<p>Consider the following generic class that represents a node in a singly linked list:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Because the type parameter T is unbounded, the Java compiler replaces it with Object:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Node</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span> next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>In the following example, the generic Node class uses a bounded type parameter:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The Java compiler replaces the bounded type parameter T with the first bound class, Comparable:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Comparable</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Node</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Comparable</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span> next<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Comparable</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"extends-generic-type\"><a class=\"anchor\" href=\"#extends-generic-type\">#</a> Extends generic type</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzcxMTcyNzYvaG93LXRvLWV4cGxhaW4tdGhlLXR5cGUtb2YtcmV0dXJuLXZhbHVlLWFuZC1wYXJhbWV0ZXItZGVmaW5pdGlvbi1hdC1zdWItY2xhc3MtaW4=\">override &amp; generic</span></p>\n<h3 id=\"effects-of-type-erasure-and-bridge-methods\"><a class=\"anchor\" href=\"#effects-of-type-erasure-and-bridge-methods\">#</a> Effects of Type Erasure and Bridge Methods</h3>\n<p>Sometimes type erasure causes a situation that you may not have anticipated. The following example shows how this can occur. The following example shows how a compiler sometimes creates a synthetic method, which is called a bridge method, as part of the type erasure process.</p>\n<p>Given the following two classes:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Node.setData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyNode</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyNode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyNode.setData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Consider the following code:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">MyNode</span> mn <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Node</span> n <span class=\"token operator\">=</span> mn<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// A raw type - compiler throws an unchecked warning</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>n<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Causes a ClassCastException to be thrown.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">Integer</span> x <span class=\"token operator\">=</span> mn<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>After type erasure, this code becomes:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">MyNode</span> mn <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Node</span> n <span class=\"token operator\">=</span> mn<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// A raw type - compiler throws an unchecked warning</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                        <span class=\"token comment\">// Note: This statement could instead be the following:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                        <span class=\"token comment\">//     Node n = (Node)mn;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                        <span class=\"token comment\">// However, the compiler doesn't generate a cast because</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                        <span class=\"token comment\">// it isn't required.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>n<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Causes a ClassCastException to be thrown.</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token class-name\">Integer</span> x <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span>mn<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>The next section explains why a ClassCastException is thrown at the n.setData(&quot;Hello&quot;); statement.</p>\n<p>Bridge Methods<br />\nWhen compiling a class or interface that extends a parameterized class or implements a parameterized interface, the compiler may need to create a synthetic method, which is called a bridge method, as part of the type erasure process. You normally don't need to worry about bridge methods, but you might be puzzled if one appears in a stack trace.</p>\n<p>After type erasure, the Node and MyNode classes become:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Node.setData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyNode</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Node</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyNode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyNode.setData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>After type erasure, the method signatures do not match; the Node.setData(T) method becomes Node.setData(Object). As a result, the MyNode.setData(Integer) method does not override the Node.setData(Object) method.</p>\n<p>To solve this problem and preserve the polymorphism of generic types after type erasure, the Java compiler generates a bridge method to ensure that subtyping works as expected.</p>\n<p>For the MyNode class, the compiler generates the following bridge method for setData:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyNode</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Node</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// Bridge method generated by the compiler</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">//</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyNode.setData\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The bridge method MyNode.setData(object) delegates to the original MyNode.setData(Integer) method. As a result, the n.setData(&quot;Hello&quot;); statement calls the method MyNode.setData(Object), and a ClassCastException is thrown because &quot;Hello&quot; can't be cast to Integer.</p>\n<h1 id=\"bounded-type-parameters\"><a class=\"anchor\" href=\"#bounded-type-parameters\">#</a> Bounded Type Parameters</h1>\n<p>There may be times when you want to restrict the types that can be used as type arguments in a parameterized type. For example, a method that operates on numbers might only want to accept instances of Number or its subclasses. This is what <strong>bounded</strong> type parameters are for.</p>\n<p>To declare a bounded type parameter, list the type parameter's name, followed by the extends keyword, followed by its upper bound, which in this example is Number. Note that, in this context, extends is used in a general sense to mean either &quot;extends&quot; (as in classes) or &quot;implements&quot; (as in interfaces).</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> t<span class=\"token punctuation\">;</span>          </pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> t<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>t <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">return</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">U</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">void</span> <span class=\"token function\">inspect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">U</span> u<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"T: \"</span> <span class=\"token operator\">+</span> t<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"U: \"</span> <span class=\"token operator\">+</span> u<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> integerBox <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        integerBox<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        integerBox<span class=\"token punctuation\">.</span><span class=\"token function\">inspect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"some text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error: this is still String!</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>By modifying our generic method to include this bounded type parameter, compilation will now fail, since our invocation of inspect still includes a String:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Box</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">21</span><span class=\"token operator\">:</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">U</span><span class=\"token punctuation\">></span></span><span class=\"token function\">inspect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">U</span><span class=\"token punctuation\">)</span> in <span class=\"token class-name\">Box</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>Integer</span><span class=\"token punctuation\">></span></span> cannot</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  be applied <span class=\"token keyword\">to</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>String</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                        integerBox<span class=\"token punctuation\">.</span><span class=\"token function\">inspect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"10\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                                  <span class=\"token operator\">^</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">1</span> error</pre></td></tr></table></figure><p>In addition to limiting the types you can use to instantiate a generic type, <strong>bounded type parameters allow you to invoke methods defined in the bounds</strong> :</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">int</span> <span class=\"token function\">countGreaterThan</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> anArray<span class=\"token punctuation\">,</span> <span class=\"token class-name\">T</span> elem<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> e <span class=\"token operator\">:</span> anArray<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span>elem<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token operator\">++</span>count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The countGreaterThan method invokes the compareTo method defined in the Comparable class through e.</p>\n<h1 id=\"bounded-wildcards\"><a class=\"anchor\" href=\"#bounded-wildcards\">#</a> Bounded wildcards</h1>\n<p>ç”±äº parameterized types ä¸æ”¯æŒ åå˜ (invariant), å°±æ˜¯è¯´ï¼Œå¯¹äºä»»æ„ä¸¤ä¸ªä¸åŒçš„ç±» Type1 &amp; Type2ï¼Œ List<Type1> æ—¢ä¸æ˜¯ List<Type2> çš„å­ç±»ï¼Œä¹Ÿä¸æ˜¯å®ƒçš„è¶…ç±»ã€‚  List<String> ä¸æ˜¯ List<Object> çš„å­ç±»ï¼Œåˆçœ‹èµ·æ¥æœ‰ç‚¹åç›´è§‰ï¼Œä½†å®ƒç¡®å®æœ‰æ„ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ä»»æ„ object åˆ° List<Object>ï¼Œ ä½†æˆ‘ä»¬åªèƒ½æ”¾ string åˆ° List<String>. ä½†è¿™æ ·éåå˜çš„ç±»å‹æ²¡æœ‰ä¼¸ç¼©æ€§ (flexibility)ã€‚ å¦‚ä¸‹å±•å¼€è§£é‡Šï¼š</p>\n<h2 id=\"upper-bounded-wildcards\"><a class=\"anchor\" href=\"#upper-bounded-wildcards\">#</a> Upper Bounded Wildcards</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Stack</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Stack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">E</span> <span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å‡è®¾æˆ‘ä»¬è¦å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒè¾“å…¥ä¸€ä¸ªå¯è¿­ä»£åºåˆ—ï¼Œç„¶å push ä»–ä»¬åˆ°è¿™ä¸ª Stackï¼Œ ä»¥ä¸‹ç¬¬ä¸€æ¬¡å°è¯•çš„ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// pushAll method without wildcard type -- works but is deficient!</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pushAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Iterable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> src<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e <span class=\"token operator\">:</span> src<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">push</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è¿™ä»£ç èƒ½å·¥ä½œï¼Œä½†å¹¶ä¸èƒ½æ»¡æ„ã€‚å¦‚æœ src çš„å…ƒç´ ç±»å‹å’Œ Stack çš„å®Œå…¨åŒ¹é…ï¼Œå®ƒè¿è¡Œæ²¡é—®é¢˜ã€‚ä½†å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Stack<Number> ï¼Œ ç„¶åè°ƒç”¨ push (intVal), intVal æ˜¯ä¸€ä¸ª Integer ç±»å‹ã€‚è¿™å®Œå…¨æ²¡é—®é¢˜ï¼Œå› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼Œå› æ­¤ï¼Œé€»è¾‘ä¸Šï¼Œä»¥ä¸‹ä»£ç ä¹Ÿåº”è¯¥æ²¡é—®é¢˜ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Stack</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span> numberStack <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stack</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Iterable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> integers <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>numberStack<span class=\"token punctuation\">.</span><span class=\"token function\">pushAll</span><span class=\"token punctuation\">(</span>integers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä½†å®é™…ä¸Šï¼Œå®ƒç¼–è¯‘æ—¶æŠ¥é”™ï¼Œå› ä¸º Iterable<Integer> å¹¶é Iterable<Number> çš„å­ç±»ï¼Œintergers ä¸èƒ½ä¼ å‚ç»™ srcã€‚å¹¸å¥½ï¼ŒJava æä¾› æœ‰è¾¹ç•Œé€šé…ç¬¦ç±»å‹ (bounded wildcard type) æ¥è§£å†³è¿™ä¸ªåœºæ™¯ã€‚ pushAll <strong>çš„å…¥å‚ç±»å‹ä¸åº”è¯¥æ˜¯ &quot;Iterable of E&quot;, ç”± Iterable<E>è¡¨ç¤ºï¼Œè€Œåº”è¯¥æ˜¯ &quot;Iterable of some subtype of E&quot;ï¼Œç”± Iterable&lt;? extends E&gt;</strong> è¡¨ç¤ºã€‚å¦‚ä¸‹æ”¹å†™ Stack pushAll æ–¹æ³•å£°æ˜åï¼Œä¸Šæ–¹çš„å®¢æˆ·ç«¯ä»£ç å°±å¯ä»¥ç¼–è¯‘é€šè¿‡äº†ï¼Œå› ä¸º Iterable<Integer> æ˜¯ Iterable&lt;? extends Number&gt; çš„å­ç±»</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Wildcard type for marameter that serves as an E producer</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pushAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Iterable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> src<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e<span class=\"token operator\">:</span> src<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token function\">push</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"lower-bounded-wildcards\"><a class=\"anchor\" href=\"#lower-bounded-wildcards\">#</a> Lower Bounded Wildcards</h2>\n<p>å‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦å®ç°ä¸€ä¸ª popAll çš„æ–¹æ³•ï¼Œå’Œ pushAll é…å¥—ï¼Œè¿™ä¸ªæ–¹æ³• pop stack é‡Œé¢çš„å…ƒç´ ï¼Œå¹¶é€ä¸€åŠ åˆ°ç»™å®šé›†åˆå‚æ•°ï¼Œçœ‹ä¸‹ç¬¬ä¸€æ¬¡å°è¯•çš„ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// popAll method without wildcard type - deficient</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">popAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> dst<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        dst<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Stack<Number> å’Œä¸€ä¸ª Object ç±»å‹çš„å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬ pop ä¸€ä¸ªå…ƒç´ å¹¶æŠŠå®ƒå­˜æ”¾åœ¨è¯¥å˜é‡ï¼Œè¿™å®Œå…¨æ²¡é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¦‚ä¸‹ä»£ç ä¹Ÿåº”è¯¥æ²¡é—®é¢˜çš„ï¼Œå¯¹ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Stack</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span> numberStack <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stack</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Number</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> objects <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>numberStack<span class=\"token punctuation\">.</span><span class=\"token function\">popAll</span><span class=\"token punctuation\">(</span>objects<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>ä½†å¾ˆé—æ†¾ï¼Œè¿™ä¸ªä»£ç ç¼–è¯‘ä¸é€šè¿‡ï¼Œå› ä¸º Collection<Object> ä¸æ˜¯ Collection<Number> çš„å­ç±»ã€‚ ä¸‹è¾¹ç•Œé€šé…ç¬¦ç±»å‹æä¾›äº†è§£å†³æ–¹æ¡ˆï¼Œ <strong>å…¥å‚ä¸åº”è¯¥æ˜¯ &quot;Collection of E&quot; ï¼Œç”± Collection<E>è¡¨ç¤ºï¼Œè€Œåº”è¯¥æ˜¯ &quot;collection of some supertype of E&quot; ï¼Œ ç”± Collection&lt;? super E&gt;</strong> è¡¨ç¤ºã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// Wildcard type for parameter that serves as an E consumer</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">popAll</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">super</span> <span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> dst<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        dst<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç”±ä¸Šï¼Œæ•™è®­æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œä¸ºäº† API æœ€å¤§ä¼¸ç¼©æ€§ï¼Œåœ¨ä»£è¡¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…¥å‚ä½¿ç”¨é€šé…ç¬¦ç±»å‹ã€‚åŠ©è®°å£è¯€ï¼š</p>\n<blockquote>\n<p>PECS strands for producer-extends, consumer-super</p>\n</blockquote>\n<p>The  <code>reduce</code>  method use  <code>list</code>  parameter as an  <code>E</code>  producer, so its declaration should use a wildcard type that extends  <code>E</code> . whereas, The parameter  <code>f</code>  represents a function that both consumes and produces  <code>E</code>  instances, so a wildcard type would be inappropriate for it.</p>\n<h2 id=\"é‡æ„reduce\"><a class=\"anchor\" href=\"#é‡æ„reduce\">#</a> é‡æ„ Reduce</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">E</span> <span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Function</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> f<span class=\"token punctuation\">,</span> <span class=\"token class-name\">E</span> intVal<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>Would this change make any difference in practice? As it turns out, it wold. Suppose you have a  <code>List&lt;Integer&gt;</code> , and you want to reduce it with a  <code>Function&lt;Number&gt;</code> . This would not compile with the original declarationo previously, but it does once you add the bounded wildcard type.</p>\n<h2 id=\"recursive-type-bound\"><a class=\"anchor\" href=\"#recursive-type-bound\">#</a> Recursive type bound</h2>\n<p>Recursive type bound definition: A type parameter to be bounded by some expression involving that type parameter itself.</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Comparable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> i <span class=\"token operator\">=</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token class-name\">T</span> t <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            result <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The type bound  <code>&lt;T extends Comparable&lt;T&gt;&gt;</code>  may be read as &quot;for every type T that can be compared to itself&quot;.</p>\n<p>ä½†æˆ‘ä»¬ä¸èƒ½è°ƒç”¨  <code>max(List&lt;ScheduledFuture&lt;?&gt;&gt; scheduledFutures)</code> ï¼ŒåŸå› åœ¨äºï¼ŒScheduledFuture å¹¶ä¸å®ç°  <code>Comparable&lt;ScheduledFuture&gt;</code>  æ¥å£ï¼Œç›¸åï¼Œå®ƒä¸è¿‡æ˜¯  <code>Delayed</code>  å­æ¥å£ï¼Œå®ƒç»§æ‰¿çš„æ˜¯  <code>Comparable&lt;Delayed&gt;</code> ï¼Œæ¢å¥è¯è¯´ï¼Œ  <code>ScheduledFuture</code>  å®ä¾‹å¹¶ä¸ä»…ä»…å’Œå…¶ä»–  <code>ScheduledFuture</code>  å®ä¾‹æ¯”è¾ƒï¼Œå®ƒè¿˜å¯ä»¥å’Œä»»æ„çš„  <code>Delayed</code>  å®ä¾‹è¿›è¡Œæ¯”è¾ƒã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ScheduledFuture</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Delayed</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Future</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Delayed</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Delayed</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Comparable</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">int</span> <span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Comparable</span><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">super</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token class-name\">T</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> i <span class=\"token operator\">=</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token class-name\">T</span> t <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            result <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>You should always use Comparable&lt;? super T&gt; in preference to Comparable<T>. The same is true of comparators.</p>\n</blockquote>\n<h2 id=\"unbounded-wildcards\"><a class=\"anchor\" href=\"#unbounded-wildcards\">#</a> Unbounded Wildcards</h2>\n<p>The unbounded wildcard type is specified using the wildcard character (?), for example, List&lt;?&gt;. This is called a list of unknown type. There are two scenarios where an unbounded wildcard is a useful approach:</p>\n<ol>\n<li>If you are writing a method that can be implemented using functionality provided in the Object class.</li>\n<li>When the code is using methods in the generic class that don't depend on the type parameter. For example, List.size or List.clear. In fact, Class&lt;?&gt; is so often used because most of the methods in Class<T> do not depend on T.<br />\nConsider the following method, printList:</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printList</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> elem <span class=\"token operator\">:</span> list<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>elem <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>The goal of printList is to print a list of any type, but it fails to achieve that goal â€” it prints only a list of Object instances; it cannot print List<Integer>, List<String>, List<Double>, and so on, because they are not subtypes of List<Object>. To write a generic printList method, use List&lt;?&gt;:<br />\n åˆ°è¿™é‡Œï¼Œå…¶å®å¯ä»¥ç†è§£ List&lt;?&gt; æ˜¯ List&lt;? extends Object&gt; çš„ç®€å†™</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">printList</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span> list<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> elem<span class=\"token operator\">:</span> list<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>elem <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>Because for any concrete type A, List<A> is a subtype of List&lt;?&gt;, you can use printList to print a list of any type:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> li <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span>  ls <span class=\"token operator\">=</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">asList</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"two\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">printList</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">printList</span><span class=\"token punctuation\">(</span>ls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>It's important to note that  <code>List&lt;Object&gt;</code>  and  <code>List&lt;?&gt;</code>  are not the same. You can insert an Object, or any subtype of Object, into a  <code>List&lt;Object&gt;</code> . But you can only insert null into a List<?>. (Because the type of element in the List<?> is not certain, the compiler can't check the inserting operation is type safe or not, unless you insert null value) The Guidelines for Wildcard Use section has more information on how to determine what kind of wildcard, if any, should be used in a given situation.</p>\n<h2 id=\"wildcards-and-subtyping\"><a class=\"anchor\" href=\"#wildcards-and-subtyping\">#</a> Wildcards and Subtyping</h2>\n<p>å¦‚æœ Sub æ˜¯ Super çš„å­ç±»ï¼Œé‚£ä¹ˆ</p>\n<ol>\n<li>èŒƒå‹ä¸æ”¯æŒåå˜  <code>List&lt;Sub&gt;</code>  &amp;  <code>List&lt;Super&gt;</code>  æ²¡æœ‰å…³ç³»ï¼›</li>\n<li><code>List&lt;Sub&gt;</code>  æ˜¯ List&lt;? extends Super&gt; çš„å­ç±»ï¼›</li>\n<li><code>List&lt;Super&gt;</code>  æ˜¯ List&lt;? super Sub&gt; çš„å­ç±»ï¼›</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>Invariant</th>\n<th>Wildcard</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img data-src=\"https://docs.oracle.com/javase/tutorial/figures/java/generics-subtypeRelationship.gif\" alt=\"\" /></td>\n<td><img data-src=\"https://docs.oracle.com/javase/tutorial/figures/java/generics-wildcardSubtyping.gif\" alt=\"\" /></td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"key-points\"><a class=\"anchor\" href=\"#key-points\">#</a> Key points</h1>\n<ol>\n<li>Don't use a wildcard as a return type, because it forces programmers to use wildcard types in client codes.</li>\n<li>If a input parameter is both producer and consumer, define it as exact type match, rather than wildcard types.</li>\n</ol>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>Effect Java Item 25 <a href=\"#fnref1\" class=\"footnote-backref\">â†©ï¸</a></p>\n</li>\n</ol>\n</section>\n",
            "tags": [
                "Java",
                "èŒƒå‹"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/08/06/AndroidX-migrate/",
            "url": "https://limxtop1989.github.io/limxtop/2023/08/06/AndroidX-migrate/",
            "title": "ç©¿å±±ç”²é›†æˆæŠ¥é”™",
            "date_published": "2023-08-06T15:10:48.000Z",
            "content_html": "<h1 id=\"å¼‚å¸¸æè¿°\"><a class=\"anchor\" href=\"#å¼‚å¸¸æè¿°\">#</a> å¼‚å¸¸æè¿°</h1>\n<p>å¼•å…¥ç©¿å±±ç”² SDK åï¼Œç¼–è¯‘è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå †æ ˆå¦‚ä¸‹</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">2023</span><span class=\"token operator\">-</span><span class=\"token number\">08</span><span class=\"token operator\">-</span><span class=\"token number\">06</span> <span class=\"token number\">23</span><span class=\"token operator\">:</span><span class=\"token number\">08</span><span class=\"token operator\">:</span><span class=\"token number\">51.659</span> <span class=\"token number\">32243</span><span class=\"token operator\">-</span><span class=\"token number\">32243</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug <span class=\"token class-name\">E</span><span class=\"token operator\">/</span><span class=\"token class-name\">AndroidRuntime</span><span class=\"token operator\">:</span> FATAL EXCEPTION<span class=\"token operator\">:</span> main</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Process</span><span class=\"token operator\">:</span> com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">,</span> PID<span class=\"token operator\">:</span> <span class=\"token number\">32243</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>RuntimeException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unable</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">get</span> provider <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>bytedance<span class=\"token punctuation\">.</span>sdk<span class=\"token punctuation\">.</span>openadsdk<span class=\"token punctuation\">.</span></span>TTFileProvider</span><span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Didn</span>'t find <span class=\"token keyword\">class</span> <span class=\"token string\">\"com.bytedance.sdk.openadsdk.TTFileProvider\"</span> on path<span class=\"token operator\">:</span> <span class=\"token class-name\">DexPathList</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>zip file <span class=\"token string\">\"/data/app/~~8aOWO0BH2NR-PT5SN6_9Sw==/com.maxim.wordcard.debug-z4MN-3uI1JjNQYgIxbhNYQ==/base.apk\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>nativeLibraryDirectories<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>base<span class=\"token punctuation\">.</span>apk<span class=\"token operator\">!</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token operator\">-</span>v8a<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system_ext<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">installProvider</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">7479</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">installContentProviders</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">6985</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleBindApplication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">6756</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span>-$$<span class=\"token class-name\">Nest</span>$<span class=\"token function\">mhandleBindApplication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Unknown</span> <span class=\"token class-name\">Source</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span>$<span class=\"token class-name\">H</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">2129</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Handler</span><span class=\"token punctuation\">.</span><span class=\"token function\">dispatchMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Handler</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">106</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loopOnce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">201</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">288</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">7884</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span>Method</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Native</span> <span class=\"token class-name\">Method</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>RuntimeInit</span>$<span class=\"token class-name\">MethodAndArgsCaller</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">548</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ZygoteInit</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZygoteInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">936</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>     <span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Didn</span>'t find <span class=\"token keyword\">class</span> <span class=\"token string\">\"com.bytedance.sdk.openadsdk.TTFileProvider\"</span> on path<span class=\"token operator\">:</span> <span class=\"token class-name\">DexPathList</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>zip file <span class=\"token string\">\"/data/app/~~8aOWO0BH2NR-PT5SN6_9Sw==/com.maxim.wordcard.debug-z4MN-3uI1JjNQYgIxbhNYQ==/base.apk\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>nativeLibraryDirectories<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>base<span class=\"token punctuation\">.</span>apk<span class=\"token operator\">!</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token operator\">-</span>v8a<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system_ext<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">dalvik<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">.</span></span>BaseDexClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">findClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BaseDexClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">259</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">379</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">312</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>AppComponentFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">instantiateProvider</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppComponentFactory</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">147</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">androidx<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>CoreComponentFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">instantiateProvider</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CoreComponentFactory</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">67</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">installProvider</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">7463</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">installContentProviders</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">6985</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleBindApplication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">6756</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span>-$$<span class=\"token class-name\">Nest</span>$<span class=\"token function\">mhandleBindApplication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Unknown</span> <span class=\"token class-name\">Source</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span>$<span class=\"token class-name\">H</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">2129</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Handler</span><span class=\"token punctuation\">.</span><span class=\"token function\">dispatchMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Handler</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">106</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loopOnce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">201</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">288</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>app<span class=\"token punctuation\">.</span></span>ActivityThread</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">7884</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span>Method</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Native</span> <span class=\"token class-name\">Method</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>RuntimeInit</span>$<span class=\"token class-name\">MethodAndArgsCaller</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">548</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ZygoteInit</span><span class=\"token punctuation\">.</span><span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ZygoteInit</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">936</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    \t<span class=\"token class-name\">Suppressed</span><span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>NoClassDefFoundError</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Failed</span> resolution of<span class=\"token operator\">:</span> <span class=\"token class-name\">Landroid</span><span class=\"token operator\">/</span>support<span class=\"token operator\">/</span>v4<span class=\"token operator\">/</span>content<span class=\"token operator\">/</span><span class=\"token class-name\">FileProvider</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>VMClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">findLoadedClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Native</span> <span class=\"token class-name\">Method</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">findLoadedClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">738</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">363</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        \t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token number\">15</span> more</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>     <span class=\"token class-name\">Caused</span> by<span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Didn</span>'t find <span class=\"token keyword\">class</span> <span class=\"token string\">\"android.support.v4.content.FileProvider\"</span> on path<span class=\"token operator\">:</span> <span class=\"token class-name\">DexPathList</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>zip file <span class=\"token string\">\"/data/app/~~8aOWO0BH2NR-PT5SN6_9Sw==/com.maxim.wordcard.debug-z4MN-3uI1JjNQYgIxbhNYQ==/base.apk\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>nativeLibraryDirectories<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token number\">8</span>aOWO0BH2NR<span class=\"token operator\">-</span><span class=\"token class-name\">PT5SN6_9Sw</span><span class=\"token operator\">==</span><span class=\"token operator\">/</span>com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>wordcard<span class=\"token punctuation\">.</span>debug<span class=\"token operator\">-</span>z4MN<span class=\"token operator\">-</span><span class=\"token number\">3</span>uI1JjNQYgIxbhNYQ<span class=\"token operator\">==</span><span class=\"token operator\">/</span>base<span class=\"token punctuation\">.</span>apk<span class=\"token operator\">!</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>arm64<span class=\"token operator\">-</span>v8a<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">,</span> <span class=\"token operator\">/</span>system_ext<span class=\"token operator\">/</span>lib64<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">dalvik<span class=\"token punctuation\">.</span>system<span class=\"token punctuation\">.</span></span>BaseDexClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">findClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BaseDexClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">259</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">379</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        at <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ClassLoader</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassLoader</span><span class=\"token punctuation\">.</span>java<span class=\"token operator\">:</span><span class=\"token number\">312</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>app ç›®å½•ä¸‹çš„ build.gradle é…ç½®å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-gradle\">dependencies &#123;\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    // Ad begin\n    implementation 'com.pangle.cn:ads-sdk-pro:5.4.1.6'\n    // Ad end\n    implementation 'com.github.PhilJay:MPAndroidChart:v3.1.0'\n\n    implementation  'com.umeng.umsdk:common:9.4.7'// required\n    implementation  'com.umeng.umsdk:asms:1.4.0'// required\n    implementation 'com.umeng.umsdk:apm:1.7.0' // crash and performance\n    implementation  'com.umeng.umsdk:abtest:1.0.0'// optional\n\n    implementation 'com.github.deano2390:MaterialShowcaseView:1.3.7'\n    // Navigation start\n    def nav_version = &quot;2.5.3&quot;\n    // Kotlin\n    implementation (&quot;androidx.navigation:navigation-fragment-ktx:$nav_version&quot;)\n    implementation (&quot;androidx.navigation:navigation-ui-ktx:$nav_version&quot;)\n    // Feature module Support\n    implementation &quot;androidx.navigation:navigation-dynamic-features-fragment:$nav_version&quot;\n    // Navigation end\n\n    implementation 'androidx.core:core-ktx:1.7.0'\n    implementation 'androidx.appcompat:appcompat:1.6.0'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.5.1'\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.5.1'\n    implementation &quot;androidx.activity:activity-ktx:1.7.1&quot;\n    implementation &quot;androidx.fragment:fragment-ktx:1.5.7&quot;\n\n    api &quot;io.reactivex.rxjava2:rxandroid:2.1.0&quot;\n    implementation 'androidx.lifecycle:lifecycle-livedata-core-ktx:2.5.1'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    // room start\n    def room_version = &quot;2.5.1&quot;\n    implementation(&quot;androidx.room:room-runtime:$room_version&quot;)\n    annotationProcessor(&quot;androidx.room:room-compiler:$room_version&quot;)\n    // To use Kotlin annotation processing tool (kapt)\n    kapt(&quot;androidx.room:room-compiler:$room_version&quot;)\n    // To use Kotlin Symbol Processing (KSP)\n//    ksp(&quot;androidx.room:room-compiler:$room_version&quot;)\n    // optional - Kotlin Extensions and Coroutines support for Room\n    implementation(&quot;androidx.room:room-ktx:$room_version&quot;)\n    // optional - RxJava2 support for Room\n    implementation(&quot;androidx.room:room-rxjava2:$room_version&quot;)\n    // optional - RxJava3 support for Room\n    implementation(&quot;androidx.room:room-rxjava3:$room_version&quot;)\n    // optional - Guava support for Room, including Optional and ListenableFuture\n    implementation(&quot;androidx.room:room-guava:$room_version&quot;)\n    // optional - Test helpers\n    testImplementation(&quot;androidx.room:room-testing:$room_version&quot;)\n    // optional - Paging 3 Integration\n    implementation(&quot;androidx.room:room-paging:$room_version&quot;)\n    // room end\n\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n&#125;\n</code></pre>\n<h1 id=\"å¼‚å¸¸åˆ†æ\"><a class=\"anchor\" href=\"#å¼‚å¸¸åˆ†æ\">#</a> å¼‚å¸¸åˆ†æ</h1>\n<p>æ‰“å¼€  <code>TTFileProvider</code> ï¼Œ å®ƒç»§æ‰¿çš„æ˜¯  <code>android.support.v4.content.FileProvider</code></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>bytedance<span class=\"token punctuation\">.</span>sdk<span class=\"token punctuation\">.</span>openadsdk</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FileProvider</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TTFileProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FileProvider</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TTFileProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å¦‚æœæ·»åŠ åŒ…å«  <code>android.support.v4.content.FileProvider</code>  çš„ä¾èµ–ï¼Œ <code>implementation 'com.android.support:support-v4:26.1.0'</code>  åˆ™ç¼–è¯‘æŠ¥å‡ºå¥½å‡ ä¸ªç±»é‡å¤å®šä¹‰çš„å¼‚å¸¸ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Duplicate</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ResultReceiver</span> found in modules core<span class=\"token operator\">-</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>androidx<span class=\"token punctuation\">.</span>core<span class=\"token operator\">:</span>core<span class=\"token operator\">:</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span> and support<span class=\"token operator\">-</span>compat<span class=\"token operator\">-</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>support<span class=\"token operator\">:</span>support<span class=\"token operator\">-</span>compat<span class=\"token operator\">:</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">Duplicate</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ResultReceiver</span>$<span class=\"token number\">1</span> found in modules core<span class=\"token operator\">-</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>androidx<span class=\"token punctuation\">.</span>core<span class=\"token operator\">:</span>core<span class=\"token operator\">:</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span> and support<span class=\"token operator\">-</span>compat<span class=\"token operator\">-</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>support<span class=\"token operator\">:</span>support<span class=\"token operator\">-</span>compat<span class=\"token operator\">:</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Duplicate</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ResultReceiver</span>$<span class=\"token class-name\">MyResultReceiver</span> found in modules core<span class=\"token operator\">-</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>androidx<span class=\"token punctuation\">.</span>core<span class=\"token operator\">:</span>core<span class=\"token operator\">:</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span> and support<span class=\"token operator\">-</span>compat<span class=\"token operator\">-</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>support<span class=\"token operator\">:</span>support<span class=\"token operator\">-</span>compat<span class=\"token operator\">:</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">Duplicate</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token namespace\">android<span class=\"token punctuation\">.</span>support<span class=\"token punctuation\">.</span>v4<span class=\"token punctuation\">.</span>os<span class=\"token punctuation\">.</span></span>ResultReceiver</span>$<span class=\"token class-name\">MyRunnable</span> found in modules core<span class=\"token operator\">-</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>androidx<span class=\"token punctuation\">.</span>core<span class=\"token operator\">:</span>core<span class=\"token operator\">:</span><span class=\"token number\">1.9</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span> and support<span class=\"token operator\">-</span>compat<span class=\"token operator\">-</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token operator\">-</span>runtime <span class=\"token punctuation\">(</span>com<span class=\"token punctuation\">.</span>android<span class=\"token punctuation\">.</span>support<span class=\"token operator\">:</span>support<span class=\"token operator\">-</span>compat<span class=\"token operator\">:</span><span class=\"token number\">26.1</span><span class=\"token number\">.0</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å¼‚å¸¸æ—¥å¿—é‡Œæœ‰ä¸€æ®µè­¦å‘Š</p>\n<blockquote>\n<p>Your project has set  <code>android.useAndroidX=true</code> , but configuration  <code>:app:googleDebugRuntimeClasspath</code>  still contains legacy support libraries, which may cause runtime issues.<br />\nThis behavior will not be allowed in Android Gradle plugin 8.0.<br />\nPlease use only AndroidX dependencies or set  <code>android.enableJetifier=true</code>  in the  <code>gradle.properties</code>  file to migrate your project to AndroidX (see <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vamV0cGFjay9hbmRyb2lkeC9taWdyYXRl\">https://developer.android.com/jetpack/androidx/migrate</span> for more info).</p>\n</blockquote>\n<p>æˆ‘åŸæ¥çš„   <code>gradle.properties</code>  åªæœ‰  <code>android.useAndroidX=true</code>  çš„é…ç½®ï¼ŒæŒ‰ç…§è­¦å‘Šçš„å»ºè®®ï¼Œä¿®æ”¹åå¦‚ä¸‹ï¼š</p>\n<pre><code>android.useAndroidX=true\nandroid.enableJetifier=true\n</code></pre>\n<h1 id=\"migrate-an-existing-project-using-android-studio\"><a class=\"anchor\" href=\"#migrate-an-existing-project-using-android-studio\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5nb29nbGUuY24vamV0cGFjay9hbmRyb2lkeC9taWdyYXRlI21pZ3JhdGVfYW5fZXhpc3RpbmdfcHJvamVjdF91c2luZ19hbmRyb2lkX3N0dWRpbw==\">Migrate an existing project using Android Studio</span></h1>\n<p>With Android Studio 3.2 and higher, you can migrate an existing project to AndroidX by selecting Refactor &gt; Migrate to AndroidX from the menu bar.</p>\n<p>The refactor command makes use of two flags. By default, both of them are set to  <code>true</code>  in your  <code>gradle.properties</code>  file:</p>\n<p><code>android.useAndroidX=true</code> <br />\nThe Android plugin uses the appropriate AndroidX library instead of a Support Library.<br />\n <code>android.enableJetifier=true</code> <br />\nThe Android plugin automatically migrates existing third-party libraries to use AndroidX by rewriting their binaries.</p>\n<p>çœ‹è¿™æè¿°ï¼Œå¼€å¯  <code>android.enableJetifier=true</code>  åï¼Œç¼–è¯‘æ—¶å°†é‡å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå°†  <code>android.support.v4.content.FileProvider</code>  æ”¹ä¸º AndroidX å¯¹åº”çš„ç±»  <code>androidx.core.content.FileProvider</code>  ç›¸å½“äºå°†ç©¿å±±ç”²åº“é‡Œå¼•ç”¨çš„ support çš„ç±»ï¼Œé‡å†™ä¸º AndroiX çš„ï¼Œå¦‚ä¸‹</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>bytedance<span class=\"token punctuation\">.</span>sdk<span class=\"token punctuation\">.</span>openadsdk</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token namespace\">androidx<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FileProvider</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TTFileProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FileProvider</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TTFileProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>è‡³æ­¤é—®é¢˜åŸå› æ‰¾åˆ°å¹¶è§£å†³ï¼Œç§»æ¤ AndroidX ä¸å½»åº•ï¼Œæ‰€è‡´ï¼ŒæŠŠé—®é¢˜æš´éœ²å‡ºæ¥ã€‚</p>\n",
            "tags": [
                "Android",
                "ç©¿å±±ç”², é›†æˆæŠ¥é”™ï¼ŒAndroidX migrateï¼ŒFileProvider not found"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/30/RxJava-Schedule/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/30/RxJava-Schedule/",
            "title": "RxJava Schedule",
            "date_published": "2023-07-30T09:08:48.000Z",
            "content_html": "<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Observable</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Observable<span class=\"token punctuation\">.</span>OnSubscribe</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Subscriber</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">super</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>observer<span class=\"token punctuation\">.</span><span class=\"token function\">isUnsubscribed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    observer<span class=\"token punctuation\">.</span><span class=\"token function\">onNext</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                observer<span class=\"token punctuation\">.</span><span class=\"token function\">onCompleted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            observer<span class=\"token punctuation\">.</span><span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Subscriber</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onNext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Next: \"</span> <span class=\"token operator\">+</span> item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>err<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error: \"</span> <span class=\"token operator\">+</span> error<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCompleted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sequence complete.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>Running result:</p>\n<pre><code>Next: 1\nNext: 2\nNext: 3\nNext: 4\nSequence complete.\n</code></pre>\n<p>ä¸€ä¸ª Observable éœ€è¦ä¸€ä¸ª OnSubscribe &amp; Subscriber é…å¥—æˆç»„ã€‚ æ¯ç»„ Observable æ„æˆä¸Šä¸‹æ¸¸å…³ç³»ï¼Œoperator è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºè¯¥å±‚çº§çš„ Observable å¹¶æŒæœ‰ä¸Šæ¸¸çš„ Observable å¯¹è±¡ã€‚ å½“è¯¥å±‚çº§ Observable è¢« subscribe æ—¶ï¼Œ onSubscribe ä¼šå®ä¾‹åŒ–ä¸Šæ¸¸çš„ Observerï¼Œå®ƒæŒæœ‰ä¸‹æ¸¸çš„ Observerã€‚  subscribe ä¸Šæ¸¸çš„ Observableã€‚ ç”±æ­¤å‡ºå‘é“¾å¼ subscribe è°ƒç”¨ï¼Œç›´åˆ°æœ€ä¸Šæ¸¸çš„ Observableï¼Œå…¶ onSubscribe å‘å°„æ•°æ®<br />\nä¸Šæ¸¸çš„ Observer ä¼šè°ƒç”¨ä¸‹æ¸¸çš„ Observer ï¼Œå¦‚æ­¤é“¾å¼é€çº§è°ƒç”¨ Observer çš„ æ¥å£æ–¹æ³•ï¼Œå¦‚ onNext ï¼Œç›´åˆ°æœ€ä¸‹æ¸¸ ã€‚</p>\n<pre><code>    /**\n     * Modifies an ObservableSource to perform its emissions and notifications on a specified &#123;@link Scheduler&#125;,\n     * asynchronously with an unbounded buffer of configurable &quot;island size&quot; and optionally delays onError notifications.\n     * &lt;p&gt;\n     * &lt;img width=&quot;640&quot; height=&quot;308&quot; src=&quot;https://raw.github.com/wiki/ReactiveX/RxJava/images/rx-operators/observeOn.png&quot; alt=&quot;&quot;&gt;\n     * &lt;dl&gt;\n     *  &lt;dt&gt;&lt;b&gt;Scheduler:&lt;/b&gt;&lt;/dt&gt;\n     *  &lt;dd&gt;You specify which &#123;@link Scheduler&#125; this operator will use.&lt;/dd&gt;\n     * &lt;/dl&gt;\n     * &lt;p&gt;&quot;Island size&quot; indicates how large chunks the unbounded buffer allocates to store the excess elements waiting to be consumed\n     * on the other side of the asynchronous boundary. Values below 16 are not recommended in performance sensitive scenarios.\n     *\n     * @param scheduler\n     *            the &#123;@link Scheduler&#125; to notify &#123;@link Observer&#125;s on\n     * @param delayError\n     *            indicates if the onError notification may not cut ahead of onNext notification on the other side of the\n     *            scheduling boundary. If true a sequence ending in onError will be replayed in the same order as was received\n     *            from upstream\n     * @param bufferSize the size of the buffer.\n     * @return the source ObservableSource modified so that its &#123;@link Observer&#125;s are notified on the specified\n     *         &#123;@link Scheduler&#125;\n     * @see &lt;a href=&quot;http://reactivex.io/documentation/operators/observeon.html&quot;&gt;ReactiveX operators documentation: ObserveOn&lt;/a&gt;\n     * @see &lt;a href=&quot;http://www.grahamlea.com/2014/07/rxjava-threading-examples/&quot;&gt;RxJava Threading Examples&lt;/a&gt;\n     * @see #subscribeOn\n     * @see #observeOn(Scheduler)\n     * @see #observeOn(Scheduler, boolean)\n     */\n    @CheckReturnValue\n    @SchedulerSupport(SchedulerSupport.CUSTOM)\n    public final Observable&lt;T&gt; observeOn(Scheduler scheduler, boolean delayError, int bufferSize) &#123;\n        ObjectHelper.requireNonNull(scheduler, &quot;scheduler is null&quot;);\n        ObjectHelper.verifyPositive(bufferSize, &quot;bufferSize&quot;);\n        return RxJavaPlugins.onAssembly(new ObservableObserveOn&lt;T&gt;(this, scheduler, delayError, bufferSize));\n    &#125;\n</code></pre>\n<pre><code>    /**\n     * Asynchronously subscribes Observers to this ObservableSource on the specified &#123;@link Scheduler&#125;.\n     * &lt;p&gt;\n     * &lt;img width=&quot;640&quot; height=&quot;305&quot; src=&quot;https://raw.github.com/wiki/ReactiveX/RxJava/images/rx-operators/subscribeOn.png&quot; alt=&quot;&quot;&gt;\n     * &lt;dl&gt;\n     *  &lt;dt&gt;&lt;b&gt;Scheduler:&lt;/b&gt;&lt;/dt&gt;\n     *  &lt;dd&gt;You specify which &#123;@link Scheduler&#125; this operator will use.&lt;/dd&gt;\n     * &lt;/dl&gt;\n     *\n     * @param scheduler\n     *            the &#123;@link Scheduler&#125; to perform subscription actions on\n     * @return the source ObservableSource modified so that its subscriptions happen on the\n     *         specified &#123;@link Scheduler&#125;\n     * @see &lt;a href=&quot;http://reactivex.io/documentation/operators/subscribeon.html&quot;&gt;ReactiveX operators documentation: SubscribeOn&lt;/a&gt;\n     * @see &lt;a href=&quot;http://www.grahamlea.com/2014/07/rxjava-threading-examples/&quot;&gt;RxJava Threading Examples&lt;/a&gt;\n     * @see #observeOn\n     */\n    @CheckReturnValue\n    @SchedulerSupport(SchedulerSupport.CUSTOM)\n    public final Observable&lt;T&gt; subscribeOn(Scheduler scheduler) &#123;\n        ObjectHelper.requireNonNull(scheduler, &quot;scheduler is null&quot;);\n        return RxJavaPlugins.onAssembly(new ObservableSubscribeOn&lt;T&gt;(this, scheduler));\n    &#125;\n</code></pre>\n<pre><code>Observable.create(OnSubscribe)\n.observeOn()\n.subscribeOn()\n// 1. subscribe\n.subscribe(Subscriber);\n</code></pre>\n<pre><code>\npublic final class ObservableSubscribeOn&lt;T&gt; extends AbstractObservableWithUpstream&lt;T, T&gt; &#123;\n    final Scheduler scheduler;\n\n    public ObservableSubscribeOn(ObservableSource&lt;T&gt; source, Scheduler scheduler) &#123;\n        super(source);\n        this.scheduler = scheduler;\n    &#125;\n\n    @Override\n    public void subscribeActual(final Observer&lt;? super T&gt; observer) &#123;\n        // 2. å®ä¾‹è¯ä¸Šæ¸¸ Observer\n        final SubscribeOnObserver&lt;T&gt; parent = new SubscribeOnObserver&lt;T&gt;(observer);\n\n        observer.onSubscribe(parent);\n        // 3. ä½¿ç”¨ä¸Šæ¸¸ Observer è®¢é˜…ä¸Šæ¸¸ Observable ï¼Œå…·ä½“æ˜¯åœ¨ SubscribeTask å†…æ‰§è¡Œã€‚\n        parent.setDisposable(scheduler.scheduleDirect(new SubscribeTask(parent)));\n    &#125;\n\n    static final class SubscribeOnObserver&lt;T&gt; extends AtomicReference&lt;Disposable&gt; implements Observer&lt;T&gt;, Disposable &#123;\n\n        private static final long serialVersionUID = 8094547886072529208L;\n        final Observer&lt;? super T&gt; downstream;\n\n        final AtomicReference&lt;Disposable&gt; upstream;\n\n        SubscribeOnObserver(Observer&lt;? super T&gt; downstream) &#123;\n            this.downstream = downstream;\n            this.upstream = new AtomicReference&lt;Disposable&gt;();\n        &#125;\n\n        @Override\n        public void onSubscribe(Disposable d) &#123;\n            DisposableHelper.setOnce(this.upstream, d);\n        &#125;\n\n        @Override\n        public void onNext(T t) &#123;\n            downstream.onNext(t);\n        &#125;\n\n        @Override\n        public void onError(Throwable t) &#123;\n            downstream.onError(t);\n        &#125;\n\n        @Override\n        public void onComplete() &#123;\n            downstream.onComplete();\n        &#125;\n\n        @Override\n        public void dispose() &#123;\n            DisposableHelper.dispose(upstream);\n            DisposableHelper.dispose(this);\n        &#125;\n\n        @Override\n        public boolean isDisposed() &#123;\n            return DisposableHelper.isDisposed(get());\n        &#125;\n\n        void setDisposable(Disposable d) &#123;\n            DisposableHelper.setOnce(this, d);\n        &#125;\n    &#125;\n\n    final class SubscribeTask implements Runnable &#123;\n        private final SubscribeOnObserver&lt;T&gt; parent;\n\n        SubscribeTask(SubscribeOnObserver&lt;T&gt; parent) &#123;\n            this.parent = parent;\n        &#125;\n\n        @Override\n        public void run() &#123;\n            // 4. è®¢é˜…ä¸Šæ¸¸ Observable ObservableObserveOn\n            source.subscribe(parent);\n        &#125;\n    &#125;\n&#125;\n</code></pre>\n",
            "tags": [
                "RxJava, çº¿ç¨‹åˆ‡æ¢"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/30/AbstractQueuedSynchronizer/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/30/AbstractQueuedSynchronizer/",
            "title": "Java å¹¶å‘æ¡†æ¶ AbstractQueuedSynchronizer",
            "date_published": "2023-07-30T00:58:02.000Z",
            "content_html": "<p><img data-src=\"https://s3.uuu.ovh/imgs/2023/07/30/84de061a940ab561.png\" alt=\"\" /><br />\nå…³äº AbstractQueuedSynchronizer çš„æºç åˆ†æï¼Œæˆ‘ä»¥ ReentrantLock ä¸ºä¾‹ï¼Œç±»å›¾å¦‚ä¸Šã€‚</p>\n<blockquote>\n<p>A reentrant mutual exclusion Lock with the same basic behavior and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.</p>\n</blockquote>\n<blockquote>\n<p>A ReentrantLock is owned by the thread last successfully locking, but not yet unlocking it. A thread invoking lock will return, successfully acquiring the lock, when the lock is not owned by another thread. The method will return immediately if the current thread already owns the lock. This can be checked using methods isHeldByCurrentThread, and getHoldCount.</p>\n</blockquote>\n<p>Lock æ¥å£å®šä¹‰äº†å…³äº Lock çš„ä¸‰ä¸ªä¸»è¦æ“ä½œï¼š</p>\n<ol>\n<li>lock();</li>\n<li>unLock();</li>\n<li>newCondition();</li>\n</ol>\n<p><code>ReentrantLock</code>  å®ç°  <code>Lock</code>  æ¥å£ï¼Œä½†å®ç°çš„ç»†èŠ‚å…¨éƒ½å§”æ´¾ç»™å†…éƒ¨ç±»  <code>Sync</code>  çš„å…·ä½“å®ä¾‹ã€‚å…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåˆ›å»º  <code>ReentrantLock</code>  å®ä¾‹æ—¶ï¼Œå¯ä»¥ä¼ é€’  <code>fair</code>  å‚æ•°ï¼ŒæŒ‡æ˜å®ç°çš„æ˜¯å…¬å¹³é”è¿˜æ˜¯éå…¬å¹³é”ï¼Œé»˜è®¤ä¸ºéå…¬å¹³é”ã€‚</p>\n<p>æ€»ä½“æµç¨‹å¦‚å›¾<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/07/30/602b88085d477f84.png\" alt=\"\" /></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Creates an instance of &#123;@code ReentrantLock&#125;.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * This is equivalent to using &#123;@code ReentrantLock(false)&#125;.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    sync <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NonfairSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    * Creates an instance of &#123;@code ReentrantLock&#125; with the</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    * given fairness policy.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    * @param fair &#123;@code true&#125; if this lock should use a fair ordering policy</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> fair<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    sync <span class=\"token operator\">=</span> fair <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FairSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NonfairSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…¬å¹³é”æŒ‡çº¿ç¨‹  <code>lock</code>  æ—¶å¾—æŒ‰é¡ºåºæ’é˜Ÿï¼Œç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºæ—¶æ‰æŠ¢å é”ï¼Œå¦åˆ™è¿›å…¥é˜Ÿåˆ—æ’é˜Ÿç­‰å¾…ã€‚</p>\n<h1 id=\"thread-b-åŠ é”å¤±è´¥è¿›å…¥ç­‰å¾…\"><a class=\"anchor\" href=\"#thread-b-åŠ é”å¤±è´¥è¿›å…¥ç­‰å¾…\">#</a> Thread B åŠ é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…</h1>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.ReentrantLock.FairSync#lock</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">final</span> <span class=\"token keyword\">void</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#acquire</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Acquires in exclusive mode, ignoring interrupts.  Implemented</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * by invoking at least once &#123;@link #tryAcquire&#125;,</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    * returning on success.  Otherwise the thread is queued, possibly</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    * repeatedly blocking and unblocking, invoking &#123;@link</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    * #tryAcquire&#125; until success.  This method can be used</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    * to implement method &#123;@link Lock#lock&#125;.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    * @param arg the acquire argument.  This value is conveyed to</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    *        &#123;@link #tryAcquire&#125; but is otherwise uninterpreted and</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    *        can represent anything you like.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">void</span> <span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">tryAcquire</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token function\">acquireQueued</span><span class=\"token punctuation\">(</span><span class=\"token function\">addWaiter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">.</span>EXCLUSIVE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token function\">selfInterrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…ˆ <code>tryAcquire</code>  å°è¯•è·å¾—é”ï¼Œå°è¯•å¤±è´¥ï¼Œåˆ™  <code>acquireQueued</code>  ã€‚åœ¨ AbstractQueuedSynchronizer  <code>tryAcquire</code>  æ˜¯æ¨¡ç‰ˆæ–¹æ³•ï¼Œå¼ºåˆ¶å­ç±»å®ç°</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.ReentrantLock.FairSync#tryAcquire</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Fair version of tryAcquire.  Don't grant access unless</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * recursive call or no waiters or is first.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">protected</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryAcquire</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> acquires<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Thread</span> current <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">// æ²¡æœ‰çº¿ç¨‹æŒæœ‰é”ï¼Œ(çº¿ç¨‹æˆåŠŸè·å¾—é”æ—¶ï¼Œä¼šå°† state é€’å¢ acquires)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">hasQueuedPredecessors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token function\">compareAndSetState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> acquires<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token function\">setExclusiveOwnerThread</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">==</span> <span class=\"token function\">getExclusiveOwnerThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// å·²ç»æœ‰çº¿ç¨‹æŒæœ‰é”ï¼Œåˆ¤æ–­è¯¥é”æ‹¥æœ‰è€…æ˜¯ä¸æ˜¯å½“å‰çº¿ç¨‹ï¼Œæ˜¯åˆ™é€’å¢ acquires ç›´æ¥è¿”å› true è¡¨ç¤ºæˆåŠŸåŠ é”ã€‚</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// çº¿ç¨‹åŠ é”åï¼Œå¯ä»¥ç»§ç»­åŠ é”ï¼Œæ˜¯æ•…å¯é‡å…¥é”</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">int</span> nextc <span class=\"token operator\">=</span> c <span class=\"token operator\">+</span> acquires<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextc <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Maximum lock count exceeded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>nextc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\">// è¯¥é”è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œè¿”å› falseï¼Œ åŠ é”å¤±è´¥ï¼Œæ‰§è¡Œ acquireQueued è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol>\n<li>è·å¾—é”çš„é€»è¾‘å¾ˆæ¸…æ™°ç®€å•ï¼Œè·å–çŠ¶æ€ï¼Œå½“ state == 0 æ—¶ï¼Œæ„å‘³ç€æ²¡æœ‰çº¿ç¨‹æŒæœ‰è¯¥é”ï¼Œå†åˆ¤æ–­é˜Ÿåˆ—æ²¡æœ‰å‰é©±å¹¶ä¸”ç”¨ CAS æ“ä½œæ›´æ–° stateï¼Œä½¿å…¶å¤§äº 0ï¼Œå¦‚æœæ›´æ–°æ“ä½œæˆåŠŸï¼Œå½“å‰çº¿ç¨‹è·å¾—é”ï¼Œåœ¨ setExclusiveOwnerThread æ–¹æ³•é‡Œå°† exclusiveOwnerThread æŒ‡å‘å½“å‰çº¿ç¨‹ã€‚(compare expectedValue with the state value in the memory, and set the state value only if they are equal, which is atomic operation. ç”±äº state &amp; exclusiveOwnerThread æ˜¯å…±äº«å˜é‡ï¼Œæ­¤ä»£ç å—æ˜¯ critical section (ä¸´ç•ŒåŒº)ï¼Œæ‰€ä»¥æ¯”è¾ƒå’Œæ›´æ–°å¿…é¡»æ˜¯åŸå­æ“ä½œï¼Œé˜²æ­¢çº¿ç¨‹ A æ¯”è¾ƒæ›´æ–°ä¸­é—´ï¼Œçº¿ç¨‹ B æ›´æ–° stateï¼Œå¯¼è‡´çº¿ç¨‹ AB åŒæ—¶è·å¾—é”)</li>\n<li>å¦‚æœ state &gt; 0, æ„å‘³ç€å·²ç»æœ‰çº¿ç¨‹æŒæœ‰è¯¥é”ï¼Œä½†ä¸å¿…ç°å¿ƒï¼Œä»£ç è¿›ä¸€æ­¥åˆ¤æ–­å½“å‰é”çš„æŒæœ‰è€…æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç´¯åŠ é”æ•°é‡ã€‚</li>\n<li>æˆ‘ä»¬é‡ç‚¹æ¥çœ‹åŠ é”å¤±è´¥ï¼ŒåŠ å…¥ç­‰å¾…é˜Ÿåˆ—çš„æƒ…å†µã€‚</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#addWaiter</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Creates and enqueues node for current thread and given mode.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    * @param mode Node.EXCLUSIVE for exclusive, Node.SHARED for shared</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    * @return the new node</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token class-name\">Node</span> <span class=\"token function\">addWaiter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span> mode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token class-name\">Node</span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">// Try the fast path of enq; backup to full enq on failure</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token class-name\">Node</span> pred <span class=\"token operator\">=</span> tail<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pred <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        node<span class=\"token punctuation\">.</span>prev <span class=\"token operator\">=</span> pred<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">compareAndSetTail</span><span class=\"token punctuation\">(</span>pred<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            pred<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token function\">enq</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å°†å½“å‰çº¿ç¨‹å’Œé”æ¨¡å¼  <code>exclusive</code>  å°è£…åœ¨  <code>Node</code>  é‡Œï¼ŒåŠ å…¥é˜Ÿåˆ—æœ«å°¾ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#acquireQueued</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Acquires in exclusive uninterruptible mode for thread already in</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * queue. Used by condition wait methods as well as acquire.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    * @param node the node</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    * @param arg the acquire argument</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    * @return &#123;@code true&#125; if interrupted while waiting</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">acquireQueued</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> node<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">boolean</span> failed <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">boolean</span> interrupted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> p <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span><span class=\"token function\">predecessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// ç­‰å¾…é˜Ÿåˆ—æœ‰å‰é©±ç­‰å¾…èŠ‚ç‚¹ï¼Œæ‰è¿›å…¥æ­¤æ–¹æ³•ï¼Œä½†æ­¤æ—¶å¯èƒ½å‰é©±èŠ‚ç‚¹å·²ç»ç§»é™¤ï¼Œ</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token comment\">// æ˜¯æ•…è¿™é‡Œåˆ¤æ–­ç­‰å¾…é˜Ÿåˆ—ä¸ºç©ºï¼Œé‡æ–°å°è¯•è·å–é”</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">==</span> head <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">tryAcquire</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token function\">setHead</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                p<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// help GC</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                failed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token keyword\">return</span> interrupted<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token comment\">// é‡ç‚¹åœ¨è¿™é‡Œ</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">shouldParkAfterFailedAcquire</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token function\">parkAndCheckInterrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                interrupted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>failed<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token function\">cancelAcquire</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å…ˆç®€ç•¥ç†è§£ä¸‹  <code>shouldParkAfterFailedAcquire</code> ï¼Œå¦‚æœå‰é©±èŠ‚ç‚¹</p>\n<ol>\n<li>æ˜¯ Signalï¼Œåˆ™è¿”å› trueï¼Œæ‰§è¡Œ parkAndCheckInterruptã€‚</li>\n<li>æ˜¯ Cancelï¼Œåˆ™ç§»é™¤ Cancel çš„ç­‰å¾…èŠ‚ç‚¹.</li>\n<li>å°†é Cancel çš„å‰é©±èŠ‚ç‚¹ï¼ŒçŠ¶æ€å‡çº§ä¸º Signalï¼Œä¸‹æ¬¡å¾ªç¯è¿›æ¥ï¼Œå°±æ˜¯ case 1.</li>\n</ol>\n<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®°ä½ï¼Œå½“å‰ç­‰å¾…çº¿ç¨‹çš„å‰é©±èŠ‚ç‚¹ï¼Œåˆ°æœ€åæ˜¯ Signal çŠ¶æ€ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#shouldParkAfterFailedAcquire</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Checks and updates status for a node that failed to acquire.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * Returns true if thread should block. This is the main signal</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    * control in all acquire loops.  Requires that pred == node.prev.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    * @param pred node's predecessor holding status</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    * @param node the node</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    * @return &#123;@code true&#125; if thread should block</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">shouldParkAfterFailedAcquire</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span> pred<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span> node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">int</span> ws <span class=\"token operator\">=</span> pred<span class=\"token punctuation\">.</span>waitStatus<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ws <span class=\"token operator\">==</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">.</span>SIGNAL<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            * This node has already set status asking a release</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            * to signal it, so it can safely park.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            */</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ws <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            * Predecessor was cancelled. Skip over predecessors and</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            * indicate retry.</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            */</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">do</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            node<span class=\"token punctuation\">.</span>prev <span class=\"token operator\">=</span> pred <span class=\"token operator\">=</span> pred<span class=\"token punctuation\">.</span>prev<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>pred<span class=\"token punctuation\">.</span>waitStatus <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        pred<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            * waitStatus must be 0 or PROPAGATE.  Indicate that we</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            * need a signal, but don't park yet.  Caller will need to</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            * retry to make sure it cannot acquire before parking.</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            */</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token function\">compareAndSetWaitStatus</span><span class=\"token punctuation\">(</span>pred<span class=\"token punctuation\">,</span> ws<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">.</span>SIGNAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹  <code>parkAndCheckInterrupt</code>  åˆ™å½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œå¼€å§‹è¿›å…¥ç­‰å¾…æ€ï¼ˆæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå°±è®¾ç½®ä¸€ä¸ªçŠ¶æ€æ ‡è®°ï¼Œå‘Šè¯‰çº¿ç¨‹è°ƒåº¦ç®—æ³•ä¸ç”¨æ‹¿æ­¤çº¿ç¨‹å‚ä¸è°ƒåº¦è®¡ç®—ï¼‰ï¼Œå¹¶æ£€æŸ¥ä¸­æ–­çŠ¶æ€ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#parkAndCheckInterrupt</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Convenience method to park and then check if interrupted</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    *</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    * @return &#123;@code true&#125; if interrupted</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">parkAndCheckInterrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">LockSupport</span><span class=\"token punctuation\">.</span><span class=\"token function\">park</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// è¿™è¡Œä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹è¿›å…¥ä¼‘çœ ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹è°ƒç”¨ unpark åï¼Œæ‰§è¡Œä¸‹ä¸€è¡Œçš„ retrun</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">interrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.LockSupport#park(java.lang.Object)</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Disables the current thread for thread scheduling purposes unless the</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * permit is available.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * &lt;p>If the permit is available then it is consumed and the call returns</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * immediately; otherwise</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * the current thread becomes disabled for thread scheduling</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> * purposes and lies dormant until one of three things happens:</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> * &lt;ul></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> * &lt;li>Some other thread invokes &#123;@link #unpark unpark&#125; with the</pre></td></tr><tr><td data-num=\"12\"></td><td><pre> * current thread as the target; or</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"14\"></td><td><pre> * &lt;li>Some other thread &#123;@linkplain Thread#interrupt interrupts&#125;</pre></td></tr><tr><td data-num=\"15\"></td><td><pre> * the current thread; or</pre></td></tr><tr><td data-num=\"16\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"17\"></td><td><pre> * &lt;li>The call spuriously (that is, for no reason) returns.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre> * &lt;/ul></pre></td></tr><tr><td data-num=\"19\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"20\"></td><td><pre> * &lt;p>This method does &lt;em>not&lt;/em> report which of these caused the</pre></td></tr><tr><td data-num=\"21\"></td><td><pre> * method to return. Callers should re-check the conditions which caused</pre></td></tr><tr><td data-num=\"22\"></td><td><pre> * the thread to park in the first place. Callers may also determine,</pre></td></tr><tr><td data-num=\"23\"></td><td><pre> * for example, the interrupt status of the thread upon return.</pre></td></tr><tr><td data-num=\"24\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"25\"></td><td><pre> * @param blocker the synchronization object responsible for this</pre></td></tr><tr><td data-num=\"26\"></td><td><pre> *        thread parking</pre></td></tr><tr><td data-num=\"27\"></td><td><pre> * @since 1.6</pre></td></tr><tr><td data-num=\"28\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">park</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> blocker<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token function\">setBlocker</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span> blocker<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    UNSAFE<span class=\"token punctuation\">.</span><span class=\"token function\">park</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token function\">setBlocker</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼ŒThread B çº¿ç¨‹åŠ é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œä¼‘çœ ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾é”ï¼Œé€šçŸ¥å”¤é†’ç­‰å¾…é˜Ÿåˆ—çš„çº¿ç¨‹ï¼Œé‡æ–°ç«äº‰è·å¾—é”ã€‚æˆ‘ä»¬å¼€å§‹çœ‹å…¶ä»–çº¿ç¨‹é‡Šæ”¾é”æµç¨‹ã€‚</p>\n<h1 id=\"thread-b-é‡Šæ”¾é”\"><a class=\"anchor\" href=\"#thread-b-é‡Šæ”¾é”\">#</a> Thread B é‡Šæ”¾é”</h1>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.ReentrantLock#unlock</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Attempts to release this lock.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * &lt;p>If the current thread is the holder of this lock then the hold</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * count is decremented.  If the hold count is now zero then the lock</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * is released.  If the current thread is not the holder of this</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * lock then &#123;@link IllegalMonitorStateException&#125; is thrown.</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @throws IllegalMonitorStateException if the current thread does not</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> *         hold this lock</pre></td></tr><tr><td data-num=\"11\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    sync<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#release</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Releases in exclusive mode.  Implemented by unblocking one or</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * more threads if &#123;@link #tryRelease&#125; returns true.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * This method can be used to implement method &#123;@link Lock#unlock&#125;.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * @param arg the release argument.  This value is conveyed to</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> *        &#123;@link #tryRelease&#125; but is otherwise uninterpreted and</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> *        can represent anything you like.</pre></td></tr><tr><td data-num=\"9\"></td><td><pre> * @return the value returned from &#123;@link #tryRelease&#125;</pre></td></tr><tr><td data-num=\"10\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tryRelease</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">Node</span> h <span class=\"token operator\">=</span> head<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>h <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> h<span class=\"token punctuation\">.</span>waitStatus <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token function\">unparkSuccessor</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å°è¯•é‡Šæ”¾é”ï¼Œç„¶å unpark é”ç­‰å¾…é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿å…¶è¿›å…¥ç­‰å¾…è°ƒåº¦çŠ¶æ€ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.ReentrantLock.Sync#tryRelease</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">protected</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryRelease</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> releases<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> <span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> releases<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token function\">getExclusiveOwnerThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalMonitorStateException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">boolean</span> free <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        free <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token function\">setExclusiveOwnerThread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">return</span> free<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.locks.AbstractQueuedSynchronizer#unparkSuccessor</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>* Wakes up node's successor, if one exists.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>*</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>* @param node the node</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>*/</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">unparkSuccessor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span> node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    * If status is negative (i.e., possibly needing signal) try</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    * to clear in anticipation of signalling.  It is OK if this</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    * fails or if status is changed by waiting thread.</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">int</span> ws <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>waitStatus<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ws <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token function\">compareAndSetWaitStatus</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> ws<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    * Thread to unpark is held in successor, which is normally</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    * just the next node.  But if cancelled or apparently null,</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    * traverse backwards from tail to find the actual</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    * non-cancelled successor.</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token class-name\">Node</span> s <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> s<span class=\"token punctuation\">.</span>waitStatus <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        s <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span> t <span class=\"token operator\">=</span> tail<span class=\"token punctuation\">;</span> t <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> t <span class=\"token operator\">!=</span> node<span class=\"token punctuation\">;</span> t <span class=\"token operator\">=</span> t<span class=\"token punctuation\">.</span>prev<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span>waitStatus <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        s <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token class-name\">LockSupport</span><span class=\"token punctuation\">.</span><span class=\"token function\">unpark</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>thread<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ä¼ å…¥ h æŒ‡å‘çš„æ˜¯å“¨å…µå¤´èŠ‚ç‚¹ï¼Œæ‰¾åˆ°é”ç­‰å¾…é˜Ÿåˆ—é‡Œç¬¬ä¸€ä¸ª  <code>waitStatus &lt;= 0</code>  å³ SIGNAL CONDITION PROPAGATE ä¸‰è€…ä¹‹ä¸€çš„èŠ‚ç‚¹ï¼Œå¹¶ unpark å”¤é†’èŠ‚ç‚¹é‡Œçš„çº¿ç¨‹ã€‚<br />\nå½“ä¸Šæ–‡ Thread B åŠ é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…é”é˜Ÿåˆ—çš„èŠ‚ç‚¹</p>\n<ol>\n<li>æ˜¯è¿™ä¸ªå¤´èŠ‚ç‚¹ï¼ŒåŠ é”çº¿ç¨‹è¢«å”¤é†’ï¼Œthread schedule åˆ†é…å®ƒè¿è¡Œåï¼Œå®ƒä» park ä¸­è¿”å›ï¼Œå¹¶æ£€æµ‹è®°å½• interruptedï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œæ­¤æ—¶å®ƒçš„å‰é©±å°±æ˜¯ head å“¨å…µèŠ‚ç‚¹ï¼Œå†æ¬¡æ‰§è¡Œ  <code>tryAcquire</code>  æµç¨‹ã€‚</li>\n<li>ä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆç­‰å¾…å‰é¢çš„èŠ‚ç‚¹éƒ½çº·çº·é€šè¿‡  <code>tryAcquire</code>  è·å¾—é”ï¼Œç„¶åé‡Šæ”¾é”åï¼Œæ–‡ä¸­ä¸Šä¸€ä¸ªåŠ é”çš„çº¿ç¨‹æ‰€åœ¨èŠ‚ç‚¹æœ€ç»ˆä¼šæˆä¸ºå¤´èŠ‚ç‚¹ã€‚</li>\n</ol>\n<p>è·å¾—é”æˆåŠŸåï¼Œè¿”å› interrupted ä¸­æ–­çŠ¶æ€ï¼Œå¦‚æœè¯¥çº¿ç¨‹æ˜¯ interrupted è€Œè¿›å…¥ç­‰å¾…æ€ï¼Œåˆ™è¿”å›åé‡ç½®è¿˜åŸ interrupted çŠ¶æ€ã€‚</p>\n<p>çº¿ç¨‹ä»ä¼‘çœ è¿›å…¥ç­‰å¾…æ€æœ‰ä¸‰ç§ cases è§  <code>java.util.concurrent.locks.LockSupport#park(java.lang.Object)</code> ï¼š</p>\n<ol>\n<li>Some other thread invokes unpark with the current thread as the target; or</li>\n<li>Some other thread interrupts the current thread; or</li>\n<li>The call spuriously (that is, for no reason) returns.</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a java.util.concurrent.locks.AbstractQueuedSynchronizer#acquireQueued</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Acquires in exclusive uninterruptible mode for thread already in</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * queue. Used by condition wait methods as well as acquire.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * @param node the node</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> * @param arg the acquire argument</pre></td></tr><tr><td data-num=\"7\"></td><td><pre> * @return &#123;@code true&#125; if interrupted while waiting</pre></td></tr><tr><td data-num=\"8\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">acquireQueued</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> node<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">boolean</span> failed <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">boolean</span> interrupted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token keyword\">final</span> <span class=\"token class-name\">Node</span> p <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span><span class=\"token function\">predecessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">==</span> head <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">tryAcquire</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                <span class=\"token function\">setHead</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                p<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// help GC</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                failed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token keyword\">return</span> interrupted<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">shouldParkAfterFailedAcquire</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token function\">parkAndCheckInterrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                interrupted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>failed<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token function\">cancelAcquire</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "Java"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/29/semaphore/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/29/semaphore/",
            "title": "Semaphore",
            "date_published": "2023-07-29T09:03:58.000Z",
            "content_html": "<p>è®¡æ•°æ–¹å¼å®ç°çš„æ——è¯­ï¼Œä¸€ä¸ªæ——è¯­ç»´æŠ¤ä¸€ç»„æ¦‚å¿µä¸Šçš„è®¸å¯ã€‚æ¯ä¸ªçº¿ç¨‹ acquire éƒ½ä¼šåœ¨å¿…è¦æ—¶é˜»å¡ï¼Œç›´åˆ°æœ‰è®¸å¯è¯å¯ç”¨ï¼Œç„¶åè·å–å®ƒï¼Œè®¸å¯æ•°é‡å‡ä¸€ã€‚æ¯æ¬¡é‡Šæ”¾éƒ½ä¼šå¢åŠ ä¸€ä¸ªè®¸å¯ï¼Œä»è€Œæœ‰å¯èƒ½é‡Šæ”¾é˜»å¡åœ¨ acquire çš„çº¿ç¨‹ã€‚ä¸è¿‡ï¼Œ Semaphore å¹¶ä¸ä½¿ç”¨å®é™…çš„è®¸å¯å¯¹è±¡ï¼›å®ƒåªæ˜¯å¯¹å¯ç”¨æ•°é‡è¿›è¡Œè®¡æ•°ï¼Œå¹¶é‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚</p>\n<p>å¦‚æ­¤ Semaphores é€šå¸¸ç”¨äºé™åˆ¶å¯ä»¥è®¿é—®æŸäº›ï¼ˆç‰©ç†æˆ–é€»è¾‘ï¼‰èµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ å¸Œæœ›åªæœ‰ permits ä¸ªçº¿ç¨‹å¯ä»¥å¹¶å‘è®¿é—®è¿™äº›èµ„æºæ˜¯ï¼Œé€šè¿‡ Semaphore (int permits, boolean fair) å®ä¾‹åŒ– permits ä¸ªè®¸å¯èµ„æºï¼Œçº¿ç¨‹ aquire è®¸å¯åï¼Œè·å–èµ„æºï¼Œå®Œæˆåï¼Œrelease é‡Šæ”¾è®¸å¯å›è®¸å¯æ± ã€‚</p>\n<blockquote>\n<p>A counting semaphore. Conceptually, a semaphore maintains a set of permits. Each acquire blocks if necessary until a permit is available, and then takes it. Each release adds a permit, potentially releasing a blocking acquirer. However, no actual permit objects are used; the Semaphore just keeps a count of the number available and acts accordingly.<br />\nSemaphores are often used to restrict the number of threads than can access some (physical or logical) resource.</p>\n</blockquote>\n<p>åœ¨ aquire &amp; release ä¹‹å‰ï¼Œæ²¡æœ‰åŒæ­¥é”è¢«æŒæœ‰ï¼Œ</p>\n<blockquote>\n<p>Note that no synchronization lock is held when acquire is called as that would prevent an item from being returned to the pool. The semaphore encapsulates the synchronization needed to restrict access to the pool, separately from any synchronization needed to maintain the consistency of the pool itself.</p>\n</blockquote>\n<p>ä¸ Lock çš„å®ç°ä¸åŒï¼Œ semaphore release permit çš„çº¿ç¨‹ï¼Œä¸éœ€è¦ä»¥ aquire è¯¥ permit ä¸ºå‰æã€‚</p>\n<blockquote>\n<p>A semaphore initialized to one, and which is used such that it only has at most one permit available, can serve as a mutual exclusion lock. This is more commonly known as a binary semaphore, because it only has two states: one permit available, or zero permits available. When used in this way, the binary semaphore has the property (unlike many java.util.concurrent.locks.Lock implementations), that the &quot;lock&quot; can be released by a thread other than the owner (as semaphores have no notion of ownership). This can be useful in some specialized contexts, such as deadlock recovery.</p>\n</blockquote>\n",
            "tags": [
                "semaphoreï¼Œjava å¹¶å‘ï¼Œä¿¡å·é‡"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/29/CountDownLatch/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/29/CountDownLatch/",
            "title": "CountDownLatch",
            "date_published": "2023-07-29T07:30:00.000Z",
            "content_html": "<h2 id=\"overview\"><a class=\"anchor\" href=\"#overview\">#</a> Overview</h2>\n<p>ä¸€ç§åŒæ­¥è¾…åŠ©å·¥å…·ï¼Œå…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„ä¸€ç»„æ“ä½œå®Œæˆã€‚</p>\n<blockquote>\n<p>A synchronization aid that allows one or more threads to wait until a set of operations being performed in other threads completes.</p>\n</blockquote>\n<p>CountDownLatch ä»¥ç»™å®šçš„è®¡æ•°åˆå§‹åŒ–ã€‚await æ–¹æ³•ä¼šé˜»å¡ï¼Œç›´åˆ°å½“å‰è®¡æ•°å› è°ƒç”¨ CountDown æ–¹æ³•è€Œå½’é›¶ï¼Œä¹‹åæ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹éƒ½ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶ä¸” await çš„ä»»ä½•åç»­è°ƒç”¨éƒ½ä¼šç«‹å³è¿”å›ã€‚è¿™æ˜¯ä¸€ç§ä¸€æ¬¡æ€§ç°è±¡ -- è®¡æ•°æ— æ³•é‡ç½®ã€‚å¦‚æœéœ€è¦é‡ç½®è®¡æ•°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ CyclicBarrierã€‚</p>\n<blockquote>\n<p>A CountDownLatch is initialized with a given count. The await methods block until the current count reaches zero due to invocations of the countDown method, after which all waiting threads are released and any subsequent invocations of await return immediately. This is a one-shot phenomenon -- the count cannot be reset. If you need a version that resets the count, consider using a CyclicBarrier.<br />\nCountDownLatch æ˜¯ä¸€ç§å¤šåŠŸèƒ½åŒæ­¥å·¥å…·ï¼Œå¯ç”¨äºå¤šç§ç”¨é€”ã€‚åˆå§‹åŒ–è®¡æ•°ä¸º 1 çš„ CountDownLatch å¯ç”¨ä½œç®€å•çš„å¼€ / å…³é”å­˜å™¨æˆ–é—¨ï¼šæ‰€æœ‰è°ƒç”¨ await çš„çº¿ç¨‹éƒ½åœ¨é—¨ä¸Šç­‰å¾…ï¼Œç›´åˆ°è°ƒç”¨ countDown çš„çº¿ç¨‹æ‰“å¼€å®ƒã€‚åˆå§‹åŒ–ä¸º N çš„ CountDownLatch å¯ç”¨äºè®©ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ° N ä¸ªçº¿ç¨‹å®ŒæˆæŸä¸ªæ“ä½œï¼Œæˆ–æŸä¸ªæ“ä½œå®Œæˆ N æ¬¡ã€‚<br />\nA CountDownLatch is a versatile synchronization tool and can be used for a number of purposes. A CountDownLatch initialized with a count of one serves as a simple on/off latch, or gate: all threads invoking await wait at the gate until it is opened by a thread invoking countDown. A CountDownLatch initialized to N can be used to make one thread wait until N threads have completed some action, or some action has been completed N times.<br />\nCountDownLatch çš„ä¸€ä¸ªæœ‰ç”¨ç‰¹æ€§æ˜¯ï¼Œå®ƒå¹¶ä¸è¦æ±‚è°ƒç”¨ countDown çš„çº¿ç¨‹åœ¨ç»§ç»­æ‰§è¡Œä¹‹å‰éœ€è¦ç­‰å¾…è®¡æ•°å½’é›¶ï¼Œä¹Ÿå°±æ˜¯å®ƒè°ƒç”¨ countDown ä¹‹åï¼Œå¯ä»¥ç»§ç»­ä¸€è·¯é«˜æ­ŒçŒ›è¿›ï¼Œå®ƒåªæ˜¯é˜»æ­¢å…¶ä»–è°ƒç”¨ await çš„ä»»ä½•çº¿ç¨‹è¶Šè¿‡ await ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰ await çš„çº¿ç¨‹éƒ½èƒ½é€šè¿‡ä¸ºæ­¢ï¼ˆå³ countDown ä¸º 0ï¼‰ã€‚<br />\nA useful property of a CountDownLatch is that it doesn't require that threads calling countDown wait for the count to reach zero before proceeding, it simply prevents any thread from proceeding past an await until all threads could pass.</p>\n</blockquote>\n<p>Sample usage: Here is a pair of classes in which a group of worker threads use two countdown latches:<br />\nThe first is a start signal that prevents any worker from proceeding until the driver is ready for them to proceed;<br />\nThe second is a completion signal that allows the driver to wait until all workers have completed.</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Driver</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     <span class=\"token class-name\">CountDownLatch</span> startSignal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     <span class=\"token class-name\">CountDownLatch</span> doneSignal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token class-name\">N</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token comment\">// create and start threads</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span>startSignal<span class=\"token punctuation\">,</span> doneSignal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     <span class=\"token function\">doSomethingElse1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">// don't let run yet</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     startSignal<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// let all threads proceed</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     <span class=\"token function\">doSomethingElse2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     doneSignal<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// wait for all to finish</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Worker</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> startSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> doneSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>   <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CountDownLatch</span> startSignal<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CountDownLatch</span> doneSignal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>     <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>startSignal <span class=\"token operator\">=</span> startSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>     <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>doneSignal <span class=\"token operator\">=</span> doneSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>     <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>       startSignal<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>       <span class=\"token function\">doWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>       doneSignal<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>     <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// return;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>   <span class=\"token keyword\">void</span> <span class=\"token function\">doWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://s3.uuu.ovh/imgs/2023/07/30/47ebfd56d12f728c.png\" alt=\"\" /><br />\nWorkerThread åˆå§‹åŒ–å¯åŠ¨åï¼Œ åœ¨  <code>startSignal.await();</code>  é›†ç»“ç­‰å¾…ï¼Œdriver åœ¨ doSomethingElse1 åï¼Œ startSignal.countDown (); é‡Šæ”¾é—¨é—©ï¼Œæ‰€æœ‰ç­‰å¾…çº¿ç¨‹ä»ç­‰å¾…æ€ï¼Œè¿›å…¥å°±ç»ªæ€ï¼Œçº·çº·æ‰§è¡Œ doWork () ä¸æ­¤åŒæ—¶ï¼Œ Driver æ‰§è¡Œ doneSignal.await () ç­‰æ‰€æœ‰ WorkerThread å®Œæˆå·¥ä½œï¼Œéƒ½æ‰§è¡Œ doneSignal.countDown ();<br />\n å¾…è®¡æ•°å™¨å½’é›¶ï¼ŒDriver çº¿ç¨‹ä» await ä¸­è¿”å›ï¼Œä»ç­‰å¾…æ€è¿›å…¥å°±ç»ªæ€ï¼Œ</p>\n<blockquote>\n<p>Another typical usage would be to divide a problem into N parts, describe each part with a Runnable that executes that portion and counts down on the latch, and queue all the Runnables to an Executor. When all sub-parts are complete, the coordinating thread will be able to pass through await. (When threads must repeatedly count down in this way, instead use a CyclicBarrier.)</p>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Driver2</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// ...</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     <span class=\"token class-name\">CountDownLatch</span> doneSignal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">N</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     <span class=\"token class-name\">Executor</span> e <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token class-name\">N</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token comment\">// create and start threads</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>       e<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">WorkerRunnable</span><span class=\"token punctuation\">(</span>doneSignal<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     doneSignal<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// wait for all to finish</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WorkerRunnable</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">CountDownLatch</span> doneSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>   <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>   <span class=\"token class-name\">WorkerRunnable</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CountDownLatch</span> doneSignal<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>doneSignal <span class=\"token operator\">=</span> doneSignal<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>     <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>i <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>     <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>       <span class=\"token function\">doWork</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>       doneSignal<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>     <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// return;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>   <span class=\"token keyword\">void</span> <span class=\"token function\">doWork</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>Memory consistency effects: Until the count reaches zero, actions in a thread prior to calling countDown() happen-before actions following a successful return from a corresponding await() in another thread.</p>\n</blockquote>\n",
            "tags": [
                "Java",
                "CountDownLatch, å¹¶å‘ï¼Œå¤šçº¿ç¨‹"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/27/thread-pool/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/27/thread-pool/",
            "title": "çº¿ç¨‹æ± ",
            "date_published": "2023-07-27T15:10:17.000Z",
            "content_html": "<p>æœ¬æ–‡çš„ç›®çš„ä¸ºæŒæ¡çº¿ç¨‹æ± çš„æ­£ç¡®ä½¿ç”¨ã€‚å¦‚æœè‹±è¯­æ°´å¹³ä¸é”™ï¼Œä»…ä»…çœ‹ç±»æ³¨é‡Šï¼ŒåŠä¸ªå°æ—¶å°±å¯ä»¥åˆæ­¥æŒæ¡å¦‚ä½•æ­£ç¡®ä½¿ç”¨äº†ï¼Œä½†å¦‚æœè¯»æ‡‚æºç ç›¸å…³çš„å®ç°ï¼Œåˆ™ä¸ä»…å¯ä»¥è¾…åŠ©åŠ æ·±å¯¹æ³¨é‡Šæè¿°çš„ç†è§£ï¼Œä¹Ÿå¯ä»¥å­¦ä¹ å¥½çš„ä»£ç è®¾è®¡å’Œå®ç°ã€‚</p>\n<h1 id=\"overview\"><a class=\"anchor\" href=\"#overview\">#</a> Overview</h1>\n<p>An ExecutorService that executes each submitted task using one of possibly several pooled threads, normally configured using Executors factory methods.</p>\n<h2 id=\"core-and-maximum-pool-sizes\"><a class=\"anchor\" href=\"#core-and-maximum-pool-sizes\">#</a> Core and maximum pool sizes</h2>\n<ol>\n<li>åœ¨æ–¹æ³•  <code>execute(Runnable)</code>  ä¸­æäº¤æ–°ä»»åŠ¡æ—¶ï¼Œå¦‚æœæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å°‘äº  <code>corePoolSize</code> ï¼Œå³ä½¿å…¶ä»–å·¥ä½œçº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚</li>\n<li>çº¿ç¨‹æ•°è¾¾åˆ° <code>corePoolSize</code>  åï¼Œæ–°æ¥çš„ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—ï¼Œç­‰å¾… core çº¿ç¨‹å¤„ç†ã€‚</li>\n<li>å½“é˜Ÿåˆ—æ»¡äº†ä»¥åï¼Œåˆæœ‰æ–°ä»»åŠ¡æäº¤ï¼Œåœ¨ <code>corePoolSize</code>  å¤–ï¼Œç»§ç»­åˆ›å»ºæ–°çº¿ç¨‹ã€‚</li>\n<li>å½“é˜Ÿåˆ—æ»¡ &amp; çº¿ç¨‹æ•°è¾¾åˆ°  <code>maximumPoolSize</code> ï¼Œæäº¤çš„æ–°ä»»åŠ¡èµ° Rejected tasks æµç¨‹ã€‚</li>\n</ol>\n<p>æ–‡å­—æè¿°æˆ–è®¸å¹²æ¯éš¾è®°ï¼Œå½“é˜…è¯»æºç åï¼Œå›æ¥æ€»ç»“è¿™äº›è§„åˆ™æ—¶ï¼Œè‡ªå·±åº”è¯¥ä¾æ®è¿™äº›è§„åˆ™ï¼Œå°±ç”Ÿäº§è€…çº¿ç¨‹ï¼ˆclientï¼‰å¾€çº¿ç¨‹æ± æäº¤ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± å¦‚ä½•åˆ†é…ä»»åŠ¡ç»™ core threadï¼Œä»»åŠ¡é˜Ÿåˆ—ï¼Œmaximum threadï¼Œåœ¨è„‘æµ·é‡Œæ„å»ºä¸€å¼ åŠ¨æ€åºåˆ—å›¾ã€‚è¿™æ ·å¯ä»¥æ›´å¥½çš„å¸®åŠ©ç†è§£å’Œè®°å¿†ã€‚</p>\n<blockquote>\n<p>On-demand construction<br />\nBy default, even core threads are initially created and started only when new tasks arrive, but this can be overridden dynamically using method  <code>prestartCoreThread</code>  or  <code>prestartAllCoreThreads</code> . You probably want to prestart threads if you construct the pool with a non-empty queue.</p>\n</blockquote>\n<h2 id=\"keep-alive-times\"><a class=\"anchor\" href=\"#keep-alive-times\">#</a> Keep-alive times</h2>\n<p>è¶…è¿‡ <code>corePoolSize</code>  çš„çº¿ç¨‹ï¼Œå½“ä»–ä»¬ç©ºé—²æ—¶é•¿è¶…è¿‡  <code>getKeepAliveTime(TimeUnit)</code> ï¼Œä¼š terminateã€‚é€šè¿‡ <code> allowCoreThreadTimeOut(boolean)</code>  å¯ä»¥è®¾ç½®è¿™ä¸ªè¶…æ—¶ç­–ç•¥é€‚ç”¨äº core çº¿ç¨‹ã€‚</p>\n<h2 id=\"queuing\"><a class=\"anchor\" href=\"#queuing\">#</a> Queuing</h2>\n<ol>\n<li>Direct handoffsï¼šéœ€è¦æ— è¾¹ç•Œçš„  <code>maximumPoolSizes</code> ï¼Œé¿å…æ²¡æœ‰çº¿ç¨‹ï¼Œå¯¼è‡´æ–°æäº¤çš„ä»»åŠ¡è¢«æ‹’ç»ã€‚</li>\n</ol>\n<blockquote>\n<p>Direct handoffs. A good default choice for a work queue is a SynchronousQueue that hands off tasks to threads without otherwise holding them. Here, an attempt to queue a task will fail if no threads are immediately available to run it, so a new thread will be constructed. This policy avoids lockups when handling sets of requests that might have internal dependencies. Direct handoffs generally require unbounded maximumPoolSizes to avoid rejection of new submitted tasks. This in turn admits the possibility of unbounded thread growth when commands continue to arrive on average faster than they can be processed.</p>\n</blockquote>\n<ol start=\"2\">\n<li>Unbounded queues:  <code>LinkedBlockingQueue</code>  æ²¡æœ‰å®¹é‡é™åˆ¶ï¼Œ <code>maximumPoolSize</code>  ä¸ä¼šç”Ÿæ•ˆï¼Œé€‚ç”¨äºä»»åŠ¡å½¼æ­¤ç‹¬ç«‹ã€‚</li>\n</ol>\n<blockquote>\n<p>Unbounded queues. Using an unbounded queue (for example a LinkedBlockingQueue without a predefined capacity) will cause new tasks to wait in the queue when all corePoolSize threads are busy. Thus, no more than corePoolSize threads will ever be created. (And the value of the maximumPoolSize therefore doesn't have any effect.) This may be appropriate when each task is completely independent of others, so tasks cannot affect each others execution; for example, in a web page server. While this style of queuing can be useful in smoothing out transient bursts of requests, it admits the possibility of unbounded work queue growth when commands continue to arrive on average faster than they can be processed.</p>\n</blockquote>\n<ol start=\"3\">\n<li>Bounded queuesï¼š  <code> ArrayBlockingQueue</code>   æ˜¯å‰ä¸¤ç§ç­–ç•¥çš„æŠ˜è¡·ï¼Œé˜Ÿåˆ—å¤§å°å’Œæœ€å¤§çº¿ç¨‹æ•°å¤§å°å½¼æ­¤æŠ˜è¡·ã€‚</li>\n</ol>\n<blockquote>\n<p>Queue sizes and maximum pool sizes may be traded off for each other: Using large queues and small pools minimizes CPU usage, OS resources, and context-switching overhead, but can lead to artificially low throughput. If tasks frequently block (for example if they are I/O bound), a system may be able to schedule time for more threads than you otherwise allow. Use of small queues generally requires larger pool sizes, which keeps CPUs busier but may encounter unacceptable scheduling overhead, which also decreases throughput.</p>\n</blockquote>\n<h1 id=\"source-code\"><a class=\"anchor\" href=\"#source-code\">#</a> Source code</h1>\n<ol>\n<li>ä¸è¦é€šç¯‡é¡ºåºé˜…è¯»ï¼Œéœ€è¦åˆ†å±‚ï¼Œè·³è¿‡å¹²æ‰°æ¬¡è¦ä»£ç ï¼Œé‡ç‚¹é˜…è¯»æƒ³è¦æ‡‚çš„é€»è¾‘éƒ¨åˆ†ã€‚ç”±äºæˆ‘ä»¬ç°åœ¨æ˜¯è¦è¯»æ‡‚çº¿ç¨‹æ± æ˜¯å¦‚ä½•ç®¡ç†çº¿ç¨‹å’Œä»»åŠ¡çš„ï¼Œæ‰€ä»¥ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€ç­‰ä»£ç éƒ½ä¸å¿…æ·±å…¥ç†è§£ã€‚</li>\n</ol>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor#execute</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> command<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>command <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NullPointerException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * Proceed in 3 steps:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * 1. If fewer than corePoolSize threads are running, try to</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * start a new thread with the given command as its first</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     * task.  The call to addWorker atomically checks runState and</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     * workerCount, and so prevents false alarms that would add</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     * threads when it shouldn't, by returning false.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>     * 2. If a task can be successfully queued, then we still need</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>     * to double-check whether we should have added a thread</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>     * (because existing ones died since last checking) or that</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>     * the pool shut down since entry into this method. So we</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     * recheck state and if necessary roll back the enqueuing if</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>     * stopped, or start a new thread if there are none.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>     * 3. If we cannot queue task, then we try to add a new</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>     * thread.  If it fails, we know we are shut down or saturated</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>     * and so reject the task.</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\">//case 1: çº¿ç¨‹æ•°å°‘äº corePoolSizeï¼Œæ–°å»º core çº¿ç¨‹</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">workerCountOf</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> corePoolSize<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">addWorker</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        c <span class=\"token operator\">=</span> ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token comment\">//case 2: çº¿ç¨‹æ•°å·²ç»åˆ°è¾¾ corePoolSizeï¼ŒåŠ å…¥é˜Ÿåˆ—å¤„ç†</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isRunning</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> workQueue<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">int</span> recheck <span class=\"token operator\">=</span> ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> <span class=\"token function\">isRunning</span><span class=\"token punctuation\">(</span>recheck<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">workerCountOf</span><span class=\"token punctuation\">(</span>recheck<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token function\">addWorker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token comment\">//case 3: é˜Ÿåˆ—æ»¡äº†ï¼ŒåŠ å…¥æ–°ä»»åŠ¡å¤±è´¥ï¼Œæ–°å»º (core, maximum] åŒºé—´çš„çº¿ç¨‹æ¥å¤„ç†</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">addWorker</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"case-1-addworkercommand-true\"><a class=\"anchor\" href=\"#case-1-addworkercommand-true\">#</a> Case 1:  addWorker(command, true)</h1>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor#addWorker</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">addWorker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> firstTask<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> core<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// çŠ¶æ€åˆ¤æ–­ï¼Œå¤§æ¦‚ç†è§£å³å¯ï¼Œå¹¶éé‡ç‚¹ begin</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    retry<span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">int</span> c <span class=\"token operator\">=</span> ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token keyword\">int</span> rs <span class=\"token operator\">=</span> <span class=\"token function\">runStateOf</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">// Check if queue empty only if necessary.</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rs <span class=\"token operator\">>=</span> SHUTDOWN <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token operator\">!</span> <span class=\"token punctuation\">(</span>rs <span class=\"token operator\">==</span> SHUTDOWN <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                firstTask <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                <span class=\"token operator\">!</span> workQueue<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">int</span> wc <span class=\"token operator\">=</span> <span class=\"token function\">workerCountOf</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wc <span class=\"token operator\">>=</span> CAPACITY <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                wc <span class=\"token operator\">>=</span> <span class=\"token punctuation\">(</span>core <span class=\"token operator\">?</span> corePoolSize <span class=\"token operator\">:</span> maximumPoolSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">compareAndIncrementWorkerCount</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token keyword\">break</span> retry<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            c <span class=\"token operator\">=</span> ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Re-read ctl</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">runStateOf</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> rs<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token keyword\">continue</span> retry<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token comment\">// else CAS failed due to workerCount change; retry inner loop</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">// çŠ¶æ€åˆ¤æ–­ï¼Œå¤§æ¦‚ç†è§£å³å¯ï¼Œå¹¶éé‡ç‚¹ end</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">boolean</span> workerStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">boolean</span> workerAdded <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token class-name\">Worker</span> w <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// æ–°å»ºä¸€ä¸ª worker threadï¼Œå¹¶å°†ç¬¬ä¸€ä¸ª task ä¼ å…¥</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        w <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span>firstTask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> w<span class=\"token punctuation\">.</span>thread<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReentrantLock</span> mainLock <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mainLock<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            mainLock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token comment\">// Recheck while holding lock.</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                <span class=\"token comment\">// Back out on ThreadFactory failure or if</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>                <span class=\"token comment\">// shut down before lock acquired.</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>                <span class=\"token keyword\">int</span> rs <span class=\"token operator\">=</span> <span class=\"token function\">runStateOf</span><span class=\"token punctuation\">(</span>ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>rs <span class=\"token operator\">&lt;</span> SHUTDOWN <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                    <span class=\"token punctuation\">(</span>rs <span class=\"token operator\">==</span> SHUTDOWN <span class=\"token operator\">&amp;&amp;</span> firstTask <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">isAlive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// precheck that t is startable</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>                        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalThreadStateException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                    <span class=\"token comment\">// å°† worker åŠ å…¥ worker åˆ—è¡¨ï¼Œä»–ä»¬å¾ªç¯ä»ä»»åŠ¡é˜Ÿåˆ—å–ä»»åŠ¡æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                    workers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                    <span class=\"token keyword\">int</span> s <span class=\"token operator\">=</span> workers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s <span class=\"token operator\">></span> largestPoolSize<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                        largestPoolSize <span class=\"token operator\">=</span> s<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                    workerAdded <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>                mainLock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>workerAdded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>            <span class=\"token comment\">// å¯åŠ¨ worker threadï¼Œå¼€å§‹å¾ªç¯è·å–ï¼Œæ‰§è¡Œä»»åŠ¡</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>                t<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>                workerStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span> workerStarted<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token function\">addWorkerFailed</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">return</span> workerStarted<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"new-worker\"><a class=\"anchor\" href=\"#new-worker\">#</a> new Worker</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a java.util.concurrent.ThreadPoolExecutor.Worker#Worker</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    * Creates with given first task and thread from ThreadFactory.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    * @param firstTask the first task (null if none)</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> firstTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// inhibit interrupts until runWorker</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstTask <span class=\"token operator\">=</span> firstTask<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>thread <span class=\"token operator\">=</span> <span class=\"token function\">getThreadFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">newThread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>åˆå§‹åŒ– Worker å®ä¾‹ï¼Œå…¶ä¸­å®ä¾‹åŒ–  <code>firstTask</code>  &amp;  <code>thread</code>  æˆå‘˜å˜é‡ã€‚Worker å®ç°  <code>Runnable</code>  interfaceï¼Œåœ¨åˆå§‹åŒ– thread æ—¶ï¼Œä½œä¸ºæ„é€ å™¨å‚æ•°ä¼ å…¥ï¼Œä½œä¸º Thread.target çš„å€¼ã€‚Worker ç»§æ‰¿  <code>AbstractQueuedSynchronizer</code> ï¼Œè¿™æ˜¯ Java å¹¶å‘åŒ…çš„æ ¸å¿ƒç±»ï¼Œä½¿ç”¨ CAS æ“ä½œå®ç°é”ï¼Œå°†æ”¾åœ¨å…¶ä»–åšæ–‡å±•å¼€åˆ†æã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor#ThreadPoolExecutor(int, int, long, TimeUnit, BlockingQueue<Runnable>)</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> corePoolSize<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                            <span class=\"token keyword\">int</span> maximumPoolSize<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                            <span class=\"token keyword\">long</span> keepAliveTime<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                            <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                            <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Runnable</span><span class=\"token punctuation\">></span></span> workQueue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span>corePoolSize<span class=\"token punctuation\">,</span> maximumPoolSize<span class=\"token punctuation\">,</span> keepAliveTime<span class=\"token punctuation\">,</span> unit<span class=\"token punctuation\">,</span> workQueue<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>            <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">defaultThreadFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> defaultHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ThreadPool é»˜è®¤çš„ ThreadFactory æ˜¯ Executors.defaultThreadFactory ()ï¼Œçœ‹ä¸‹å…¶ newThread ä»£ç ï¼Œä¾¿çŸ¥ worker å®ä¾‹æ˜¯ Thread çš„ target äº†ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.Executors.DefaultThreadFactory#DefaultThreadFactory</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token class-name\">Thread</span> <span class=\"token function\">newThread</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> r<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span>group<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                            namePrefix <span class=\"token operator\">+</span> threadNumber<span class=\"token punctuation\">.</span><span class=\"token function\">getAndIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>                            <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">isDaemon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        t<span class=\"token punctuation\">.</span><span class=\"token function\">setDaemon</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">.</span><span class=\"token function\">getPriority</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span>NORM_PRIORITY<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        t<span class=\"token punctuation\">.</span><span class=\"token function\">setPriority</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span>NORM_PRIORITY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> t<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>å½“ Thread start åï¼ŒThread.run ä¼šæ‰§è¡Œï¼Œtarget.run ä¹Ÿå°±æ˜¯ Worker.run ä¼šè¢«è°ƒç”¨ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.lang.Thread#Thread(java.lang.ThreadGroup, java.lang.Runnable, java.lang.String, long)</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadGroup</span> g<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Runnable</span> target<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>                    <span class=\"token keyword\">long</span> stackSize<span class=\"token punctuation\">,</span> <span class=\"token class-name\">AccessControlContext</span> acc<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                    <span class=\"token keyword\">boolean</span> inheritThreadLocals<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// ignore irrelevant codes</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// ignore irrelevant codes</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>target <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        target<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"workersadd\"><a class=\"anchor\" href=\"#workersadd\">#</a> workers.add</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor#workers</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * Set containing all worker threads in pool. Accessed only when</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * holding mainLock.</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Worker</span><span class=\"token punctuation\">></span></span> workers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashSet</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Worker</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"tstart\"><a class=\"anchor\" href=\"#tstart\">#</a> t.start</h2>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor.Worker#run</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/** Delegates main run loop to outer runWorker  */</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">runWorker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>java.util.concurrent.ThreadPoolExecutor#runWorker</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">final</span> <span class=\"token keyword\">void</span> <span class=\"token function\">runWorker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Worker</span> w<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">Thread</span> wt <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">Runnable</span> task <span class=\"token operator\">=</span> w<span class=\"token punctuation\">.</span>firstTask<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    w<span class=\"token punctuation\">.</span>firstTask <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    w<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// allow interrupts</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">boolean</span> completedAbruptly <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token comment\">// åˆå§‹åŒ–æ—¶çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å…ˆæ‰§è¡Œï¼Œåç»­éƒ½ä»ä»»åŠ¡é˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œ</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>task <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>task <span class=\"token operator\">=</span> <span class=\"token function\">getTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            w<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token comment\">// If pool is stopping, ensure thread is interrupted;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token comment\">// if not, ensure thread is not interrupted.  This</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token comment\">// requires a recheck in second case to deal with</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token comment\">// shutdownNow race while clearing interrupt</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">runStateAtLeast</span><span class=\"token punctuation\">(</span>ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> STOP<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                    <span class=\"token punctuation\">(</span><span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">interrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>                    <span class=\"token function\">runStateAtLeast</span><span class=\"token punctuation\">(</span>ctl<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> STOP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token operator\">!</span>wt<span class=\"token punctuation\">.</span><span class=\"token function\">isInterrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                wt<span class=\"token punctuation\">.</span><span class=\"token function\">interrupt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token function\">beforeExecute</span><span class=\"token punctuation\">(</span>wt<span class=\"token punctuation\">,</span> task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                <span class=\"token class-name\">Throwable</span> thrown <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                    task<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                    thrown <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span> <span class=\"token keyword\">throw</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Error</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                    thrown <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span> <span class=\"token keyword\">throw</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>                    thrown <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                    <span class=\"token function\">afterExecute</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">,</span> thrown<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                task <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                w<span class=\"token punctuation\">.</span>completedTasks<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>                w<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        completedAbruptly <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token function\">processWorkerExit</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> completedAbruptly<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"case-2-workqueueoffercommand\"><a class=\"anchor\" href=\"#case-2-workqueueoffercommand\">#</a> Case 2: workQueue.offer(command)</h1>\n<p>å°†ä»»åŠ¡å¡å…¥é˜Ÿåˆ—ï¼Œå¾…çº¿ç¨‹æ± çš„çº¿ç¨‹è½®è¯¢è·å–ä»»åŠ¡æ‰§è¡Œã€‚é˜Ÿåˆ—æœ‰å¤šç§å®ç°ï¼Œä¸»è¦åŒºåˆ† Array &amp; Link</p>\n<ol>\n<li>ArrayBlockingQueue æœ‰å›ºå®šè¾¹ç•Œï¼Œå½“ä»»åŠ¡åŠ æ»¡åï¼ŒworkQueue.offer (command) ä¼šè¿”å› falseï¼Œè¿›å…¥çº¿ç¨‹ (core, maximum] æ‰©å¼ æµç¨‹ã€‚</li>\n<li>LinkedBlockingQueue é»˜è®¤æ²¡æœ‰è¾¹ç•Œï¼Œæ‰€ä»¥ workQueue.offer (command) ä¸€èˆ¬è¿”å› trueï¼Œå³ä»»åŠ¡æˆåŠŸåŠ å…¥é˜Ÿåˆ—ã€‚é™¤éåˆå§‹åŒ–æ—¶ï¼Œè®¾ç½® capacityã€‚</li>\n</ol>\n<h1 id=\"case-3-addworkercommand-false\"><a class=\"anchor\" href=\"#case-3-addworkercommand-false\">#</a> Case 3: addWorker(command, false)</h1>\n<p>ä¸ addWorker (command, true) ç±»ä¼¼ï¼Œå½“çº¿ç¨‹æ•°æ²¡åˆ°è¾¾ maximum æ—¶ï¼Œåˆ›å»ºæ–°çº¿ç¨‹ï¼Œè¿”å› trueï¼Œå¦åˆ™ä¸åˆ›å»ºæ–°çº¿ç¨‹ï¼Œè¿”å› falseï¼Œå½“å‰ä»»åŠ¡äº¤ç”±  <code>RejectedExecutionHandler</code>  å¤„ç†ï¼Œè¿›å…¥ reject æµç¨‹ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"><span>a java.util.concurrent.ThreadPoolExecutor#addWorker</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">addWorker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> firstTask<span class=\"token punctuation\">,</span> <span class=\"token keyword\">boolean</span> core<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">int</span> wc <span class=\"token operator\">=</span> <span class=\"token function\">workerCountOf</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wc <span class=\"token operator\">>=</span> CAPACITY <span class=\"token operator\">||</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        wc <span class=\"token operator\">>=</span> <span class=\"token punctuation\">(</span>core <span class=\"token operator\">?</span> corePoolSize <span class=\"token operator\">:</span> maximumPoolSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": [
                "Java",
                "Thread Poolï¼Œçº¿ç¨‹æ± "
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/07/08/Representing-and-Manipulating-Information/",
            "url": "https://limxtop1989.github.io/limxtop/2023/07/08/Representing-and-Manipulating-Information/",
            "title": "æ•°å­—åœ¨è®¡ç®—æœºçš„è¡¨ç¤ºå’Œæ“ä½œ",
            "date_published": "2023-07-08T06:51:22.000Z",
            "content_html": "<h1 id=\"integer-representations\"><a class=\"anchor\" href=\"#integer-representations\">#</a> Integer Representations</h1>\n<p>åœ¨å­¦æ ¡æ•™ç§‘ä¹¦å‘Šè¯‰æˆ‘ä»¬åŸç ï¼Œåç ï¼Œè¡¥ç çš„è§„åˆ™æ¥è®¡ç®—æ­£è´Ÿæ•°åœ¨è®¡ç®—æœºçš„è¡¨ç¤ºã€‚</p>\n<blockquote>\n<p>åŸç ï¼šå°†ä¸€ä¸ªæ•´æ•°ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œå°±æ˜¯å…¶åŸç ã€‚<br />\nå¦‚å•å­—èŠ‚çš„ 5 çš„åŸç ä¸ºï¼š0000 0101ï¼›-5 çš„åŸç ä¸º 1000 0101ã€‚<br />\nåç ï¼šæ­£æ•°çš„åç å°±æ˜¯å…¶åŸç ï¼›è´Ÿæ•°çš„åç æ˜¯å°†åŸç ä¸­ï¼Œé™¤ç¬¦å·ä½ä»¥å¤–ï¼Œæ¯ä¸€ä½å–åã€‚<br />\nå¦‚å•å­—èŠ‚çš„ 5 çš„åç ä¸ºï¼š0000 0101ï¼›-5 çš„åç ä¸º 1111 1010ã€‚<br />\nè¡¥ç ï¼šæ­£æ•°çš„è¡¥ç å°±æ˜¯å…¶åŸç ï¼›è´Ÿæ•°çš„åç  + 1 å°±æ˜¯è¡¥ç ã€‚<br />\nå¦‚å•å­—èŠ‚çš„ 5 çš„è¡¥ç ä¸ºï¼š0000 0101ï¼›-5 çš„è¡¥ç ä¸º 1111 1011ã€‚<br />\nåœ¨è®¡ç®—æœºä¸­ï¼Œæ­£æ•°æ˜¯ç›´æ¥ç”¨åŸç è¡¨ç¤ºçš„ï¼Œå¦‚å•å­—èŠ‚ 5ï¼Œåœ¨è®¡ç®—æœºä¸­å°±è¡¨ç¤ºä¸ºï¼š0000 0101ã€‚<br />\nè´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºï¼Œå¦‚å•å­—èŠ‚ - 5ï¼Œåœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºä¸º 1111 1011ã€‚</p>\n</blockquote>\n<p>è§„åˆ™ä¸ä»…å¤æ‚æŠ½è±¡ä¸è¯´ï¼Œä¹Ÿæ— åŠ©äºæˆ‘ä»¬ç†è§£æ— ç¬¦å·å’Œæœ‰ç¬¦å·çš„è½¬æ¢ï¼Œæ— ç¬¦å·ä¸æœ‰ç¬¦å·çš„æ‰©å±•ã€‚å½“æˆ‘é˜…è¯» CSAPP Chapter 2 Representing and Manipulating Informationï¼Œå¿½ç„¶å¦‚æ²æ˜¥é£ï¼Œè±ç„¶å¼€æœ—ã€‚å¦‚ä¸‹æ˜¯éƒ¨åˆ†ç¬”è®°ã€‚</p>\n<h2 id=\"unsigned-and-twos-complement-encodings\"><a class=\"anchor\" href=\"#unsigned-and-twos-complement-encodings\">#</a> Unsigned and Twoâ€™s-Complement Encodings</h2>\n<p>Assume we have an integer data type of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Ï‰</mi></mrow><annotation encoding=\"application/x-tex\">\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï‰</span></span></span></span> bits. We write a bit vector as either <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.714em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span>, to denote the entire vector, or as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><msub><mi>x</mi><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mrow><mi>w</mi><mo>âˆ’</mo><mn>2</mn></mrow></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x_{w-1}, x_{w-2}, ..., x_0 ]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> to denote the individual bits within the vector. Treating <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.714em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span>  as a number written in binary notation, we obtain the unsigned interpretation of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.714em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span>. We express this interpretation as a function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mn>2</mn><msub><mi>U</mi><mi>w</mi></msub></mrow><annotation encoding=\"application/x-tex\">B2U_w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> (for â€œbinary to unsignedâ€, length <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Ï‰</mi></mrow><annotation encoding=\"application/x-tex\">\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï‰</span></span></span></span>)</p>\n\\begin{equation}\nB2U_w(\\vec{x}) = \\sum_{i = 0}^{w-1} x_i 2^i\n\\end{equation}\n\n<p>We wish to represent negative values as well by twoâ€™s-complement form. This is defined by interpreting the most significant bit of the word to have negative weight. We express this interpretation as a function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mn>2</mn><msub><mi>T</mi><mi>w</mi></msub></mrow><annotation encoding=\"application/x-tex\">B2T_w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>(for â€œbinary to twoâ€™s-complementâ€ length <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Ï‰</mi></mrow><annotation encoding=\"application/x-tex\">\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï‰</span></span></span></span> \t)</p>\n\\begin{equation}\nB2T_w(\\vec{x}) = -x_{w - 1} 2^{w-1} +  \\sum_{i = 0}^{w-2} x_i 2^i\n\\end{equation}\n\n<p>Problem: find the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mn>2</mn><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mo>âˆ’</mo><mn>5</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">B2T_w(-5)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">âˆ’</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></p>\n\\begin{align}\n\\because {5 + -5 = 0} \\\\\n0000 \\space 0101 + 1\\space\\underbrace{\\vec{x_6, x_5, ..., x_0}}_\\text{x} = 0 \\\\\n\\underbrace{\\vec{x_6, x_5, ..., x_0}}_\\text{x} = 1000 \\space 000 - 0000 \\space 0101 \\\\\n\\underbrace{\\vec{x_6, x_5, ..., x_0}}_\\text{x} = 0111 \\space 1011\\\\\n\\therefore {B2T_w(-5) = 1111 \\space 1011}\n\\end{align}\n\n<h3 id=\"conversions-between-singed-and-unsigned\"><a class=\"anchor\" href=\"#conversions-between-singed-and-unsigned\">#</a> Conversions Between Singed and Unsigned</h3>\n\\begin{gather}\nU2B_w(x) = B2U_w^{-1}(x) \\\\\nT2B_w(x) = B2T_w^{-1}(x)\n\\end{gather}\n\n<p>These functions give the unsigned or twoâ€™s-complement bit patterns for a numeric value. Consider the function</p>\n\\begin{gather}\nU2T_w(x) = B2T_w(U2B_w(x))\n\\end{gather}\n\n<p>which takes a number between 0 and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>w</mi></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">2^w - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.747722em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> and yields a number between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo separator=\"true\">,</mo><mtext>Â </mtext><msup><mn>2</mn><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[-2^{w - 1},\\space 2^{w - 1}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">âˆ’</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\">Â </span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span>, where the two numbers have identical bit representations, except that the argument is unsigned, while the result has a twoâ€™s-complement representation. Conversely, the function</p>\n\\begin{gather}\nT2U_w(x) = B2U_w(T2B_w(x))\n\\end{gather}\n\n<p>yields the unsigned number having the same bit representation as the twoâ€™s-complement value of x.</p>\n<p>To get a better understanding of the relation between a signed number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> and its unsigned counterpart <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mn>2</mn><msub><mi>U</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">T2U_w(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>, we can use the fact that they have identical bit representations to derive a numerical relationship.</p>\n\\begin{align}\nB2U_w(\\vec{x}) - B2T_w(\\vec{x}) = x_{w-1}(2^{w-1} - - 2^{w-1}) = x_{w-1}2^w \\\\\n\\end{align}\n\n<p>This gives a relationship <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mstyle mathcolor=\"red\"><mi>B</mi><mn>2</mn><msub><mi>U</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi>x</mi><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><msup><mn>2</mn><mi>w</mi></msup><mo>+</mo><mi>B</mi><mn>2</mn><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover><mo stretchy=\"false\">)</mo></mstyle></mrow><annotation encoding=\"application/x-tex\">\\textcolor{red}{B2U_w(\\vec{x}) = x_{w-1}2^w + B2T_w(\\vec{x})}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;color:red;\">B</span><span class=\"mord\" style=\"color:red;\">2</span><span class=\"mord\" style=\"color:red;\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;color:red;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\" style=\"color:red;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;color:red;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\" style=\"color:red;\">(</span><span class=\"mord accent\" style=\"color:red;\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"color:red;\"><span class=\"mord mathnormal\" style=\"color:red;\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"color:red;height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mclose\" style=\"color:red;\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\" style=\"color:red;\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8727229999999999em;vertical-align:-0.208331em;\"></span><span class=\"mord\" style=\"color:red;\"><span class=\"mord mathnormal\" style=\"color:red;\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\" style=\"color:red;\"><span class=\"mord mtight\" style=\"color:red;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;color:red;\">w</span><span class=\"mbin mtight\" style=\"color:red;\">âˆ’</span><span class=\"mord mtight\" style=\"color:red;\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\" style=\"color:red;\"><span class=\"mord\" style=\"color:red;\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\" style=\"color:red;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;color:red;\">w</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\" style=\"color:red;\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;color:red;\">B</span><span class=\"mord\" style=\"color:red;\">2</span><span class=\"mord\" style=\"color:red;\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;color:red;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\" style=\"color:red;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;color:red;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\" style=\"color:red;\">(</span><span class=\"mord accent\" style=\"color:red;\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"color:red;\"><span class=\"mord mathnormal\" style=\"color:red;\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"color:red;height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mclose\" style=\"color:red;\">)</span></span></span></span>. If we let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>B</mi><mn>2</mn><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x = B2T_w(\\vec{x})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>, we then have</p>\n\\begin{equation}\nB2U_w(T2B_w(x)) = T2U_w(x) = x_{w-1}2^w + x\n\\end{equation}\n\n<p>This relationship is useful for proving relationships between unsigned and twoâ€™s-complement arithmetic. In the twoâ€™s-complement representation of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>, bit <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">x_{w-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> determines whether or not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> is negative, giving</p>\n\\begin{equation}\nT2U_w(x) = \n\\begin{cases}\nx + 2^w, & x \\lt 0\\\\\nx, & x \\ge 0\n\\end{cases}\n\\end{equation}\n\n<p><img data-src=\"https://pic.imgdb.cn/item/64a90fd21ddac507ccc20279.png\" alt=\"\" /><br />\nGoing in the other direction, we wish to derive the relationship between an unsigned number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> and its signed counterpart <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mn>2</mn><msub><mi>T</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">U2T_w(x).</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span> If we let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>B</mi><mn>2</mn><msub><mi>U</mi><mi>x</mi></msub><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x = B2U_x(\\vec{x})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> , then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>âƒ—</mo></mover><mo>=</mo><mi>U</mi><mn>2</mn><mi>B</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\vec{x} = U2B(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.714em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.714em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.20772em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> we have</p>\n\\begin{equation}\nB2T_w(U2B_w(x)) = U2T_w(x) = -x_{w-1}2^w + x\n\\end{equation}\n\n<p>In the unsigned representation of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>, bit <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">x_{w-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> determines whether or not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> is greater than or equal to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>w</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{w-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>, giving</p>\n\\begin{equation}\nU2T_w(x) = \n\\begin{cases}\nx, & x \\lt 2^{w-1}\\\\\nx - 2^w, & x \\ge 2^{w-1}\n\\end{cases}\n\\end{equation}\n\n<p><img data-src=\"https://pic.imgdb.cn/item/64a90fd11ddac507ccc20139.png\" alt=\"\" /></p>\n<h2 id=\"225-expanding-the-bit-representation-of-a-number\"><a class=\"anchor\" href=\"#225-expanding-the-bit-representation-of-a-number\">#</a> 2.2.5 Expanding the Bit Representation of a Number</h2>\n<p>zero extension: To convert an unsigned number to a larger data type, we simply add leading 0s to the representation.</p>\n<p>sign extension: To convert an signed(twoâ€™s-complement) number to a larger data type, , add leading most significant bit to the representation.</p>\n\\begin{align}\nB2T_{w+1}([x_{w-1}, x_{w-1}, x_{w-2},...x_0]) &= -x_{w-1}2^w + [\\sum_0^{w-1}x_i2^i] \\\\\n&=  -x_{w-1}2^w + x_{w-1}2^{w-1}  +[\\sum_0^{w-2}x_i2^i] \\\\\n& = -x_{w-1}2^{w-1}  +[\\sum_0^{w-2}x_i2^i] \\\\\n& = B2T_w([x_{w-1},x_{w-2},...x_0]\n\\end{align}\n\n<h2 id=\"truncating-numbers\"><a class=\"anchor\" href=\"#truncating-numbers\">#</a> Truncating Numbers</h2>\n\\begin{align}\nB2U_w([x_{w-1}, x_{w-2},...x_0]) \\space mod \\space  2^k &= [\\sum_0^{w-1}x_i2^i]\\space mod\\space  2^k \\\\\n&= [\\sum_0^{k-1}x_i2^i] \\space mod \\space 2^k \\\\\n& = [\\sum_0^{k-1}x_i2^i] \\\\\n& = B2U_w([x_{k-1},x_{k-2},...x_0]\n\\end{align}\n\n<h3 id=\"241-fractional-binary-numbers\"><a class=\"anchor\" href=\"#241-fractional-binary-numbers\">#</a> 2.4.1 Fractional Binary Numbers</h3>\n<p>Fractional binary notation:</p>\n\\begin{equation}\nb = b_mb_{m-1}...b_1b_0.b_{-1}...b_{-n} = \\sum_{i=-n}^mi^i * b_i\n\\end{equation}\n\n<p>This notation is not efficient for representing <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mo>âˆ—</mo><msup><mn>2</mn><mn>100</mn></msup></mrow><annotation encoding=\"application/x-tex\">5 * 2^{100}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span></span>, which would consist of the bit pattern 101 followed by 100 zeros. Instead, we would like to represent numbers in a form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>âˆ—</mo><msup><mn>2</mn><mi>y</mi></msup></mrow><annotation encoding=\"application/x-tex\">x * 2^y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.46528em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></span></span></span></span></span></span> by giving the values of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.</p>\n<p>The IEEEE floating-point standard represents a number in a form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mo>âˆ’</mo><mn>1</mn><msup><mo stretchy=\"false\">)</mo><mi>s</mi></msup><mo>âˆ—</mo><mi>M</mi><mo>âˆ—</mo><msup><mn>2</mn><mi>E</mi></msup></mrow><annotation encoding=\"application/x-tex\">v = (-1)^s * M * 2^E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">âˆ’</span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">s</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8413309999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">E</span></span></span></span></span></span></span></span></span></span></span></p>\n<ul>\n<li>The sign s determines whether the number is negative ( s = 1) or positive (s = 0).</li>\n<li>The significant M is a fractional binary number that ranges either between 1 and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>âˆ’</mo><mi>Ïµ</mi></mrow><annotation encoding=\"application/x-tex\">2 - \\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">Ïµ</span></span></span></span> or between 0 and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>âˆ’</mo><mi>Ïµ</mi></mrow><annotation encoding=\"application/x-tex\">1 - \\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">Ïµ</span></span></span></span></li>\n<li>The exponent E weights the value by a (possibly negative ) power of 2.</li>\n</ul>\n<p>The bit representation of a floating-point number is divided into three fields to encode these values:</p>\n<ul>\n<li>The single sign bit s directly encodes the sign s.</li>\n<li>The k-bit exponent field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>=</mo><msub><mn>3</mn><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>e</mi><mn>1</mn></msub><msub><mi>e</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">exp = 3_{k-1}...e_1e_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.852771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> encodes the exponent E.</li>\n<li>The n-bit fraction field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mo>=</mo><msub><mi>f</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">frac = f_{n - 1}...f_1f_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> encodes the significant M.</li>\n</ul>\n<p>Normalized Values</p>\n<p>The bit pattern of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">exp</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">p</span></span></span></span> is neither all 0s nor all 1s. The exponent value is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>=</mo><mi>e</mi><mo>âˆ’</mo><mi>B</mi><mi>i</mi><mi>a</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">E = e - Bias</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">e</span></span></span></span> is the unsigned number having bit representation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mo>=</mo><msub><mi>e</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>e</mi><mn>1</mn></msub><msub><mi>e</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">e = e_{k-1}...e_1e_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, and Bias is a bias value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mi>i</mi><mi>a</mi><mi>s</mi><mo>=</mo><msup><mn>2</mn><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">bias = 2^{k - 1} - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9324379999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1</mn><mo>+</mo><mn>0.</mn><msub><mi>f</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>f</mi><mn>1</mn></msub><msub><mi>f</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">M = 1 + 0.f_{n-1}...f_1f_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<p>Denormalized Values</p>\n<p>When the exponent field is all 0s.</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>=</mo><mn>1</mn><mo>âˆ’</mo><mi>B</mi><mi>i</mi><mi>a</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">E = 1 - Bias</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo>=</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">M = f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span></li>\n</ul>\n<p>Special Values</p>\n<ul>\n<li>Infinity: When the exponent field is all 1s and the fraction field is all 0s.</li>\n<li>NaN: When the exponent field is all 1s but the fraction field is nonzero.</li>\n</ul>\n<p>Problem 2.33: k = 2, n = 2,  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mi>i</mi><mi>a</mi><mi>s</mi><mo>=</mo><msup><mn>2</mn><mrow><mn>2</mn><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">bias = 2^{2 - 1} -1 = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mbin mtight\">âˆ’</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<table>\n<thead>\n<tr>\n<th>Bits</th>\n<th>e</th>\n<th>E</th>\n<th>f</th>\n<th>M</th>\n<th>V</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0 00 00</td>\n<td>0</td>\n<td>0 ( 1 - bias)</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>0 00 01</td>\n<td>0</td>\n<td>0 ( 1 - bias)</td>\n<td>1/4</td>\n<td>1/4</td>\n<td>1/4</td>\n</tr>\n<tr>\n<td>0 00 10</td>\n<td>0</td>\n<td>0 ( 1 - bias)</td>\n<td>2/4</td>\n<td>2/4</td>\n<td>2/4</td>\n</tr>\n<tr>\n<td>0 00 11</td>\n<td>0</td>\n<td>0 ( 1 - bias)</td>\n<td>3/4</td>\n<td>3/4</td>\n<td>3/4</td>\n</tr>\n<tr>\n<td>0 01 00</td>\n<td>1</td>\n<td>0 ( e - bias)</td>\n<td>0</td>\n<td>4/4</td>\n<td>4/4</td>\n</tr>\n<tr>\n<td>0 01 01</td>\n<td>1</td>\n<td>0</td>\n<td>1/4</td>\n<td>5/4</td>\n<td>5/4</td>\n</tr>\n<tr>\n<td>0 01 10</td>\n<td>1</td>\n<td>0</td>\n<td>2/4</td>\n<td>6/4</td>\n<td>6/4</td>\n</tr>\n<tr>\n<td>0 01 11</td>\n<td>1</td>\n<td>0</td>\n<td>3/4</td>\n<td>7/4</td>\n<td>7/4</td>\n</tr>\n<tr>\n<td>0 10 00</td>\n<td>2</td>\n<td>1</td>\n<td>0</td>\n<td>4/4</td>\n<td>8/4</td>\n</tr>\n<tr>\n<td>0 10 01</td>\n<td>2</td>\n<td>1</td>\n<td>1/4</td>\n<td>5/4</td>\n<td>10/4</td>\n</tr>\n<tr>\n<td>0 10 10</td>\n<td>2</td>\n<td>1</td>\n<td>2/4</td>\n<td>6/4</td>\n<td>12/4</td>\n</tr>\n<tr>\n<td>0 10 11</td>\n<td>2</td>\n<td>1</td>\n<td>3/4</td>\n<td>7/4</td>\n<td>14/4</td>\n</tr>\n<tr>\n<td>0 11 00</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mi mathvariant=\"normal\">âˆ</mi></mrow><annotation encoding=\"application/x-tex\">+\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">âˆ</span></span></span></span></td>\n</tr>\n<tr>\n<td>0 11 01</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>-</td>\n<td>NaN</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": []
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/05/07/word-card-user-manual/",
            "url": "https://limxtop1989.github.io/limxtop/2023/05/07/word-card-user-manual/",
            "title": "Android å•è¯å¡ç‰‡ä½¿ç”¨æ‰‹å†Œ",
            "date_published": "2023-05-07T08:05:05.000Z",
            "content_html": "<h1 id=\"ç›®å½•\"><a class=\"anchor\" href=\"#ç›®å½•\">#</a> ç›®å½•</h1>\n<ol>\n<li>å•è¯å¡ç‰‡æ•ˆæœå›¾</li>\n<li>Android  å•è¯å¡ç‰‡åº”ç”¨ä¸‹è½½</li>\n<li>ä¸‹è½½å®‰è£… GoldenDict åº”ç”¨</li>\n<li>ä¸‹è½½è¯åº“æ–‡ä»¶å¹¶æ”¾ç½®åœ¨ GoldenDict ç›®å½•</li>\n</ol>\n<h1 id=\"å•è¯å¡ç‰‡æ•ˆæœå›¾\"><a class=\"anchor\" href=\"#å•è¯å¡ç‰‡æ•ˆæœå›¾\">#</a> å•è¯å¡ç‰‡æ•ˆæœå›¾</h1>\n<p><img data-src=\"https://pic1.imgdb.cn/item/646de6540d2dde57771ab200.gif\" alt=\"\" /><br />\nä½¿ç”¨è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿è°ƒåº¦è®°å¿†ä»»åŠ¡ã€‚å¯¹äºä¸æ‡‚çš„å•è¯ï¼Œå¯ä»¥ç‚¹å‡»æœç´¢æ¡†ï¼Œå¼¹çª—æ˜¾ç¤ºè¯å…¸ï¼Œç›®å‰æä¾›æœ—æ–‡è‹±è‹±ï¼Œç‰›æ´¥è‹±æ±‰ç­‰è¯å…¸ï¼Œä¸°å¯Œçš„é‡Šä¹‰ï¼Œè¯æºï¼Œä¾‹å¥å’Œæœ—è¯»ä¾‹å¥ï¼Œåœ¨ä¸°å¯Œçš„é“¾æ¥ä¸‹ï¼Œè®©å­¦ä¹ è€…æŒæ¡å®ƒçš„å«ä¹‰ï¼Œç”¨æ³•å’Œå¹¶è®­ç»ƒå¬åŠ›ï¼Œè¯»ï½ï½å†™ï½ï½å¬è¯´ï¼Œé›¨éœ²å‡æ²¾ã€‚ç§ä»¥ä¸ºï¼Œå•çº¯è®°å¿†ä¸€ä¸ªå•è¯èƒŒåçš„æ±‰è¯­æ„æ€ï¼Œåªèƒ½çŸ¥é“å®ƒçš„å«ä¹‰ï¼Œæ— æ³•æŒæ¡å®ƒçš„ç”¨æ³•ï¼Œæ›´ä¸ä¼šå¬è¯´ã€‚æˆ‘ä»¬å›½äººçš„å“‘å·´è‹±è¯­å°±æ˜¯è¿™æ ·å­¦æˆçš„ã€‚å…³äºæˆ‘ä»¬å¾ˆå¤šå›½äººæ²¡èƒ½æŒæ¡è‹±è¯­å¬è¯´èƒ½åŠ›çš„æ ¹æºåŠå…¶æœ‰æ•ˆå­¦ä¹ æŒæ¡è‹±è¯­çš„æ–¹æ³•ï¼Œåœ¨<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iZXdhdGVycy5tZS9saW14dG9wLzIwMjEvMDgvMTgvRW5nbGlzaC1pbnRyb2R1Y3Rpb24v\">è‹±è¯­è‡ªå­¦æŒ‡å—</span>è¯¦ç»†è§£é‡Šå™è¿°ï¼Œæ¬¢è¿é˜…è¯»ã€‚</p>\n<h1 id=\"ä½¿ç”¨ç¤ºä¾‹\"><a class=\"anchor\" href=\"#ä½¿ç”¨ç¤ºä¾‹\">#</a> ä½¿ç”¨ç¤ºä¾‹</h1>\n<p>æ¯”æ–¹è¯´ï¼Œdish æ˜¯ä¸ªåˆçº§è¯æ±‡ï¼Œæˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“ï¼Œå®ƒæ˜¯ç›˜å­çš„æ„æ€ï¼Œææ€•æˆ‘ä»¬å¾ˆå¤šäººä¹Ÿä»…çŸ¥é“å¦‚æ­¤ï¼Œä½†è¿™å¯¹äºæˆ‘ä»¬è¯­è¨€è¡¨è¾¾è¿˜æ˜¯è¯ç©·çš„ã€‚æ‰€ä»¥å°±ç®—å•è¯æˆ‘ä»¬å·²ç»å­¦è¿‡äº†ï¼Œä¾ç„¶éœ€è¦æŒ‰ç…§ç§‘å­¦çš„æ–¹å¼é‡æ–°å­¦ä¹ ã€‚GoldenDict ä¸€æŸ¥ï¼Œå¥½å®¶ä¼™ï¼Œå±…ç„¶è¿˜æœ‰è¿™ä¹ˆåè¯æ„æ€ã€‚ï¼ˆåé¢çš„æ±‰å­—æ˜¯ä¸ºäº†è¡¨è¾¾æ¸…æ™°ï¼Œå…·ä½“å­¦ä¹ ï¼Œåƒä¸‡åˆ«å»æƒ³ä¸­æ–‡å«ä¹‰ï¼ŒåŸåˆ™ä¾ç„¶æ˜¯ç”¨è‹±è¯­å­¦ä¹ è‹±è¯­ï¼Œçœ‹åˆ° dishï¼Œä¸åº”è¯¥æƒ³åˆ°ç›˜å­ï¼Œè€Œæ˜¯å›¾ç”»ï¼Œæˆ–è€…è‹±æ–‡é‡Šä¹‰æˆ–è€…ä¾‹å¥ï¼Œå¦‚æœå¯ä»¥è‡ªå·±é€ å¥å°±æ›´æ£’äº†ï¼‰</p>\n<p>dish<br />\na flat container with low sides, for serving food from or cooking food in â‡¨ bowl:<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/06/07/327fabf5e4a1a030.png\" alt=\"\" /></p>\n<ul>\n<li>a big dish of curry (é‡è¯ï¼Œä¸€ç›˜èœï¼‰</li>\n<li>wash, dry put away, etc the dishes (æ³›æŒ‡é¤å…·ï¼Œä¸ä»…æ˜¯ç›˜å­äº†ï¼‰</li>\n<li>a restaurant specializing in Indonesian dishes (é£å‘³ï¼‰</li>\n<li>This soup is substantial enough to serve as a main dish (ä¸»èœï¼‰</li>\n<li>Mary's new boy-friend's quite a dish, isn't he? ï¼ˆå¸…æ°”ï¼‰</li>\n</ul>\n<p>è¿˜å¯ä»¥å½“åŠ¨è¯ç”¨ï¼Œæƒ³ä¸åˆ°å§ã€‚</p>\n<ul>\n<li>The scandal dished his hope of being elected. (ä½¿ç ´ç­ï¼‰</li>\n<li>Don't get into a fight with him: he can really dish it out. (attack sb fiercely with words or blows)</li>\n<li>There were students dishing out leaflets to passers-by.</li>\n<li>Could you dish up the fruits?</li>\n</ul>\n<p>çœ‹ä¸‹ç›¸å…³çš„è¯æ±‡ã€‚</p>\n<ul>\n<li>dishful: About as much as a dish will hold.</li>\n<li>dishy: physically attractive, or handsome.</li>\n<li>dishcloth: Cloth for washing dish.</li>\n<li>dishwasher: Machine or person that washes dishes.</li>\n<li>dish-water: Water used for washing dishes. (Her coffee tastes like dish-water)</li>\n</ul>\n<p>ç›¸ä¼¼è¯</p>\n<ul>\n<li>food noun [uncountable and countable] things that people and animals eat: You can buy good fresh food in the market. | Do you like Japanese food?</li>\n<li>dish noun [countable] a type of food that is cooked in a particular way: a traditional English dish | They also offer vegetarian dishes.</li>\n<li>speciality British English, specialty American English noun [countable] a type of food that a restaurant or place is famous for: Fish dishes are a specialty of the region. | Home made pies are one of the hotelâ€™s specialities.</li>\n<li>delicacy noun [countable] an unusual food which people in a particular place like to eat: The local delicacies include laverbread (boiled seaweed). | I was keen to try out the local delicacies.</li>\n<li>diet noun [countable] the type of food that someone usually eats: You shouldnâ€™t have too much salt in your diet. | In the Andes, the main diet is beans, potatoes, and corn.</li>\n<li>cooking noun [uncountable] food made in a particular way, or by a particular person: Herbs are used a lot in French cooking. | I love my Mumâ€™s home cooking.</li>\n<li>cuisine /kwÉªËˆziËn/ noun [countable] formal the food you can eat in a particular restaurant, country, or area: Italian cuisine | Trying the local cuisine is all part of the fun of travelling.</li>\n<li>nutrition noun [uncountable] food considered as something that is necessary for good health and growth: a book on nutrition | Many homeless people suffer from poor nutrition.</li>\n<li>nourishment /ËˆnÊŒrÉªÊƒmÉ™nt $ ËˆnÉœË-, ËˆnÊŒ-/ noun [uncountable] goodness that you get from food, which helps your body to stay healthy: There's not much nourishment in fast food.</li>\n<li>fare noun [uncountable] formal the kind of food that is served in a place â€“ used especially when saying how interesting it is: In China you can feast on birdâ€™s nest soup and other exotic fare. | Dinner was pretty standard fare (=the usual kind of food).</li>\n</ul>\n<p>è¿˜æœ‰å“¦ï¼Œå†æŠŠæƒ…æ™¯ä¸‹æœ‰å…³è”çš„æœ‰ç”¨è¯æ±‡ç…§æ­¤å­¦ä¸€éã€‚<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/06/03/86537a7659d0f73c.bmp\" alt=\"\" /></p>\n<p><img data-src=\"https://s3.uuu.ovh/imgs/2023/06/03/278784343549929c.bmp\" alt=\"\" /><br />\nå¤©å“ªå™œäº†ã€‚å°±ä¸€ä¸ªå°å­¦è¯æ±‡ï¼ŒæŠŠæˆ‘ä¸€ä¸ªå¤§å­¦æ¯•ä¸šå¤šå¹´çš„äººï¼Œä¸€å¤©å­¦ä¹ è¯æ±‡çš„æ—¶é—´é¢åº¦ç»™ç”¨å…‰äº†ï¼Œæ„Ÿè§‰æ”¶è·æ»¡æ»¡å‘¢ã€‚</p>\n<h1 id=\"å•è¯å¡ç‰‡ä¸‹è½½\"><a class=\"anchor\" href=\"#å•è¯å¡ç‰‡ä¸‹è½½\">#</a> å•è¯å¡ç‰‡ä¸‹è½½</h1>\n<ol>\n<li>è·å–æ–¹å¼ï¼š åŠ æˆ‘å¾®ä¿¡ç›´æ¥ç»™ä½  APK å®‰è£…ï¼Œå¾®ä¿¡ IDï¼šlimxtop ï¼ˆå¤‡æ³¨å•è¯å¡ç‰‡ï¼‰</li>\n<li>ä¸‹è½½åœ°å€ï¼š <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucGd5ZXIuY29tL21nQmZ1Ng==\">https://www.pgyer.com/mgBfu6</span> ï¼ˆè¯¥ç‰ˆæœ¬å­˜åœ¨ bugï¼Œå·²ç»ä¿®å¤ï¼Œä½†æˆ‘è¿˜æœ‰å…¶ä»–å¤§çš„åŠŸèƒ½æ²¡æœ‰å®ç°ï¼Œä¸æµªè´¹æœ€åä¸€æ¬¡è’²å…¬è‹±å…è´¹çš„ä¸Šä¼ é¢åº¦ï¼Œè¯·å…ˆé€‰æ‹©åŠ å¾®ä¿¡çš„æ–¹å¼è·å–ï¼‰</li>\n</ol>\n<h1 id=\"ä¸‹è½½å®‰è£…goldendict\"><a class=\"anchor\" href=\"#ä¸‹è½½å®‰è£…goldendict\">#</a> ä¸‹è½½å®‰è£… GoldenDict</h1>\n<p>é€‰æ‹©ä»¥ä¸‹å¯ç”¨æ–¹æ¡ˆä¸‹è½½å®‰è£…å³å¯</p>\n<ol>\n<li>ä¸‹è½½é“¾æ¥ï¼š <span class=\"exturl\" data-url=\"aHR0cDovL21hcmtldC5hbmRyb2lkLmNvbS9kZXRhaWxzP2lkPW1vYmkuZ29sZGVuZGljdC5hbmRyb2lkLmZyZWU=\">http://market.android.com/details?id=mobi.goldendict.android.free</span></li>\n<li>å¦‚æœç”¨æµè§ˆå™¨æ— æ³•ä¸‹è½½å®‰è£… GoldenDictï¼Œè‡ªè¡Œæ‰“å¼€ Android æ‰‹æœºè‡ªå¸¦çš„åº”ç”¨å¸‚åœºï¼Œæœç´  GoldenDictï¼Œå¦‚æœè¿™é‡Œæœç´¢çš„åˆ°ï¼Œä¸‹è½½å®‰è£…äº¦å¯ã€‚</li>\n</ol>\n<p>ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šæç¤ºå®‰è£…è¯åº“ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œå¹¶åœ¨ Android æ‰‹æœºå­˜å‚¨å™¨æ ¹ç›®å½•åˆ›å»º GoldenDict ç›®å½•ï¼ˆå³æ–‡ä»¶å¤¹ï¼‰<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/05/07/41790adbafc47528.png\" width=\"30%\" height = \"30%\"></p>\n<h1 id=\"ä¸‹è½½è¯åº“æ–‡ä»¶å¹¶æ”¾ç½®åœ¨æ‰‹æœºå­˜å‚¨å™¨æ ¹ç›®å½•ä¸‹çš„goldendict\"><a class=\"anchor\" href=\"#ä¸‹è½½è¯åº“æ–‡ä»¶å¹¶æ”¾ç½®åœ¨æ‰‹æœºå­˜å‚¨å™¨æ ¹ç›®å½•ä¸‹çš„goldendict\">#</a> ä¸‹è½½è¯åº“æ–‡ä»¶ï¼Œå¹¶æ”¾ç½®åœ¨æ‰‹æœºå­˜å‚¨å™¨æ ¹ç›®å½•ä¸‹çš„ GoldenDict</h1>\n<p>ä¸‹è½½é“¾æ¥: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMW9WNkF4UlVsWDFjN21wRTM1MmJ0OHc=\">https://pan.baidu.com/s/1oV6AxRUlX1c7mpE352bt8w</span> æå–ç : uxtw</p>\n<ol>\n<li>Android æ‰‹æœºä¸‹è½½ä»¥ä¸‹è¯åº“æ–‡ä»¶å³å¯ï¼Œä¸‹è½½å®Œæ¯•<strong>è§£å‹</strong>ï¼ˆæ³¨æ„âš ï¸ï¼Œå¿…é¡»è§£å‹ï¼‰ï¼Œå¹¶æ”¾åˆ°æ‰‹æœºå­˜å‚¨å™¨çš„ GoldenDict ç›®å½•ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¯å‚è€ƒä¸‹ä¸€èŠ‚ï¼Œæˆ–è€…è‡ªè¡Œ Google ç™¾åº¦ã€‚</li>\n</ol>\n<ul>\n<li>En-En_Longman_DOCE5</li>\n<li>En-En_Merriam_Webster11</li>\n<li>En-En_OALD8</li>\n<li>Oxford_Advanced_Learner_English-Chinese_Dictionary-4th.bgl</li>\n</ul>\n<p>ä½œä¸ºå‚è€ƒå’Œå¯¹ç…§ï¼Œè¿™ä¸ªæ˜¯æˆ‘ Android Pixel æ‰‹æœº File åº”ç”¨æ‰“å¼€çš„ GoldenDict ç›®å½•æˆªå›¾<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/05/07/367486e3a757df2e.png\" width=\"30%\" height = \"30%\"></p>\n<ol start=\"2\">\n<li>é‡æ–°å¯åŠ¨ GoldenDictï¼Œå¼€å§‹ç´¢å¼•è¯åº“ã€‚å®Œæ¯•åå¯ä»¥åœ¨æœç´¢æ¡†è¾“å…¥å•è¯æŸ¥è¯¢ã€‚<br />\n<img data-src=\"https://s3.uuu.ovh/imgs/2023/05/07/969c769bb87bb2ba.png\" width=\"30%\" height = \"30%\"></li>\n</ol>\n<h1 id=\"ç”µè„‘æ‰‹æœºæ–‡ä»¶ä¼ è¾“\"><a class=\"anchor\" href=\"#ç”µè„‘æ‰‹æœºæ–‡ä»¶ä¼ è¾“\">#</a> ç”µè„‘æ‰‹æœºæ–‡ä»¶ä¼ è¾“</h1>\n<h2 id=\"windows-è®¡ç®—æœº\"><a class=\"anchor\" href=\"#windows-è®¡ç®—æœº\">#</a> Windows è®¡ç®—æœº</h2>\n<ol>\n<li>è§£é”æ‰‹æœºã€‚</li>\n<li>ä½¿ç”¨ USB æ•°æ®çº¿å°†æ‰‹æœºè¿æ¥åˆ°è®¡ç®—æœºã€‚</li>\n<li>åœ¨æ‰‹æœºä¸Šï¼Œç‚¹æŒ‰ â€œæ­£åœ¨é€šè¿‡ USB ä¸ºæ­¤è®¾å¤‡å……ç”µâ€ é€šçŸ¥ã€‚</li>\n<li>åœ¨ â€œUSB çš„ç”¨é€”â€ ä¸‹ï¼Œé€‰æ‹©æ–‡ä»¶ä¼ è¾“ã€‚</li>\n<li>è®¡ç®—æœºä¸Šå°†æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¼ è¾“çª—å£ã€‚è¯·ä½¿ç”¨è¯¥çª—å£æ‹–åŠ¨æ–‡ä»¶ã€‚</li>\n<li>å®Œæˆåï¼Œä» Windows ä¸­å¼¹å‡ºæ‚¨çš„æ‰‹æœºã€‚</li>\n<li>æ‹”ä¸‹ USB æ•°æ®çº¿ã€‚</li>\n</ol>\n<h2 id=\"mac-è®¡ç®—æœº\"><a class=\"anchor\" href=\"#mac-è®¡ç®—æœº\">#</a> Mac è®¡ç®—æœº</h2>\n<ol>\n<li>åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šä¸‹è½½å¹¶å®‰è£… <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5hbmRyb2lkLmNvbS9maWxldHJhbnNmZXIv\">Android æ–‡ä»¶ä¼ è¾“</span>ã€‚</li>\n<li>æ‰“å¼€ Android æ–‡ä»¶ä¼ è¾“ã€‚åœ¨æ‚¨ä¸‹æ¬¡è¿æ¥æ‰‹æœºæ—¶ï¼Œè¯¥åº”ç”¨ä¼šè‡ªåŠ¨æ‰“å¼€ã€‚</li>\n<li>è§£é”æ‰‹æœºã€‚</li>\n<li>ä½¿ç”¨ USB æ•°æ®çº¿å°†æ‰‹æœºè¿æ¥åˆ°è®¡ç®—æœºã€‚</li>\n<li>åœ¨æ‰‹æœºä¸Šï¼Œç‚¹æŒ‰ â€œæ­£åœ¨é€šè¿‡ USB ä¸ºæ­¤è®¾å¤‡å……ç”µâ€ é€šçŸ¥ã€‚</li>\n<li>åœ¨ â€œUSB çš„ç”¨é€”â€ ä¸‹ï¼Œé€‰æ‹©æ–‡ä»¶ä¼ è¾“ã€‚</li>\n<li>è®¡ç®—æœºä¸Šå°†æ‰“å¼€ä¸€ä¸ª Android æ–‡ä»¶ä¼ è¾“çª—å£ã€‚è¯·ä½¿ç”¨è¯¥çª—å£æ‹–åŠ¨æ–‡ä»¶ã€‚</li>\n<li>å®Œæˆåï¼Œæ‹”ä¸‹ USB æ•°æ®çº¿ã€‚</li>\n</ol>\n<h1 id=\"æœ€å\"><a class=\"anchor\" href=\"#æœ€å\">#</a> æœ€å</h1>\n<p>åº”ç”¨å›¾æ ‡ç”±ä¹…æœªè”ç³»çš„è¶³çƒé˜Ÿå‹ä½™æœé˜³ååŠ©åˆ¶ä½œï¼Œåœ¨æ­¤ç‰¹åˆ«é¸£è°¢ã€‚è®¾è®¡ç†å¿µç”±æˆ‘åŒ†å¿™æå‡ºï¼Œé›ªèŠ±å’Œè§å…‰å…ƒç´ å¯“æ„å›Šè¤æ˜ é›ªï¼Œè€Œ hello word åˆ™ä¸ç¨‹åºå‘˜å­¦æ–°è¯­è¨€å†™çš„ç¬¬ä¸€ä¸ªç¨‹åºè¾“å‡ºçš„ä¼ ç»Ÿæ–‡åŒ–ä¸€è„‰ç›¸æ‰¿ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥åšæŒè½»æ¾æ„‰æ‚¦å­¦ä¹ ï¼Œæœ€åè½»æ¾é©¾é©­è‹±è¯­ã€‚</p>\n<p>å¦‚æœæœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ä¸‹è½½è¯åº“æ–‡ä»¶å¹¶æ”¾ç½®åœ¨æ‰‹æœºå­˜å‚¨å™¨æŒ‡å®šç›®å½•è¿™ä¸ªæ­¥éª¤ã€‚æ¬¢è¿ç•™ä¸‹è¯„è®ºæˆ–è€…ç»™æˆ‘é‚®ä»¶ <span class=\"exturl\" data-url=\"bWFpbHRvOmxpbXh0b3BAZ21haWwuY29t\">limxtop@gmail.com</span> ï¼Œæˆ‘ä¼šå°½åŠ›ååŠ©ã€‚</p>\n",
            "tags": [
                "å•è¯å¡ç‰‡, word card"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/03/11/canvas-graphic-transform/",
            "url": "https://limxtop1989.github.io/limxtop/2023/03/11/canvas-graphic-transform/",
            "title": "Android åŒæŒ‡è§¦æ§ ä½ç§» ç¼©æ”¾ æ—‹è½¬",
            "date_published": "2023-03-11T13:13:48.000Z",
            "content_html": "<h1 id=\"æ•ˆæœ\"><a class=\"anchor\" href=\"#æ•ˆæœ\">#</a> æ•ˆæœ</h1>\n<p><img data-src=\"https://pic.imgdb.cn/item/6410989cebf10e5d53bddfb4.gif\" alt=\"demo\" /></p>\n<h1 id=\"ä»£ç å®ç°\"><a class=\"anchor\" href=\"#ä»£ç å®ç°\">#</a> ä»£ç å®ç°</h1>\n<figure class=\"highlight kotlin\"><figcaption data-lang=\"kotlin\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">package</span> com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>opengl</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>Context</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>graphics<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span>MotionEvent</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> android<span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span>View</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>opengl<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>Constants</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> com<span class=\"token punctuation\">.</span>maxim<span class=\"token punctuation\">.</span>opengl<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>VLog</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> kotlin<span class=\"token punctuation\">.</span>math<span class=\"token punctuation\">.</span>acos</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">import</span> kotlin<span class=\"token punctuation\">.</span>math<span class=\"token punctuation\">.</span>asin</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> kotlin<span class=\"token punctuation\">.</span>math<span class=\"token punctuation\">.</span>sqrt</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token function\">TouchEventView</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> Context<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">View</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> rect<span class=\"token operator\">:</span> RectF <span class=\"token operator\">=</span> <span class=\"token function\">RectF</span><span class=\"token punctuation\">(</span><span class=\"token number\">0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400f</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> desRect <span class=\"token operator\">=</span> <span class=\"token function\">RectF</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> matrixST <span class=\"token operator\">=</span> <span class=\"token function\">Matrix</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> paint<span class=\"token operator\">:</span> Paint <span class=\"token operator\">=</span> <span class=\"token function\">Paint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">init</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        paint<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span>RED</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> downX<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> downY<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> downPointerX<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> downPointerY<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> dx<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> dy<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> scale<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">1f</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> angle<span class=\"token operator\">:</span> Float <span class=\"token operator\">=</span> <span class=\"token number\">0f</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onTouchEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> MotionEvent<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Boolean <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">when</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>actionMasked<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            MotionEvent<span class=\"token punctuation\">.</span>ACTION_DOWN <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                downX <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>                downY <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            MotionEvent<span class=\"token punctuation\">.</span>ACTION_POINTER_DOWN <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>                downX <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>                downY <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                downPointerX <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>                downPointerY <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            MotionEvent<span class=\"token punctuation\">.</span>ACTION_MOVE <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>pointerCount <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>                    <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>                    <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                    <span class=\"token function\">zoom</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>            MotionEvent<span class=\"token punctuation\">.</span>ACTION_POINTER_UP <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>                <span class=\"token keyword\">val</span> remainIndex <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>actionIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span> <span class=\"token keyword\">else</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>                downX <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span>remainIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> dx</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>                downY <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span>remainIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> dy</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>            MotionEvent<span class=\"token punctuation\">.</span>ACTION_UP<span class=\"token punctuation\">,</span> MotionEvent<span class=\"token punctuation\">.</span>ACTION_CANCEL <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>                <span class=\"token comment\">// NOP.</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>            <span class=\"token keyword\">else</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>                <span class=\"token comment\">// NOP.</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token function\">invalidate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> MotionEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>        dx <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> downX</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>        dy <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> downY</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">zoom</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> MotionEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token keyword\">val</span> prev <span class=\"token operator\">=</span> <span class=\"token function\">distance</span><span class=\"token punctuation\">(</span>downX<span class=\"token punctuation\">,</span> downY<span class=\"token punctuation\">,</span> downPointerX<span class=\"token punctuation\">,</span> downPointerY<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token keyword\">val</span> next <span class=\"token operator\">=</span> <span class=\"token function\">distance</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>            event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>            event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>        <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        scale <span class=\"token operator\">=</span> next <span class=\"token operator\">/</span> prev</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>event<span class=\"token operator\">:</span> MotionEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>        <span class=\"token keyword\">val</span> pointerX <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>        <span class=\"token keyword\">val</span> pointerY <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>        <span class=\"token comment\">// multiply y component by -1 to make y-axis points up.</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        <span class=\"token comment\">// which maps view coordinate system to right-hand coordinate system.</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>        <span class=\"token keyword\">val</span> prevVector <span class=\"token operator\">=</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span>downPointerX <span class=\"token operator\">-</span> downX<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>downPointerY <span class=\"token operator\">-</span> downY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0f</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>        <span class=\"token keyword\">val</span> nextVector <span class=\"token operator\">=</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span>pointerX <span class=\"token operator\">-</span> event<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>pointerY <span class=\"token operator\">-</span> event<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0f</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>        <span class=\"token keyword\">val</span> cp<span class=\"token operator\">:</span> Vector <span class=\"token operator\">=</span> prevVector<span class=\"token punctuation\">.</span><span class=\"token function\">crossProduct</span><span class=\"token punctuation\">(</span>nextVector<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>        <span class=\"token comment\">// direction is 1 if the angle the next vector rotates with clockwise direction by</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>        <span class=\"token comment\">// from previous vector locates at [0, PI], otherwise is -1 if locates at [PI , 2 PI]</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>        <span class=\"token keyword\">val</span> direction <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cp<span class=\"token punctuation\">.</span>z <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> Rotate<span class=\"token punctuation\">.</span>CLOCKWISE<span class=\"token punctuation\">.</span>direction  <span class=\"token keyword\">else</span> Rotate<span class=\"token punctuation\">.</span>COUNTER_CLOCKWISE<span class=\"token punctuation\">.</span>direction</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>        <span class=\"token comment\">// radian represent the angle between the two vectors, whose value locates in [0, PI] always.</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>        <span class=\"token keyword\">val</span> radian <span class=\"token operator\">=</span> <span class=\"token function\">acos</span><span class=\"token punctuation\">(</span>prevVector<span class=\"token punctuation\">.</span><span class=\"token function\">dotProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>nextVector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>prevVector<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> nextVector<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>        angle <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>radian <span class=\"token operator\">*</span> <span class=\"token number\">180</span> <span class=\"token operator\">/</span> Math<span class=\"token punctuation\">.</span>PI<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> direction</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>        VLog<span class=\"token punctuation\">.</span><span class=\"token function\">d</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token interpolation variable\">$cp</span>, <span class=\"token interpolation variable\">$radian</span>, <span class=\"token interpolation variable\">$angle</span>\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">distance</span><span class=\"token punctuation\">(</span>x1<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">,</span> y1<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">,</span> x2<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">,</span> y2<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Float <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>        <span class=\"token keyword\">val</span> deltaX <span class=\"token operator\">=</span> x1 <span class=\"token operator\">-</span> x2</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>        <span class=\"token keyword\">val</span> deltaY <span class=\"token operator\">=</span> y1 <span class=\"token operator\">-</span> y2</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>deltaX <span class=\"token operator\">*</span> deltaX <span class=\"token operator\">+</span> deltaY <span class=\"token operator\">*</span> deltaY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">onDraw</span><span class=\"token punctuation\">(</span>canvas<span class=\"token operator\">:</span> Canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onDraw</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>        matrixST<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>        matrixST<span class=\"token punctuation\">.</span><span class=\"token function\">postScale</span><span class=\"token punctuation\">(</span>scale<span class=\"token punctuation\">,</span> scale<span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">.</span><span class=\"token function\">centerX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">.</span><span class=\"token function\">centerY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>        matrixST<span class=\"token punctuation\">.</span><span class=\"token function\">postTranslate</span><span class=\"token punctuation\">(</span>dx<span class=\"token punctuation\">,</span> dy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>        matrixST<span class=\"token punctuation\">.</span><span class=\"token function\">mapRect</span><span class=\"token punctuation\">(</span>desRect<span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>        canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>        <span class=\"token comment\">// clockwise when degrees is positive.</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>        canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">,</span> desRect<span class=\"token punctuation\">.</span><span class=\"token function\">centerX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> desRect<span class=\"token punctuation\">.</span><span class=\"token function\">centerY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>        canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">drawRect</span><span class=\"token punctuation\">(</span>desRect<span class=\"token punctuation\">,</span> paint<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>        canvas<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">restore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>    <span class=\"token keyword\">enum</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Rotate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">val</span> direction<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre>        <span class=\"token function\">CLOCKWISE</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>        <span class=\"token function\">COUNTER_CLOCKWISE</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> z<span class=\"token operator\">:</span> Float<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>        <span class=\"token keyword\">fun</span> <span class=\"token function\">dotProduct</span><span class=\"token punctuation\">(</span>v<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Float <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre>            <span class=\"token keyword\">return</span> x <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> y <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> z <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>z</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre></pre></td></tr><tr><td data-num=\"136\"></td><td><pre>        <span class=\"token keyword\">fun</span> <span class=\"token function\">crossProduct</span><span class=\"token punctuation\">(</span>v<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Vector <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token function\">Vector</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>                y <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>z <span class=\"token operator\">-</span> z <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>                <span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>z <span class=\"token operator\">-</span> z <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>                x <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> y <span class=\"token operator\">*</span> v<span class=\"token punctuation\">.</span>x</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>            <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>        <span class=\"token keyword\">fun</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Double <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">*</span> y <span class=\"token operator\">+</span> z <span class=\"token operator\">*</span> z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>        <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token string\">\"(<span class=\"token interpolation variable\">$x</span>, <span class=\"token interpolation variable\">$y</span>, <span class=\"token interpolation variable\">$z</span>)\"</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>        <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>            <span class=\"token keyword\">fun</span> <span class=\"token function\">crossProduct</span><span class=\"token punctuation\">(</span>v1<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">,</span> v2<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Float <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"154\"></td><td><pre>                <span class=\"token keyword\">return</span> v1<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> v2<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> v1<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> v2<span class=\"token punctuation\">.</span>x</pre></td></tr><tr><td data-num=\"155\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"156\"></td><td><pre></pre></td></tr><tr><td data-num=\"157\"></td><td><pre>            <span class=\"token keyword\">fun</span> <span class=\"token function\">dotProduct</span><span class=\"token punctuation\">(</span>v1<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">,</span> v2<span class=\"token operator\">:</span> Vector<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Float <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"158\"></td><td><pre>                <span class=\"token keyword\">return</span> v1<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> v2<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> v1<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> v2<span class=\"token punctuation\">.</span>y</pre></td></tr><tr><td data-num=\"159\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"160\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"161\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"162\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><img data-src=\"https://s3.uuu.ovh/imgs/2023/03/15/3519b041b587e7e5.png\" alt=\"cross product and dot product\" /></p>\n<h1 id=\"å‘é‡ç‚¹ä¹˜-dot-product\"><a class=\"anchor\" href=\"#å‘é‡ç‚¹ä¹˜-dot-product\">#</a> å‘é‡ç‚¹ä¹˜ Dot Product</h1>\n\\begin{equation}\n\\vec{AB} \\cdot \\vec{AC} = \\parallel \\vec{AB} \\parallel * \\parallel \\vec{AC} \\parallel * \\cos\\theta  \\label{dotproduct} \\tag{1}\n\\end{equation}\n\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable width=\"100%\"><mtr><mtd width=\"50%\"></mtd><mtd><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover><mo>â‹…</mo><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover><mo>=</mo><mo>âˆ¥</mo><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover><mo>âˆ¥</mo><mo>âˆ—</mo><mo>âˆ¥</mo><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover><mo>âˆ¥</mo><mo>âˆ—</mo><mi>cos</mi><mo>â¡</mo><mi>Î¸</mi></mrow></mtd><mtd width=\"50%\"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\vec{AB} \\cdot \\vec{AD} = \\parallel \\vec{AB} \\parallel * \\parallel \\vec{AD} \\parallel * \\cos\\theta \\tag{2}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">â‹…</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mrel\">âˆ¥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.21633em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">âˆ¥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">âˆ¥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.21633em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">âˆ¥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span></span><span class=\"tag\"><span class=\"strut\" style=\"height:1.21633em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">(</span><span class=\"mord\"><span class=\"mord\">2</span></span><span class=\"mord\">)</span></span></span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span></span></span></span> çš„å–å€¼èŒƒå›´ä¸º <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>Ï€</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0, \\pi]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï€</span><span class=\"mclose\">]</span></span></span></span>ï¼Œç”±äºä»<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AB}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> é¡ºæ—¶é’ˆæ—‹è½¬åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>C</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AC}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> å’Œä» <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AB}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> é¡ºæ—¶é’ˆæ—‹è½¬åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AD}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> è®¡ç®—å‡ºæ¥çš„<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span></span></span></span> æ˜¯ä¸€æ ·çš„ï¼Œæ— æ³•åŒºåˆ†ã€‚è€Œå¯¹äº <code>Canvas.rotate(degree)</code> ï¼Œå½“ <code>degree &gt; 0 </code> ï¼Œè¡¨ç¤ºä»å‘å³æ–¹å‘é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œå½“ <code>degree &lt; 0 </code> æ—¶ï¼Œè¡¨ç¤ºå‘å³æ–¹å‘é€†æ—¶é’ˆæ—‹è½¬ã€‚æ‰€ä»¥ï¼Œå¯¹äºä»<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AB}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> é¡ºæ—¶é’ˆæ—‹è½¬ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î¸</mi><mo>+</mo><mn>2</mn><mo>âˆ—</mo><mo stretchy=\"false\">(</mo><mi>Ï€</mi><mo>âˆ’</mo><mi>Î¸</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>2</mn><mi>Ï€</mi><mo>âˆ’</mo><mi>Î¸</mi></mrow><annotation encoding=\"application/x-tex\">\\theta + 2 * (\\pi - \\theta) =  2 \\pi - \\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï€</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">Ï€</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ’</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span></span></span></span> åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AD}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span>ï¼Œç›¸å½“äºä»<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AB}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span> é€†æ—¶é’ˆæ—‹è½¬ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span></span></span></span> åˆ° <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{AD}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span></span></span></span>ã€‚ ä¹Ÿå³å…¬ç¤º\\ref{dotproduct} æ‰€æ±‚ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Î¸</mi><mo>âˆ—</mo><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\theta * direction</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">Î¸</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">âˆ—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span></span></span></span> å³å¯ã€‚+1 è¡¨ç¤ºé¡ºæ—¶é’ˆï¼Œ -1 è¡¨ç¤ºé€†æ—¶é’ˆï¼Œè€Œ direction çš„å€¼å¯ç”±å‰ä¹˜è®¡ç®—å¾—å‡ºã€‚</p>\n<h1 id=\"å‘é‡å‰ä¹˜-cross-product\"><a class=\"anchor\" href=\"#å‘é‡å‰ä¹˜-cross-product\">#</a> å‘é‡å‰ä¹˜ Cross Product</h1>\n<p>å¦‚å›¾å·¦æ‰‹åæ ‡ç³»ï¼Œä½¿ç”¨å·¦æ‰‹æ³•åˆ™ã€‚</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable width=\"100%\"><mtr><mtd width=\"50%\"></mtd><mtd><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent=\"true\"><mrow><mi>A</mi><mi>C</mi></mrow><mo>âƒ—</mo></mover><mo>=</mo><mover accent=\"true\"><msub><mi>N</mi><mi>c</mi></msub><mo>âƒ—</mo></mover></mrow></mtd><mtd width=\"50%\"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\vec{AB} \\times \\vec{AC} = \\vec{N_c} \\tag{3}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0496599999999998em;vertical-align:-0.08333em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">Ã—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1163299999999998em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"tag\"><span class=\"strut\" style=\"height:1.21633em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">(</span><span class=\"mord\"><span class=\"mord\">3</span></span><span class=\"mord\">)</span></span></span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>N</mi><mi>c</mi></msub><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{N_c}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1163299999999998em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æŒ‡å‘ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>âˆ’</mo><mi>z</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-z, direction = +1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">âˆ’</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span></span></span></span></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable width=\"100%\"><mtr><mtd width=\"50%\"></mtd><mtd><mrow><mover accent=\"true\"><mrow><mi>A</mi><mi>B</mi></mrow><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent=\"true\"><mrow><mi>A</mi><mi>D</mi></mrow><mo>âƒ—</mo></mover><mo>=</mo><mover accent=\"true\"><msub><mi>N</mi><mi>d</mi></msub><mo>âƒ—</mo></mover></mrow></mtd><mtd width=\"50%\"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\vec{AB} \\times \\vec{AD} = \\vec{N_d} \\tag{4}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0496599999999998em;vertical-align:-0.08333em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">Ã—</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9663299999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1163299999999998em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"tag\"><span class=\"strut\" style=\"height:1.21633em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">(</span><span class=\"mord\"><span class=\"mord\">4</span></span><span class=\"mord\">)</span></span></span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><msub><mi>N</mi><mi>d</mi></msub><mo>âƒ—</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\vec{N_d}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1163299999999998em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9663299999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2355em;\"><span class=\"overlay\" style=\"height:0.714em;width:0.471em;\"><svg width='0.471em' height='0.714em' style='width:0.471em' viewBox='0 0 471 714' preserveAspectRatio='xMinYMin'><path d='M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z'/></svg></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span> æŒ‡å‘ <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mi>z</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">+z, direction = -1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">+</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">âˆ’</span><span class=\"mord\">1</span></span></span></span></p>\n<h1 id=\"å‚è€ƒ\"><a class=\"anchor\" href=\"#å‚è€ƒ\">#</a> å‚è€ƒ</h1>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ib29rLmRvdWJhbi5jb20vc3ViamVjdC8yNjgyNDkyMS8=\">Introduction to Linear Algebra</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vZGV2ZWxvcC91aS92aWV3cy90b3VjaC1hbmQtaW5wdXQvZ2VzdHVyZXMvbXVsdGk=\">Android multiple touch event</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTYyNzQ0ODYwNjg1\">ä½¿ç”¨æ–œç‡è®¡ç®—æ—‹è½¬è§’åº¦</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTY2NzAwMDg5MzUx\">ä½¿ç”¨å‘é‡è®¡ç®—æ—‹è½¬è§’åº¦</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC82NDcwNzI1OQ==\">ä¸‰ç»´å‰ä¹˜ &amp; åæ ‡ç³»</span></li>\n</ul>\n",
            "tags": [
                "Android",
                "Android Translate Scale Rotate, multiple touch event, Android åŒæŒ‡è§¦æ§ï¼Œä½ç§»ï¼Œç¼©æ”¾ï¼Œæ—‹è½¬"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/02/25/notice-time/",
            "url": "https://limxtop1989.github.io/limxtop/2023/02/25/notice-time/",
            "title": "çœ‹è§æ—¶é—´",
            "date_published": "2023-02-25T03:53:23.000Z",
            "content_html": "<p>å› ç¼˜å·§åˆï¼Œåœ¨æ¯•ä¸šä¸¤å¹´å¤šåçš„ä¸€è¶Ÿå…¬äº¤è½¦å¤–ï¼Œæˆ‘çœ‹è§äº†æ—¶é—´ï¼Œæ˜ç™½äº†å®ƒåˆ°åº•æ˜¯ä½•ç‰©ã€‚</p>\n<p>é‚£ä¸ªä¸Šç­ç­‰è½¦çš„æ¸…æ™¨ï¼Œå§—å§—æ¥è¿Ÿçš„å…¬äº¤è½¦æœªæ¥å¾—åŠé ç«™ï¼Œä¸€ç¾¤å€™è½¦çš„ä¸Šç­æ—ä¾¿èœ‚æ‹¥è€Œä¸Šï¼Œæˆ‘æ²¡æœ‰å‚ä¸ï¼Œä»å®¹é—²é€‚åœ°å¾˜å¾Šåœ¨å€™è½¦äº­ç­‰å¾…ä¸‹ä¸€ç­è½¦çš„åˆ°æ¥ã€‚å¿ƒæ€¥ç«ç‡çš„äººç¾¤å‡ ç»åŠªåŠ›å°è¯•ç»ˆæœ‰äº›äººæŒ¤ä¸ä¸Šè½¦ï¼Œæ”¾å¼ƒæ’¤é€€å›æ¥ã€‚ä¸è¿‡ï¼Œè½¦å­å¯åŠ¨æ‰¬èµ·çš„å°˜åŸƒè¿˜æœªè½å®šï¼Œä¸‹ä¸€ç­è½¦å°±ç©ºè¡è¡åœ°å°¾éšè€Œæ¥ï¼Œé—æ†¾ç•™ä¸‹æ¥çš„äººæ„çœ‰æ¸æ¬¡èˆ’å±•å¼€æ¥ã€‚</p>\n<p>æˆ‘çŸ¥é“ï¼Œæœ‰äº›å…¬å¸ä¼šè§„å®šè¿Ÿåˆ°è¦æ‰£é’±ï¼Œä½†å³ä½¿æ²¡æœ‰è¿™æ ·çš„è§„çŸ©ï¼Œæˆ‘ä¾ç„¶èƒ½å¤Ÿç†è§£ä»–ä»¬æŒ¤ç€ä¸Šè½¦çš„ä¸¾åŠ¨ã€‚å½“å‰é—¨ç©ºé—´è¢«æ‹¥æŒ¤çš„äººç¾¤å¡å¾—æ»¡æ»¡å½“å½“ï¼Œå¸æœºæ€»æ˜¯å¥‰åŠè¿˜åœ¨é—¨å¤–æŒ£æ‰çš„äººï¼Œç­‰ä¸‹ä¸€ç­ï¼Œå¾ˆå¿«å°±æ¥ã€‚è¿™æ˜¯ä»–ä»¬è¿™ä¸ªèŒä¸šæ‰€èƒ½ç•™ç»™ä¹˜å®¢ä¸€ä¸æ— å¥ˆçš„å–„æ„ã€‚</p>\n<p>æˆ‘ä»¬æœ‰åºä¸Šè½¦ï¼Œç”±äºå¹¶éæ»¡è½½è¡Œé©¶ï¼Œè½¦å­æå…¶è½»å¿«ï¼Œä¸€ä¸‹å­å°±è¶…è½¦äº†ã€‚å½“æˆ‘åˆ°ç«™èµ°ä¸‹è½¦å›å¤´ä¸€æœ›æ—¶ï¼Œä¸Šä¸€è¶Ÿå…¬äº¤è½¦è¿˜åœ¨è¿œå¤„å§—å§—æ¥è¿Ÿã€‚å¦‚æœæˆ‘åˆšæ‰ä¹Ÿéšæ³¢é€æµåœ¨äººç¾¤ä¸­æ¨æ¡ä¸Šè½¦ï¼Œé‚£æˆ‘åªèƒ½åœ¨æ­¤æ—¶æ­¤åˆ»ä¹‹åçš„å‡ åˆ†é’Ÿçš„æœªæ¥æ‰èƒ½åˆ°è¾¾æ­¤åœ°ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ€§æ ¼ä½¿ç„¶çœ‹ä¼¼ä¸ç»æ„é—´çš„é€‰æ‹©ï¼Œæˆ‘æå‰åˆ°è¾¾äº†æœªæ¥ï¼ˆæœ¬æ¥åº”è¯¥æ˜¯  <code>t2</code> ï¼Œç»“æœæ˜¯ <code>t1</code>  åˆ°è¾¾ï¼‰ã€‚</p>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/25/14b5f2ba338fbc0d.png\" alt=\"figure timeline\" /></p>\n<p>é‚£ä¸€åˆ»ï¼Œæˆ‘ä»¿ä½›çœ‹è§äº†æ—¶é—´ï¼Œæ»´ç­”æ»´ç­”ï¼Œåœ¨è‡ªå·±ç”Ÿå‘½åœºåˆé‡Œï¼Œåˆ»ä¸‹çš„å°ºåº¦ã€‚æˆ‘ä»¬çš„äººç”Ÿåªæœ‰ä¸€æ¬¡ï¼Œæ²¡æœ‰å½©æ’ï¼Œæ²¡åŠæ³•èµ°åˆ°æŸä¸€åˆ»ï¼Œæœ‰ä¸ªæ—‹é’®å¯ä»¥æŠŠæˆ‘ä»¬å€’æ‹¨å›è¿‡å»ï¼Œé‡æ–°ä½œå‡ºé€‰æ‹©ï¼Œå¯¹æ¯”çœ‹å­°å¥½å­°åã€‚ä½†åªè¦è‡ªå·±ä¸è¦ç¢Œç¢Œæ— ä¸ºï¼Œè™šåº¦å…‰é˜´ï¼Œè´ªå›¾ç©ä¹ï¼Œåƒä¸ªæ¯äº²ç»†å¿ƒåœ°å‘µæŠ¤å‘±å‘±å åœ°çš„å©´å­©ä¸€æ ·çˆ±æŠ¤è‡ªå·±çš„æ—¶é—´ï¼Œè¿™æ ·è‡ªå·±å°±å¯ä»¥æå‰åˆ°è¾¾æœªæ¥ã€‚åœ¨äººç”Ÿæœ‰é™çš„ç”Ÿå‘½é‡Œï¼Œè‡ªå·±å¯ä»¥èµ°çš„æ›´è¿œï¼Œè¿™æ ·ä¹Ÿè®¸è‡ªå·±ä¸æƒ‘ä¹‹å¹´æ‰€é©»è¶³çš„åœ°æ–¹ï¼Œå´æ˜¯æ›¾ç»æ‡µæ‡‚çš„è‡ªå·±æˆ–è€…ä»–äººæ´»åˆ°è€„è€‹ä¹‹å¹´æ‰èƒ½åˆ°è¾¾ã€‚</p>\n<p>äººæœ‰äº†ç‚¹å­¦è¯†ï¼Œæ–¹çŸ¥è‡ªå·±è¿‡å»çš„æ— çŸ¥ï¼Œä¹Ÿè®¸å› ä¸ºæ„è¯†åˆ°è¿™ç‚¹ï¼Œä¾¿å­œå­œä¸å€¦åœ°æ±‚çŸ¥ã€‚å­¦æµ·æ— æ¶¯ï¼Œå›å¤´ä¸æ˜¯å²¸ï¼ŒåŠªåŠ›æ¸¸åˆ°å¯¹å²¸æ‰æ˜¯ã€‚</p>\n<blockquote>\n<p>â€œäººæ°¸è¿œéƒ½æ— æ³•çŸ¥é“è‡ªå·±è¯¥è¦ä»€ä¹ˆï¼Œå› ä¸ºäººåªèƒ½æ´»ä¸€æ¬¡ï¼Œæ—¢ä¸èƒ½æ‹¿å®ƒè·Ÿå‰ä¸–ç›¸æ¯”ï¼Œä¹Ÿä¸èƒ½åœ¨æ¥ç”ŸåŠ ä»¥ä¿®æ­£ã€‚æ²¡æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥æ£€éªŒå“ªç§æŠ‰æ‹©æ˜¯å¥½çš„ï¼Œå› ä¸ºä¸å­˜åœ¨ä»»ä½•æ¯”è¾ƒã€‚ä¸€åˆ‡éƒ½æ˜¯é©¬ä¸Šç»å†ï¼Œä»…æ­¤ä¸€æ¬¡ï¼Œä¸èƒ½å‡†å¤‡ã€‚â€”â€” ç±³å…°ãƒ»æ˜†å¾·æ‹‰â€</p>\n</blockquote>\n<p>å¾ˆä¸å¹¸ï¼Œå’Œå¤§å¤šæ•°å¤§é“ç†éƒ½æ‡‚ï¼Œå°æƒ…ç»ªå´æ€»æ˜¯å–·è–„è€Œå‡ºçš„å°å­©è„¾æ°”ä¸€æ ·ã€‚çŸ¥é“æ—¶é—´çè´µï¼Œåº”è¯¥çæƒœæ—¶é—´ï¼Œé‚£äº›äººç”Ÿè‡³å…³é‡è¦çš„æ¸…è§„æˆ’å¾‹æ—¶å¸¸æ·¹æ²¡åœ¨æ—¥å¸¸çç¢ç¹æ‚çš„æ´ªæµé‡Œï¼ŒçŸ¥è¡Œåˆä¸€æ˜¯å¦‚æ­¤ä¹‹éš¾ã€‚</p>\n<p>ä½†å…¶å®ä¹Ÿæ²¡æœ‰å¿…è¦å¯¹æ­¤å¤ªè¿‡äºä»‹æ€€ã€‚æœ‰é“æ˜¯äººç”Ÿè‹¦çŸ­ï¼ŒåŠæ—¶è¡Œä¹ã€‚æ²¡æœ‰å¿…è¦ä¸€ç›´å¦‚åŒè‹¦è¡Œåƒ§ï¼Œå¶å°”éœ€è¦äº›è®¸é—²æš‡çš„æ—¶å…‰ï¼Œè®©è‡ªå·±èµ°å‡ºå®¶é—¨ååœ¨åŒå±‚å·´å£«ä¸Šå‘å‘†ï¼Œçœ‹ç€è¡—è¾¹çš„æˆ¿å±‹ï¼Œæ ‘å¶å¦‚ç™½é©¹è¿‡éš™èˆ¬ä»è½¦çª—å‰ä¸€æ™ƒè€Œè¿‡ã€‚å’Œæœ‹å‹è¸©åœ¨æ¾è½¯çš„æ²™æ»©æˆ–è€…ç¡¬å®çš„æœ¨æ ˆé“ï¼Œä»»å‡­è£¹æŒŸç€å’¸å‘³çš„æµ·é£æ¶Œå…¥é¼»è…”ï¼Œæˆ–è€…ååœ¨è‡ªå·±å®½å¤§çš„ä¹¦æ¡Œå‰æ‘Šå¼€ç™¾è¯»ä¸åŒï¼Œçœ‹ä¼¼ç™¾æ— ä¸€ç”¨çš„è¯¾å¤–ä¹¦ç±ã€‚æ¥å—å¶å°”ä¸é‚£ä¹ˆåŠŸåˆ©ç›®çš„ï¼Œè™šåº¦å…‰é˜´çš„è‡ªå·±ã€‚</p>\n",
            "tags": [
                "æ—¶é—´, time"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/02/04/android-message-loop/",
            "url": "https://limxtop1989.github.io/limxtop/2023/02/04/android-message-loop/",
            "title": "Androidæ¶ˆæ¯å¾ªç¯",
            "date_published": "2023-02-04T07:59:56.000Z",
            "content_html": "<h1 id=\"é¢˜è®°\"><a class=\"anchor\" href=\"#é¢˜è®°\">#</a> é¢˜è®°</h1>\n<p>æœ¬æ–‡åˆå‡ å¹´å‰ç»™åŒäº‹ä»¬åŸ¹è®­å‡†å¤‡çš„èµ„æ–™æ•´ç†è€Œæ¥ï¼Œåªæ˜¯å‡­å€Ÿå°è±¡ï¼Œç²—ç•¥è®°å½•æ¡†æ¶åŸç†å’Œè¦ç‚¹ï¼Œéœ€è¦æ–°äººèŠ±ä¸å°‘åŠŸå¤«è‡ªå­¦æ¢ç´¢ã€‚å¾…é—²æš‡æ—¶ï¼Œå¾…æˆ‘é‡æ–°é˜…è¯»æºç ï¼Œå†è¯¦ç»†å±•å¼€ã€‚è¯»æ‡‚æ¶ˆæ¯å¾ªç¯ï¼Œéœ€è¦å…·å¤‡è‹±è¯­é˜…è¯»èƒ½åŠ›ï¼Œå¦‚æœå°šç¼ºï¼Œå¯ä»¥é˜…è¯»<span class=\"exturl\" data-url=\"aHR0cHM6Ly9iZXdhdGVycy5tZS9saW14dG9wLzIwMjEvMDgvMTgvRW5nbGlzaC1pbnRyb2R1Y3Rpb24v\">è‹±è¯­è‡ªå­¦æŒ‡å—</span>ã€‚</p>\n<h1 id=\"ç”¨æ³•\"><a class=\"anchor\" href=\"#ç”¨æ³•\">#</a> ç”¨æ³•</h1>\n<p>çº¿ç¨‹æ˜¯ä¸å…·å¤‡æ¶ˆæ¯å¾ªç¯çš„ï¼Œéœ€è¦è°ƒç”¨ <code>Looper.prepare()</code>  &amp;  <code>Looper.loop()</code>  æ‰å¼€å¯æ¶ˆæ¯å¾ªç¯ã€‚ç³»ç»Ÿå·²ç»åœ¨ <code>ActivityThread</code>  å¸®å¿™ä¸»çº¿ç¨‹å¼€å¯äº†æ¶ˆæ¯å¾ªç¯ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">prepareMainLooper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token class-name\">ActivityThread</span> thread <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActivityThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sMainThreadHandler <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            sMainThreadHandler <span class=\"token operator\">=</span> thread<span class=\"token punctuation\">.</span><span class=\"token function\">getHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token class-name\">Looper</span><span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Main thread loop unexpectedly exited\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œä¸»çº¿ç¨‹æ˜¯ä¸å¯ä»¥è°ƒç”¨ <code>looper.quit()</code> ï¼Œä¸ç„¶æŠ›å‡º <code>new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;)</code> ï¼Œè€Œ WorkerThread å¦‚æœå¼€å¯æ¶ˆæ¯å¾ªç¯ï¼Œä¸å†éœ€è¦æ—¶ï¼Œå¾—è°ƒç”¨ <code>looper.quit()</code> ï¼Œå¦åˆ™å†…å­˜æ³„æ¼ã€‚</p>\n<h1 id=\"ç±»å›¾\"><a class=\"anchor\" href=\"#ç±»å›¾\">#</a> ç±»å›¾</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/e2a2de9b66a113c6.png\" alt=\"\" /><br />\næ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ¶ˆæ¯å¾ªç¯æœºåˆ¶å’Œé˜Ÿåˆ—ï¼Œå®ç°çš„å…³é”®æ˜¯å°† Looper å¯¹è±¡ä¿å­˜åœ¨å½“å‰ <code>Thread</code>  çš„ <code>ThreadLocalMap</code> ï¼Œ&lt;key, value&gt; = &lt;Looper.sThreadLocal, Looper&gt;.</p>\n<p>android.os.Looper#prepare(boolean)</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">boolean</span> quitAllowed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sThreadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Only one Looper may be created per thread\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        sThreadLocal<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Looper</span><span class=\"token punctuation\">(</span>quitAllowed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>java.lang.ThreadLocal#set</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>     * Sets the current thread's copy of this thread-local variable</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>     * to the specified value.  Most subclasses will have no need to</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * override this method, relying solely on the &#123;@link #initialValue&#125;</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * method to set the values of thread-locals.</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     * @param value the value to be stored in the current thread's copy of</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     *        this thread-local.</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">Thread</span> t <span class=\"token operator\">=</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token class-name\">ThreadLocalMap</span> map <span class=\"token operator\">=</span> <span class=\"token function\">getMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">else</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token function\">createMap</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"overview\"><a class=\"anchor\" href=\"#overview\">#</a> Overview</h1>\n<p>æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯æœ‰æŒ‡å®šæ‰§è¡Œæ—¶é—´ï¼Œæ¶ˆæ¯å¾ªç¯æœºåˆ¶æ˜¯å¦‚ä½•åšåˆ°å‡†æ—¶å¤„ç†æ¶ˆæ¯çš„ï¼Ÿ</p>\n<ol>\n<li>æ¶ˆæ¯å¾ªç¯æœºåˆ¶åˆå§‹åŒ–æ—¶ï¼Œåœ¨ native å±‚ï¼Œç›‘å¬ `mWakeEventFdã€‚</li>\n<li>æ¶ˆæ¯å¾ªç¯å¼€å§‹æ—¶ï¼Œä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œå–æ¶ˆæ¯ï¼Œè‡ªç„¶å–ä¸åˆ°ï¼Œå°±åœ¨ native ç­‰å¾… <code>mWakeEventFd</code>  äº‹ä»¶</li>\n<li>handler å‘é€æ¶ˆæ¯ï¼Œå¹¶è¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œnative å±‚ åœ¨ mWakeEventFd å†™å…¥æ•°æ®ï¼Œå”¤é†’ç¬¬äºŒæ­¥çš„ç­‰å¾…äº‹ä»¶ã€‚</li>\n<li>ç¬¬äºŒæ­¥ä»ç­‰å¾…ä¸­å”¤é†’ï¼Œè¯»å–æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œå¦‚æœæ¶ˆæ¯æ‰§è¡Œæ—¶é—´æ˜¯ç°åœ¨ï¼Œåˆ™å¤„ç†æ¶ˆæ¯ã€‚å¦åˆ™è®¡ç®—æ‰§è¡Œæ—¶é—´å’Œå½“å‰çš„æ—¶é—´å·® <code>nextPollTimeoutMillis</code> ï¼Œé‡æ–°æ’å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶åœ¨ native å±‚ç­‰å¾…ï¼Œç­‰å¾…è¶…æ—¶å‚æ•°æ˜¯ <code>nextPollTimeoutMillis</code></li>\n</ol>\n<h1 id=\"nextpolltimeoutmillis\"><a class=\"anchor\" href=\"#nextpolltimeoutmillis\">#</a> nextPollTimeoutMillis</h1>\n<p><code>nextPollTimeoutMillis</code>  çœ‹ä¼¼ä¸èµ·çœ¼ï¼Œå…¶å®æ˜¯å¾ˆé‡è¦çš„å˜é‡ï¼Œå®ƒæœ‰ä¸‰ç§ç±»å‹çš„å€¼ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„å«ä¹‰ã€‚</p>\n<ol>\n<li>-1ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ²¡æ¶ˆæ¯ï¼Œnative ä½¿ç”¨ <code>wait()</code></li>\n<li>0ï¼šï¼ˆTODOï¼š ï¼‰</li>\n<li>è‡ªç„¶æ•°ï¼šæ¶ˆæ¯é˜Ÿåˆ—æœ€æ—©æ‰§è¡Œçš„æ¶ˆæ¯ï¼ˆé˜Ÿåˆ—å¤´éƒ¨çš„æ¶ˆæ¯ï¼‰åœ¨æœªæ¥ï¼Œå½“å‰æ²¡æœ‰æ¶ˆæ¯å¤„ç†ï¼Œå¯ä»¥æ­‡æ¯ã€‚native ä½¿ç”¨  <code>wait(int timeout)</code>  ï¼Œè¶…æ—¶åè‡ªåŠ¨ä»ç­‰å¾…ä¸­è¿”å›ï¼Œæ— éœ€ write äº‹ä»¶å”¤é†’ã€‚</li>\n</ol>\n<p>android.os.MessageQueue#next</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> nextPollTimeoutMillis <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token function\">nativePollOnce</span><span class=\"token punctuation\">(</span>ptr<span class=\"token punctuation\">,</span> nextPollTimeoutMillis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token comment\">// Try to retrieve the next message.  Return if found.</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>now <span class=\"token operator\">&lt;</span> msg<span class=\"token punctuation\">.</span>when<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token comment\">// Next message is not ready.  Set a timeout to wake up when it is ready.</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                    nextPollTimeoutMillis <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>when <span class=\"token operator\">-</span> now<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MAX_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                    <span class=\"token keyword\">return</span> msg<span class=\"token punctuation\">;</span><span class=\"token comment\">// Got a message.</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>             <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                    nextPollTimeoutMillis <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// No more messages.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token comment\">// A new message could have been delivered, so go back and look again for a pending message without waiting.</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            nextPollTimeoutMillis <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"prepare\"><a class=\"anchor\" href=\"#prepare\">#</a> Prepare</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/4b24b7075c896855.png\" alt=\"\" /><br />\nä½¿ç”¨ Epoll APIï¼Œåœ¨ mWakeEventFd æ³¨å†Œç›‘å¬</p>\n<h1 id=\"loop-and-handle-message\"><a class=\"anchor\" href=\"#loop-and-handle-message\">#</a> Loop And Handle Message</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/c8230250364e5395.png\" alt=\"\" /><br />\næ­¤æ—¶æ¶ˆæ¯é˜Ÿåˆ—è¿˜æ²¡æœ‰æ¶ˆæ¯ï¼Œåœ¨ <code>epoll_wait</code>  ç­‰å¾…</p>\n<h1 id=\"insert-message\"><a class=\"anchor\" href=\"#insert-message\">#</a> Insert Message</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/4b347d81a5ccef35.png\" alt=\"\" /><br />\nå¾€æ¶ˆæ¯é˜Ÿåˆ—æ’å…¥æ¶ˆæ¯åï¼Œå¾€ <code>mWakeEventFd</code>  å†™å…¥ä¸€ä¸ªæ•´æ•°ï¼Œå”¤é†’ <code>poll_wait</code> ï¼Œä»è€Œ loop å¾ªç¯ä¸­å–å‡ºæ¶ˆæ¯ï¼Œæ¥ç€å¤„ç† Messageã€‚</p>\n<h1 id=\"çº¿ç¨‹é—´é€šä¿¡\"><a class=\"anchor\" href=\"#çº¿ç¨‹é—´é€šä¿¡\">#</a> çº¿ç¨‹é—´é€šä¿¡</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/ef7b63e078f95c70.png\" alt=\"\" /><br />\né€šä¿¡çº¿ç¨‹åŒæ–¹ï¼ŒæŒæœ‰å¯¹æ–¹çš„ handler å®ä¾‹çš„å¼•ç”¨ï¼Œé€šè¿‡ handler.sendMessage å¾€å¯¹æ–¹çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼Œå¦‚æ­¤ä¸¤ä¸ªçº¿ç¨‹å°±å¯ä»¥å½¼æ­¤å‘é€æ¶ˆæ¯ï¼Œå®ç°é€šä¿¡ã€‚</p>\n<h1 id=\"æ¶ˆæ¯ä½œç”¨åŸŸ\"><a class=\"anchor\" href=\"#æ¶ˆæ¯ä½œç”¨åŸŸ\">#</a> æ¶ˆæ¯ä½œç”¨åŸŸ</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/07/be19a511e4b0ac2b.png\" alt=\"\" /><br />\nå“ªä¸ª Handler å‘é€çš„æ¶ˆæ¯ï¼Œæœ€åå‡ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä»ç”±è¯¥ Handler å¤„ç†ï¼Œæ‰€ä»¥ä¸åŒçš„ Handler å®ä¾‹ï¼Œå¯ä»¥æœ‰ç›¸åŒçš„ Whatï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚å…·ä½“å®ç°æ˜¯ <code>handler.sendMessage(message)</code>  æ—¶ï¼Œ <code>handler</code>  å¯¹è±¡ä¿å­˜åœ¨ <code>message.target</code>  å­—æ®µã€‚</p>\n<h1 id=\"threadlocal\"><a class=\"anchor\" href=\"#threadlocal\">#</a> ThreadLocal</h1>\n<h1 id=\"é›·åŒº\"><a class=\"anchor\" href=\"#é›·åŒº\">#</a> é›·åŒº</h1>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p>[1] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9tZWRpdW0uY29tL0Bjb3B5Y29uc3RydWN0L3RoZS1tZXRob2QtdG8tZXBvbGxzLW1hZG5lc3MtZDlkMmQ2Mzc4NjQy\">https://medium.com/@copyconstruct/the-method-to-epolls-madness-d9d2d6378642</span><br />\n[2 ] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9tYW43Lm9yZy9saW51eC9tYW4tcGFnZXMvbWFuNy9lcG9sbC43Lmh0bWw=\">https://man7.org/linux/man-pages/man7/epoll.7.html</span><br />\n[3] The Design of the UNIX Operating System<br />\n[4] /base/core/java/android/os/MessageQueue.java<br />\n[5] /frameworks/base/core/jni/android_os_MessageQueue.cpp<br />\n[6] /system/core/libutils/Looper.cpp</p>\n",
            "tags": [
                "Android",
                "Android, message loop, æ¶ˆæ¯å¾ªç¯"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/02/04/App-Lock-Architecture/",
            "url": "https://limxtop1989.github.io/limxtop/2023/02/04/App-Lock-Architecture/",
            "title": "åº”ç”¨é”æ¶æ„",
            "date_published": "2023-02-04T05:05:02.000Z",
            "content_html": "<h1 id=\"éœ€æ±‚æè¿°\"><a class=\"anchor\" href=\"#éœ€æ±‚æè¿°\">#</a> éœ€æ±‚æè¿°</h1>\n<p>æä¾›ç»™æŒ‡å®šåº”ç”¨åŠ é”æœºåˆ¶ï¼Œåº”ç”¨å¤„äºä¸Šé”çŠ¶æ€æ—¶ï¼Œå¯åŠ¨è¯¥åº”ç”¨éœ€è¦åšè§£é”æ“ä½œï¼Œå¦åˆ™ä¸ä»…ç”¨æˆ·ä¸èƒ½ä¸ä¹‹äº¤äº’ï¼Œå…¶åº”ç”¨ç•Œé¢ä¹Ÿä¸å¯è§ï¼ŒåŒ…æ‹¬åœ¨ SystemUI çš„ Recent ç•Œé¢ï¼Œä¹Ÿä¸å¯è§å…¶ç¼©ç•¥å›¾ã€‚</p>\n<h1 id=\"å…¥èŒæ¥æ‰‹çš„ç¬¬ä¸€ç‰ˆæ¶æ„\"><a class=\"anchor\" href=\"#å…¥èŒæ¥æ‰‹çš„ç¬¬ä¸€ç‰ˆæ¶æ„\">#</a> å…¥èŒæ¥æ‰‹çš„ç¬¬ä¸€ç‰ˆæ¶æ„</h1>\n<p>ActivityThread handleActivityResume å‘é€å¹¿æ’­ç»™åº”ç”¨é”çš„æ¥æ”¶å™¨ï¼Œå¯åŠ¨ UnlockService å»æŸ¥è¯¢æ•°æ®åº“åˆ¤æ–­æ˜¯å¦å½“å‰å¯åŠ¨çš„ Activity æ‰€åœ¨åº”ç”¨æ˜¯å¦æ˜¯ä¸Šé”çŠ¶æ€ã€‚å›¾æˆ‘å°±ä¸ç”»äº†ï¼Œé‚£ä»£ç ä¸å€¼å¾—æŠ•å…¥æ—¶é—´ç”»æ¶æ„å›¾ã€‚ä¸»è¦ç¼ºç‚¹æœ‰</p>\n<ol>\n<li>ç›‘å¬åº”ç”¨å¯åŠ¨ï¼Œåˆ¤æ–­æ˜¯å¦ä¸Šé”çŠ¶æ€è€—æ—¶ï¼Œè¢«é”åº”ç”¨å·²ç»å¯åŠ¨å®Œæ¯•ï¼Œç”¨æˆ·å¯è§å¯èƒ½é•¿è¾¾ä¸€ç§’é’Ÿåï¼ŒUnlockActivity æ‰å¯åŠ¨è¦†ç›–åœ¨ä¸Šé¢ã€‚</li>\n<li>UnlockActivity &amp; ä¸Šé”çŠ¶æ€çš„ Activity ä¸åœ¨åŒä¸€ä¸ª ActivityTaskï¼ŒUnlockActivity ç•Œé¢æŒ‰ backï¼Œåªèƒ½å¼ºåˆ¶æ˜¾ç¤º Launcherï¼Œè€Œä¸æ˜¯ä¸Šä¸€ä¸ª Activityã€‚</li>\n<li>åº”ç”¨é”æ•°æ®å¹¶æ²¡æœ‰æä¾› API ç»™ SystemUIã€‚</li>\n</ol>\n<h1 id=\"ç¬¬äºŒç‰ˆé‡æ„æ¶æ„\"><a class=\"anchor\" href=\"#ç¬¬äºŒç‰ˆé‡æ„æ¶æ„\">#</a> ç¬¬äºŒç‰ˆé‡æ„æ¶æ„</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/726cb4bd64b70c2f.png\" alt=\"\" /><br />\nåœ¨ AMS çš„ AppLock æ¨¡å—ï¼Œç»‘å®š AppLock çš„ Serviceï¼Œå¹¶ä¿æŒè¿æ¥ï¼ŒActivity çš„å¯åŠ¨äº‹ä»¶éƒ½é€šçŸ¥ç»™ AppLockã€‚AppLock å®ç° ContentProvider å¯¹å¤–æä¾›æ•°æ®è®¿é—® APIï¼Œä»¥æ­¤è§£å†³ç¬¬ä¸€ç‰ˆ 1 &amp; 3 é—®é¢˜ã€‚<br />\né—ç•™ç¼ºç‚¹ï¼š</p>\n<ol>\n<li>å¯¹äºéœ€è¦ç™»é™†ç­‰æ“ä½œçš„äº’è”ç½‘åº”ç”¨ï¼Œä¼šå¯åŠ¨ MainActivity åï¼Œåˆ¤æ–­æ˜¯è·³è½¬ç™»é™† Activityï¼Œç”±äºè¿ç»­å¯åŠ¨ä¸¤ä¸ªä¸Šé”çŠ¶æ€çš„ Activityï¼Œä¸¤ä¸ª UnlockActivity ä¹Ÿéšä¹‹è€Œæ¥ï¼Œå±å¹•é—ªç¼©ã€‚å¯¹æ­¤ï¼Œå¯ä»¥å•ç‹¬ä¸º MainActivity åŠ å…¥è¿‡æ»¤åˆ—è¡¨ï¼Œä¸æ£€æµ‹ä¸Šé”è§£å†³ï¼Œä½†è¿™å¹¶éæ˜¯å¥½çš„æ–¹æ¡ˆã€‚</li>\n</ol>\n<h1 id=\"ç¬¬ä¸‰ç‰ˆé‡æ„æ¶æ„\"><a class=\"anchor\" href=\"#ç¬¬ä¸‰ç‰ˆé‡æ„æ¶æ„\">#</a> ç¬¬ä¸‰ç‰ˆé‡æ„æ¶æ„</h1>\n<p><img data-src=\"https://s3.bmp.ovh/imgs/2023/02/04/f55970d40056afff.png\" alt=\"\" /><br />\nå¼€æœºåï¼Œè¯»å–å¹¶ç›‘å¬åº”ç”¨é”çš„æ•°æ®ï¼Œï¼ˆä¸»è¦æ˜¯åº”ç”¨æ˜¯å¦æ˜¯ä¸Šé”çŠ¶æ€ï¼‰ï¼Œåº”ç”¨å¯åŠ¨åï¼Œåœ¨ AMS æ£€æµ‹æ˜¯å¦ä¸Šé”çŠ¶æ€ï¼Œå°† Intent ä¿ç•™åœ¨ IntentSenderï¼ŒåŸå§‹ Intent ç¯¡æ”¹ä¸ºå¯åŠ¨ UnlockActivity çš„ Intentï¼Œåˆ¶å®šå½“å‰ ActivityTask å¯åŠ¨ UnlockActivityï¼Œå¦‚æ­¤ç§»èŠ±æ¥æœ¨ã€‚è§£é”åï¼Œä» Intent å–å‡º IntentSender é‡æ–°å‘é€è¯·æ±‚ç»™ AMSã€‚è‡³æ­¤ï¼Œåº”ç”¨é”å‡ ä¹å®Œç¾æ— ç¼ºï¼Œä¹…ç»æµ‹è¯•åŒå­¦çš„è¯¸å¤šè€ƒéªŒã€‚</p>\n",
            "tags": [
                "App Lock, AMS, ActivityManagerService, åº”ç”¨é”, åº”ç”¨é”æ¶æ„"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/01/08/sunset/",
            "url": "https://limxtop1989.github.io/limxtop/2023/01/08/sunset/",
            "title": "æ™šéœ",
            "date_published": "2023-01-08T04:01:26.000Z",
            "content_html": "<p><img data-src=\"https://s3.uuu.ovh/imgs/2023/12/11/632a2a295ccdc95a.jpg\" alt=\"\" /></p>\n<p>ä½œè€…ï¼šç«å±±<br />\nå…¬ä¼—å·ï¼šç«å±±ä¸æœ¨æ˜Ÿ<br />\nåŸæ–‡é“¾æ¥ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvYUlNYnFxSGRNbUpsM3FsbWdwTUYzQQ==\">https://mp.weixin.qq.com/s/aIMbqqHdMmJl3qlmgpMF3A</span></p>\n<p>è¿™å¤©æ™šä¸Šï¼Œå¤©ç©ºå‡ºç°äº†ç¾ä¸½çš„é¢œè‰²ï¼Œä»é«˜æ¶æ¡¥é—´æœ›åˆ°çš„é‚£ä¸€ç‰‡å¤©ï¼Œå…¶è‰²å½©è®©äººèµå¹ã€‚èµ°ä¸‹è¿‡è¡—å¤©æ¡¥çš„æ¥¼æ¢¯ï¼Œæ‹¥æŒ¤ç ´æ—§çš„å‡ºç§Ÿæˆ¿å±‹æ¸æ¸é€¼è¿‘æˆ‘çš„é¼»å°–ï¼Œæˆ‘çªç„¶æƒ³èµ·ä¸€ä¸ªæ±‰å­—ï¼šéœã€‚é‚£ç‰‡ç¾ä¸½çš„é¢œè‰²æ˜¯éœå…‰æˆ–å½©éœã€‚åŒæ—¶æˆ‘æƒ³èµ·æˆ‘ä¹…æœªè§é¢çš„å¦¹å¦¹ï¼Œå¥¹çš„åå­—å°±å«æ˜éœã€‚</p>\n<p>æ™šä¸Šï¼Œæˆ‘æ•ç€åŒè‡‚èººåœ¨ç‡ çƒ­çš„å‡‰å¸­ä¸Šï¼Œéš”å£æˆ¿é—´é‡Œéº»å°†æ“åŠ¨çš„å£°éŸ³è¢­å…¥æˆ‘ç§Ÿçš„è¿™ä¸ªæˆ¿é—´é‡Œã€‚æˆ‘å¾ˆæƒ³å†çœ‹ä¸€æ¬¡é‚£ç¾å¦™çš„é¢œè‰²ï¼Œæˆ‘å¾ˆæƒ³ç”¨ç›¸æœºæŠŠå®ƒæ•æ‰ä¸‹æ¥ã€‚æ­¤åˆ»å¤–è¾¹çš„å¤©ç©ºæ—©å·²æ¼†é»‘ä¸€ç‰‡ï¼Œé‚£å…‰æ³½æ—©å·²æ¶ˆé€ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå¹³å‡¡è€Œä¹å‘³çš„é»‘å¤œã€‚</p>\n<p>æ˜ŸæœŸæ—¥æˆ‘ä¸ç”¨ä¸Šç­ï¼Œä¸Šäº†å¾€å—è¾¹å²›å±¿å»çš„åœ°é“ã€‚ä¸€ä¸ªäººï¼Œæˆ‘èµ°åˆ°äº†æ±Ÿè¾¹ï¼Œå¯¹å²¸ä»æ˜¯æ‹¥æŒ¤çš„å‡ºç§Ÿå±‹ï¼Œè½®èˆ¹åœ¨æ±Ÿé¢é©¶è¿‡ã€‚æˆ‘åœ¨å ¤å²¸ä¸Šåäº†ä¸‹æ¥ï¼Œæ‰‹ä¾§æ”¾ç€å‘æœ‹å‹å€Ÿæ¥çš„ç›¸æœºã€‚æˆ‘æƒ³å¦‚æœå®ƒåœ¨è¿™ä¸ªé»„æ˜å‡ºç°ï¼Œåœ¨å¦‚æ­¤å¹¿é˜”çš„å¤©ç©ºä¸‹ä¸å®ƒé‚‚é€…ä¼šæ˜¯ä¸€ä»¶å¤šä¹ˆå£®è§‚çš„äº‹ã€‚æˆ‘è¦æ•æ‰åˆ°å®ƒäºŒåƒç±³é•¿çš„å…‰æ³½ä¸ç¥å¥‡ã€‚</p>\n<p>é‚£ä¸€æ—¥æ˜¯æƒ¨æ·¡æ”¶åœºã€‚å®ƒæ²¡æœ‰å‡ºç°ã€‚å…«ç‚¹æ—¶å€™ï¼Œæˆ‘æ”¶æ‹¾æ°´å£¶å’Œç›¸æœºï¼Œç¦»å¼€å ¤å²¸ï¼Œé‡æ–°å‘å¤§é™†èµ°å»ã€‚</p>\n<p>å¤©è‰²æ˜æš—ï¼Œæˆ‘æœ‰äº›è®¤ä¸å‡ºå›å»çš„è·¯ã€‚æˆ‘è¸ä¸Šä¸€æ¡ç¢çŸ³ç Œå°±çš„å°å¾„ï¼Œå®ƒçš„å¦ä¸€å¤´å‘æ ‘æ—æ·±å¤„å»¶ä¼¸ã€‚é£ä»¤æ ‘æ—å“—å•¦ä½œå“ã€‚æˆ‘å‡è§†é™¡èµ·çš„æ¶ˆå¤±åœ¨æ ‘æ—é‡Œçš„è·¯çš„å°½å¤´ï¼Œæç„¶è§‰å¾—æœ‰äººæ­£ä»é‚£è¾¹èµ°è¿‡æ¥ã€‚æˆ‘æœ‰ä¸€ä¸ªé¢„æ„Ÿï¼Œæ¥äººæˆ‘ååˆ†ç†Ÿæ‚‰ã€‚æˆ‘æŠµæŠ—ä½è¿™ä¸€å¼ºçƒˆçš„å¹»è§‰ï¼Œæ‰­è¿‡å¤´æ¨ªè¶Šè¿™æ¡å°å¾„å‘è¿œå¤„çš„æŸæ²¹é©¬è·¯èµ°å»ã€‚</p>\n<p>æˆ‘çš„å·¥ä½œæ˜¯å¤–è´¸å…¬å¸é‡Œçš„è·Ÿå•ã€‚å¤–å›½å®¢æˆ·åœ¨æˆ‘ä»¬å…¬å¸ä¸‹å•ä»¥åï¼Œæˆ‘ä»¬è´Ÿè´£å¯»æ‰¾å·¥å‚ï¼Œç›‘ç®¡è´¨é‡ï¼Œç›´è‡³äº§å“é¡ºåˆ©ä¸ŠæŸœç¦»å²¸ï¼Œå’Œå®¢æˆ·äº¤ä»˜æå•ã€‚</p>\n<p>å…¬å¸é‡Œçš„äººè„¾æ°”éƒ½å¾ˆåï¼Œå› ä¸ºå·¥ä½œç¹å¿™è€Œæ²‰é‡ã€‚æˆ‘ç®—æ˜¯æ¯”è¾ƒæ¸©å’Œçš„ï¼Œæ‰€ä»¥è¯´è¯æ²¡äººæƒ³å¬ã€‚æˆ‘çš„è€æ¿å¯¹æˆ‘è¯´å¿…é¡»è¦å˜å¾—å¼ºç¡¬ï¼Œå¯¹å·¥å‚ä¸èƒ½å¿ƒè½¯ï¼Œè¿™äº›å‚å®¶éƒ½æ˜¯äº›è´ªå©ªå’Œå¼„è™šä½œå‡çš„äººï¼Œæ²¡æœ‰ä»€ä¹ˆå€¼å¾—åŒæƒ…ã€‚</p>\n<p>åŠå…¬å®¤é‡Œå’Œæˆ‘å…³ç³»å‹å¥½çš„ä¸€ä¸ªå¥³å­©å­ååœ¨æˆ‘çš„å¯¹é¢ã€‚ä¸Šä¸ªç¤¼æ‹œæ—¥æˆ‘å’Œå¥¹ååœ¨èŒ¶é¤å…é‡Œï¼Œå¥¹å‘Šè¯‰æˆ‘å¥¹æ‹…å¿ƒå‡ºä¸äº†æ‰‹å¤´ä¸Šé‚£æ‰¹è´§ä¼šè¢«è€æ¿è´£éª‚ã€‚æˆ‘é»˜é»˜å¬ç€ï¼ŒæŠŠé‚£ç¢—æ¤°æ±è¥¿ç±³éœ²ä¸€å‹ºä¸€å‹ºåƒå®Œã€‚</p>\n<p>æˆ‘çŸ¥é“åœ¨é‚£æ¡å°å¾„ä¸Šå‘æˆ‘èµ°è¿‘çš„æ˜¯è°ã€‚é‚£åªèƒ½æ˜¯æˆ‘çš„å¦¹å¦¹ã€‚æˆ‘å¾ˆåæ‚”è‡ªå·±åšè¿‡çš„ä¸€äº›äº‹ï¼Œæ¯”å¦‚åå‡ å²æ—¶å’Œå¥¹ä¸€èµ·ç”¨æ±¤æ°´å–‚å¼ƒçŒ«ï¼Œå¥¹æ›´å°çš„æ—¶å€™ï¼Œæˆ‘é¢†ç€å¥¹åˆ°å¤„æ¸¸è¡ç­‰ç­‰ã€‚</p>\n<p>æœ‰ä¸€ä»¶äº‹æˆ‘å¾ˆä¸æƒ…æ„¿æƒ³èµ·ã€‚å¤§çº¦åœ¨åˆä¸‰çš„æ—¶å€™ï¼Œæˆ‘æ—©ä¸Šå’Œå¥¹ä¸€èµ·å‡ºé—¨å»ä¸Šå­¦ï¼Œå¥¹ä»æ¥¼æ¢¯ä¸Šæ»‘å€’ï¼Œååœ¨åœ°ä¸Šå“‡å“‡å¤§å“­ã€‚åœ¨å……æ»¡ç—›è‹¦å’Œè‡ªå‘çš„åå…­å²çš„é‚£ä¸ªæ¸…æ™¨ï¼Œæˆ‘æ²¡æœ‰åƒä»¥å¾€ä¸€æ ·èµ¶ç´§å»æŠ±èµ·æˆ‘çš„å¦¹å¦¹ï¼Œæˆ‘åªæ˜¯ç«™åœ¨æ¥¼æ¢¯çš„é«˜å¤„ï¼Œå¯¹å¥¹å†·é…·è¯´å‡º â€”â€” ä½ è‡ªå·±çˆ¬èµ·æ¥ã€‚</p>\n<p>ä»æ­¤ä»¥åï¼Œæˆ‘çš„å¦¹å¦¹å’Œæˆ‘ç–ç¦»èµ·æ¥ã€‚è€Œæˆ‘å¿µå®Œå¤§å­¦ï¼Œå¹¶åˆ°å¦ä¸€ä¸ªåŸå¸‚è°‹ç”Ÿä»¥åï¼Œå‡ ä¹æŠŠå¥¹å¿˜è®°äº†ã€‚æ¯æ¬¡è¿‡å¹´å›å®¶ï¼Œæˆ‘éƒ½ä¼šåœ¨å®¢å…é‡Œè§åˆ°ä¸€ä¸ªå¹³å‡¡çš„å¥³å­©å­ï¼Œå’Œè¿œæ–¹å½’æ¥çš„çˆ¶äº²å…„å¼Ÿé—²èŠå‡ å¥ä»¥åå°±æˆ´ç€è€³æœºèº²è¿›æˆ¿é—´é‡Œã€‚é‚£ä¸ªæˆ¿é—´é‡Œæ»¡æ˜¯è¨€æƒ…å°è¯´ã€é•¿æ¯›ç†Šã€éŸ©å›½æ˜æ˜Ÿçš„è´´çº¸ã€‚</p>\n<p>å¤©æ°”é¢„æŠ¥èƒ½å‘Šè¯‰æˆ‘çš„åªæ˜¯ä½•æ—¶æœ‰é›¨ã€å¤šäº‘ï¼Œé˜´å¤©æˆ–èµ·é£ã€‚å®ƒä¸èƒ½å‘Šè¯‰æˆ‘ä½•æ—¶å¤©ç©ºä¼šå‡ºç°å½©éœã€‚åŸå¸‚é‡Œæ²¡æœ‰äººå…³æ³¨è¿™ä¸ªã€‚</p>\n<p>æ¯å¤©ä¸‹ç­åä¸€èµ°å‡ºåŠå…¬å®¤ï¼Œæˆ‘éƒ½æŠ¬å¤´æœå¯»å¤©ç©ºï¼ŒæœŸå¾…åœ¨è¢«æ¥¼æˆ¿å’Œé«˜æ¶æ¡¥åˆ†å‰²çš„é—´éš™é‡Œï¼Œèƒ½æ‰¾åˆ°å®ƒçš„è¸ªå½±ã€‚</p>\n<p>æŸä¸€æ—¥ï¼Œæˆ‘ååœ¨å…¬å…±æ±½è½¦ä¸Šã€‚è½¦å¢é‡Œå‡è‚¥èŒ¶çš„å¹¿å‘Šå£°éœ‡è€³æ¬²è‹ï¼Œä¸€ä¸ªä¸­å¹´å¦‡å¥³åœ¨å°–å£°è¯´è¯ã€‚æˆ‘çœ‹ç€çª—å¤–ï¼Œè½¦é©¶ä¸Šé«˜æ¶æ¡¥ï¼Œæ¥¼æˆ¿é˜³å°å¸ƒæ»¡ç§¯å°˜ï¼Œçª—æˆ·ç´§é—­ï¼Œæˆ‘ä¸èƒ½æƒ³è±¡æ€ä¹ˆæœ‰äººå¯ä»¥ç¡åœ¨å’Œé©¬è·¯åªéš”ä¸€å±‚çª—æˆ·çš„åœ°æ–¹ï¼Œä»–ä»¬æ€ä¹ˆå¯ä»¥å…¥çœ ã€‚ä»–ä»¬ä¼šå¦è¿å‘æ¢¦ä¹Ÿæ˜¯æ¢¦åˆ°è‡ªå·±åœ¨é©¬è·¯ä¸Šæˆ–å…¬å…±æ±½è½¦ä¸Šå‘¢ï¼Ÿå¯¹äºæˆ‘ï¼Œæˆ‘æ˜¯æ— æ³•åœ¨è¿™æ ·çš„æ¥¼æˆ¿ä¸­å…¥ç¡çš„ï¼Œæˆ‘ä¸èƒ½å¿å—æ±½è½¦å¼•æ“æŒç»­éœ‡åŠ¨æ‰€å¼•èµ·çš„é‚£ç§æ™•çœ©æ„Ÿã€‚</p>\n<p>çªç„¶ï¼Œåœ¨æ¥¼æˆ¿çš„é—´éš™é‡Œï¼Œå®ƒå‡ºç°äº†ï¼å…¬å…±æ±½è½¦æ°å¥½åœ¨è¿™æ—¶å€™åˆ°ç«™ï¼é—¨ä¸€æ‰“å¼€ï¼Œæˆ‘å°±æ‰‹æç›¸æœºï¼Œä¸€è·ƒè€Œå‡ºâ€¦â€¦</p>\n<p>æˆ‘è¢«åè¾¹çš„è½¦å­æ’åˆ°äº†ã€‚å¤©æ—‹åœ°è½¬ï¼ŒæŸäº›äººå¯¹æˆ‘çš„å›´è§‚è®®è®ºå£°ä¸­ï¼Œæˆ‘æƒ³èµ·è‡ªå·±åœ¨åå››å²ï¼Œè¯»åˆä¸€çš„æ—¶å€™ï¼Œæœ‰ä¸€æ®µæ—¶é—´æ¯å¤©å‚æ™šéƒ½éª‘è‡ªè¡Œè½¦è½½å¦¹å¦¹å»è¥¿è¾¹çš„å°å­¦æ“åœºã€‚é‚£é‡Œæœ‰ä¸€ç‰‡å¹¿é˜”çš„ç”°é‡ï¼Œæœ‰ä¸è¢«æˆ¿å±‹é˜»éš”çš„å¤©ç©ºï¼Œé‚£é‡Œå‡ ä¹æ¯æ™šéƒ½ä¼šæœ‰è®©æˆ‘ä»¬ç¿˜é¦–ä»¥å¾…çš„æ™šéœã€‚</p>\n<p>å¦¹å¦¹å–œæ¬¢æˆ‘è½½å¥¹å»çœ‹æ—¥è½ï¼Œé™¤äº†å¤©ç©ºç¾ä¸½ï¼Œä¹Ÿè®¸è¿˜å› ä¸ºæˆ‘å¦‚æœæœ‰ä¸¤è§’é’±ï¼Œæ€»ä¼šä¸ºå¥¹ä¹°ä¸€æ¡é›ªæ¡ã€‚å¥¹ä¼šè¯´ï¼šâ€œä½ åƒä¸Šé¢çš„ä¸€æˆªï¼Œä¸‹é¢çš„ä¸€æˆªæ˜¯æˆ‘çš„ã€‚â€</p>\n",
            "tags": [
                "æ™šéœ"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2023/01/08/azhen/",
            "url": "https://limxtop1989.github.io/limxtop/2023/01/08/azhen/",
            "title": "é˜¿ç",
            "date_published": "2023-01-08T03:53:54.000Z",
            "content_html": "<p><img data-src=\"https://s3.uuu.ovh/imgs/2023/12/11/ccc6a7dd9894f5f3.jpeg\" alt=\"\" /></p>\n<p>ä½œè€…ï¼šç«å±±<br />\nå…¬ä¼—å·ï¼šç«å±±ä¸æœ¨æ˜Ÿ<br />\nåŸæ–‡é“¾æ¥ï¼š<span class=\"exturl\" data-url=\"aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvVmdmTGdnbEF2aTJVWWNMNnczNkpldw==\">https://mp.weixin.qq.com/s/VgfLgglAvi2UYcL6w36Jew</span></p>\n<p>æ²¡æœ‰ä»»ä½•çš„å˜åŒ–ï¼Œç–²æƒ«çš„ä»–ä¾æ—§å›åˆ°äº†å•é—´ï¼Œå…³ä¸Šé—¨ï¼Œä»–åä¸‹æ¥ã€‚è€Œå¥³å‹å‘Šè¯‰ä»–ï¼šå¥¹æ€€å­•äº†ï¼Œå­©å­ä¸æ˜¯ä»–çš„ã€‚</p>\n<p>ä»–å¾€æ¥¼ä¸‹è·‘å»ï¼Œæ‰‹é‡Œæç€æ»´è¡€çš„æ°´æœåˆ€ï¼Œä»–ç©¿è¿‡äººç¾¤å’Œä¹ç¡çš„è½¦å¢ï¼Œè·‘è¿‡æ¸…æ–°çš„ç”°é‡ï¼Œèº²åˆ°äº†è€å®¶æˆ¿å­çš„å†œå…·æˆ¿é‡Œï¼Œé”„å¤´å’Œæ³¥å¢™ä¿æŠ¤ä»–ç¡å»ã€‚å„¿æ—¶å–œæ¬¢è¿‡çš„ç©¿ç€çº¢è‰²è¢œå­çš„å°å¥³å­©åœ¨æ¢¦é‡Œå®£å¸ƒä»–æ— ç½ªã€‚</p>\n<p>è¢«æ€æ­»çš„å¥³äººåœ¨å‡ºç§Ÿå±‹é‡Œå¤æ´»ï¼Œä¸æ˜¯å› ä¸ºä¿¡ä»°å’Œé­”æ³•ï¼Œä»…ä»…æ˜¯å› ä¸ºå¥¹è¦èº²å¼€æ˜æ—¥æ—©ä¸Šè¿‡æ¥æ”¶æˆ¿ç§Ÿçš„æˆ¿ä¸œã€‚</p>\n<p>è¿™ä¸ªçƒ«ç€å¤´å‘çš„ä¸°è…´å¥³äººåå«é˜¿çï¼Œè‚šå­é‡Œæœ‰äº†ä¸€ä¸ªå­©å­ã€‚å¥¹æ‹¿äº›å«ç”Ÿçº¸æŠŠèƒ¸å£çš„çªŸçª¿æ‚ä½ï¼Œæèµ·è¡ŒæåŒ…ï¼Œç©¿ç€æ‹–é‹ç¦»å¼€äº†å¥¹å’Œç‹—å±å¼ºè¿‡äº†ä¸¤å¹´çš„æˆ¿é—´ã€‚ç»¿è‰²é“é—¨å¾ˆæ–°å¾ˆå…‰æ»‘ï¼Œé”èˆŒæ‰£åˆçš„å£°éŸ³å¾ˆæ¸…è„†ã€‚</p>\n<p>å¥¹æ‹–ç€è¡€è¿¹ï¼Œåˆ°èœå¸‚åœºä¹°äº†ç¾Šè‚‰å’Œèåœï¼Œæ‰“ç”µè¯ç»™é˜¿çŒ«ï¼Œè¯´å¥¹ä»Šæ™šè¿‡å»ç…®é¥­ç»™ä»–åƒã€‚é˜¿çŒ«è¯´ä»Šæ™šä¸æ–¹ä¾¿ï¼Œä»–æ­£åœ¨å¤–åœ°å‡ºå·®ã€‚å¥¹è¯´å¥¹ç°åœ¨æ— å®¶å¯å½’äº†ï¼Œç°åœ¨å¥¹åªå‰©ä¸‹ä»–äº†ï¼Œä»–ä¸èƒ½ä¸è¦å¥¹ã€‚</p>\n<p>é˜¿çŒ«è¯´ä»–çš„ç¡®æ˜¯åœ¨å¤–åœ°ï¼ŒåŠå¥¹å…ˆå»æœ‹å‹é‚£é‡Œä½å‡ å¤©ã€‚å¥¹è¹²åœ¨å¢™æ ¹ï¼Œè¯´å¥¹æƒ³è§ä»–ï¼Œçœ¼æ³ªå¼•å¾—è·¯äººä¾§ç›®ã€‚é˜¿çŒ«è¯´ä»–æ²¡åŠæ³•ã€‚</p>\n<p>å‡ å¤©ä»¥åï¼Œå¥¹è¿‡å»æ‰¾é˜¿çŒ«ã€‚æ²¡æœ‰äººåº”é—¨ã€‚æ‰“ç”µè¯è¿‡å»ï¼Œä»–è¯´ä»–æ¬äº†ã€‚å¥¹è¯´ï¼šä½ æ€ä¹ˆæ²¡æœ‰å’Œæˆ‘è¯´èµ·è¿‡ï¼Ÿé˜¿çŒ«è¯´ä»–å¿˜è®°äº†ã€‚å¥¹é—®ä»–ç°åœ¨åœ¨å“ªé‡Œï¼Œä»–è¯´åœ¨å®¶ã€‚å¥¹é—®ï¼šä½ çš„å®¶åœ¨å“ªé‡Œï¼Ÿæˆ‘è¿‡å»æ‰¾ä½ ã€‚é˜¿çŒ«æ²‰é»˜äº†ä¸€é˜µï¼Œè¯´ï¼šä½ ä¸ç”¨æ¥æ‰¾æˆ‘ï¼Œè¿˜æ˜¯å»åŒ»é™¢å •èƒå§â€¦â€¦</p>\n<p>ä¸ä¹…ï¼Œäººä»¬çœ‹åˆ°ä¸€ä¸ªè“¬å¤´å¢é¢çš„å¥³äººï¼Œç©¿ç€ç¡è£™ï¼Œå§åœ¨æ¨ç®•åœ°é“ç«™ C å‡ºå£è¾¹ä¸Šï¼Œè¿™ä¸€æ¬¡å¥¹ç»ˆäºæ­»äº†ï¼Œæ±¡é»‘çš„å³æ‰‹æ”¥ç€ä¸€ä¸ªèƒ¶è¢‹ï¼Œé‡Œè¾¹æ˜¯ä¸€æ–¤å·²ç»å‘è‡­çš„ç¾Šè‚‰ï¼Œèåœä¸Šæœ‰å‡ ä¸ªç‰™å°ï¼Œè€Œå·¦æ‰‹æ”¾åœ¨è‚šçš®ä¸Šï¼Œè¿™åªæ‰‹é‚£ä¹ˆå¹²å‡€ã€é‚£ä¹ˆæ¸©æŸ”ã€‚</p>\n",
            "tags": [
                "é˜¿ç"
            ]
        },
        {
            "id": "https://limxtop1989.github.io/limxtop/2022/12/23/next-pole/",
            "url": "https://limxtop1989.github.io/limxtop/2022/12/23/next-pole/",
            "title": "ä¸‹ä¸€æ£’",
            "date_published": "2022-12-23T14:24:25.000Z",
            "content_html": "<p>Author: å¨å€ (æ²ˆè¶…ï¼‰<br />\nWechatID: abelkid</p>\n<p>çˆ¹ï¼šå›½å®¶å®ˆæŠ¤äº†æˆ‘ä»¬ä¸‰å¹´ï¼Œå°½åŠ›äº†ï¼Œç°åœ¨æ¯ä¸ªäººéƒ½æ˜¯è‡ªå·±å¥åº·çš„ç¬¬ä¸€è´£ä»»äººï¼Œå‰©ä¸‹çš„æ—¥å­è¦é è‡ªå·±äº†ã€‚æˆ‘é€šè¿‡åŒ»é™¢çš„ç†Ÿäººå±¯äº†ä¸€æ‰¹è¯ï¼Œéšæ—¶æœ‰ç—‡çŠ¶äº†ä¹Ÿä¸æ€•æ²¡åºŠä½ã€‚<br />\næˆ‘ï¼šåšå¥½æ—¥å¸¸é˜²æŠ¤ï¼Œå¥¥å¯†å…‹æˆä¸å¯æ€•ã€‚æ­£å¸¸å¤‡è¯å°±è¡Œï¼Œä¸è¦å±¯è¯ã€‚<br />\nçˆ¹ï¼šå¹´è½»äººå°±æ˜¯æ²¡æœ‰ç”Ÿæ´»ç»éªŒã€‚<br />\næˆ‘ï¼šä»¥å‰å±¯æ¿è“æ ¹ã€å±¯ç™½é†‹ã€å±¯ç›ï¼Œè¿™äº›åé¢ç»éªŒæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å­¦åˆ°ä»€ä¹ˆæ•™è®­ã€‚<br />\nçˆ¹ï¼šå‚»ç“œï¼Œåˆ«äººéƒ½åœ¨å±¯è¯ä½ ä¸å±¯ï¼Œåˆ°æ—¶å€™ä½ å°±ä¹°ä¸åˆ°è¯ã€‚<br />\næˆ‘ï¼šæ‰€ä»¥æ˜çŸ¥é“æ˜¯ä¸€éƒ¨åˆ†äººçš„è¡Œä¸ºå¯¼è‡´å¦ä¸€éƒ¨åˆ†äººä¹°ä¸åˆ°è¯ã€‚<br />\nä¸å±¯è¯æ‰èƒ½è®©å¤§å®¶éƒ½æœ‰è¯ã€‚<br />\nçˆ¹ï¼šå­©å­ï¼Œè¿™ä¸ªç¤¾ä¼šå°±æ˜¯äººä¸äººçš„ç«äº‰ï¼Œèµ„æºæ˜¯æœ‰é™çš„ï¼Œä½ æœ‰äº†æˆ‘å°±æ²¡æœ‰ã€‚<br />\næˆ‘ï¼šæˆ‘ä»¬è®©æ¸¡å‡ºéƒ¨åˆ†æƒç›Šç»„æˆç¤¾ä¼šï¼Œæ˜¯å› ä¸ºç¤¾ä¼šèƒ½å¤Ÿè®©å…¶ä¸­çš„æ¯ä¸ªäººéƒ½å¾—åˆ°è¶…å‡ºä¸ªäººéƒ¨åˆ†çš„æƒç›Šå’Œå¸®åŠ©ï¼Œè¿™æ˜¯ä¸€ä»½å…¬å…±å¥‘çº¦ã€‚<br />\næˆä¸ºåˆ©å·±ä¸»ä¹‰è€…åªæ”«å–å¥½å¤„è€ŒæŸå®³å…¶ä»–çš„äººåˆ©ç›Šï¼Œä¼šç ´åè¿™ä»½å¥‘çº¦ã€‚å› ä¸ºåªè¿½æ±‚ç«äº‰å°±ä¸éœ€è¦ç»„æˆç¤¾ä¼šï¼Œæ£®æ—æ³•åˆ™å°±å¤Ÿäº†ã€‚<br />\næ›´ä½•å†µç«äº‰åº”è¯¥æ˜¯ç«äº‰æŠŠç¤¾ä¼šè›‹ç³•åšå¤§çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯æŠ¢å¤ºè›‹ç³•çš„èƒ½åŠ›ã€‚æˆ‘ä»¬å‘å±•ç”Ÿäº§åˆ°ä»Šå¤©ï¼Œä¸æ˜¯é‚£ä¸ªç‰©èµ„åŒ®ä¹çš„ç¤¾ä¼šäº†ã€‚</p>\n<p>çˆ¹ï¼šé”™ï¼Œå³ä½¿èµ„æºä¸åŒ®ä¹ï¼Œä¹Ÿä¾ç„¶æ˜¯æŒæ¡åœ¨éƒ¨åˆ†äººçš„æ‰‹é‡Œã€‚ä½ çœ‹é‚£ä¹ˆå¤šçš„ç©ºæˆ¿å­ï¼Œéƒ½æ˜¯èµ„æœ¬çš„ç‚’ä½œï¼Œèµ„æœ¬å®¶æ‰æ˜¯åé€äº†ã€‚<br />\næˆ‘ï¼šä½ è§‰å¾—æ˜¯ä»–ä»¬æŠ¬é«˜äº†æˆ¿ä»·ï¼Ÿ<br />\nçˆ¹ï¼šä»–ä»¬æŠ¬é«˜äº†æˆ¿ä»·ï¼Œä»–ä»¬é€ æˆäº†å¤±ä¸šï¼Œä»–ä»¬å¯¼è‡´äº†è…è´¥ï¼Œä»–ä»¬çš„ç§‘æŠ€ä¸ç‹ æ´»ä¼¤å®³äººä»¬çš„èº«ä½“ï¼Œä»–ä»¬ç”šè‡³æ•¢æ ¸é…¸é€ å‡ç¥¸å›½æ®ƒæ°‘ã€‚<br />\næˆ‘ï¼šä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™äº›æ˜¯å›½å®¶çš„é—®é¢˜ï¼ŸåœŸåœ°æ”¿ç­–æŠ¬é«˜äº†æˆ¿ä»·ï¼Œè¡Œä¸šæ‰“å‹é€ æˆäº†å¤±ä¸šï¼Œç›‘ç®¡ä¸å–„å¯¼è‡´äº†ç¯å¢ƒå’Œé£Ÿå“å®‰å…¨é—®é¢˜ï¼ŒæƒåŠ›å¯»ç§Ÿå’Œåª’ä½“å¤±èƒ½å¯¼è‡´äº†è…è´¥å’Œé€ å‡ï¼Ÿ<br />\nçˆ¹ï¼šæˆ‘ä»¬æ˜¯å‘å±•ä¸­å›½å®¶ï¼Œç°é˜¶æ®µæ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œä½†ä¸èƒ½æŠŠæ‰€æœ‰é—®é¢˜éƒ½å½’ç»“åˆ°å›½å®¶ã€‚æˆ‘ä»¬ç»ˆç©¶ä¼šè§£å†³è¿™äº›é—®é¢˜ï¼Œåˆ«çš„å›½å®¶åŒæ ·æœ‰é—®é¢˜ã€‚<br />\næˆ‘ï¼šä½†åˆ«çš„å›½å®¶æœ‰å¥½çš„çº é”™æœºåˆ¶ï¼Œæ°‘ä¸»ã€æ³•åˆ¶ã€è¨€è®ºï¼Œæˆ‘ä»¬ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œå¦‚ä½•è§£å†³é—®é¢˜ï¼Ÿ<br />\nçˆ¹ï¼šæˆ‘ä»¬æœ‰å¼ºæœ‰åŠ›çš„å…šçš„é¢†å¯¼ã€‚<br />\næˆ‘ï¼šå°æ§å’Œæ”¾å¼€éƒ½æ˜¯é å…šçš„é¢†å¯¼ã€‚ç°åœ¨æœ‰æ•ˆçš„ç–«è‹—ã€é‡ç‚¹äººç¾¤çš„æ¥ç§ç‡ã€å¢æ‰©åŒ»ç–—èµ„æºã€é˜²æŒ¤å…‘é¢„æ¡ˆã€ç§‘å­¦çš„å®£å¯¼ä¸ç¤¾ä¼šå¿ƒç†å»ºè®¾ä¸€é¡¹éƒ½æ²¡åšåˆ°ï¼Œå°±é ä¸€å¥ â€œæ¯ä¸ªäººéƒ½æ˜¯è‡ªå·±å¥åº·çš„ç¬¬ä¸€è´£ä»»äººâ€ï¼Ÿæˆ‘ä»¬æŠŠå¤ªå¤šçš„åŠ›æ°”èŠ±åœ¨äº†å…¨æ°‘æ ¸é…¸è¿™ç§æŠ˜è…¾å¤§ä¼—çš„é”™è¯¯æ–¹å‘ä¸Šï¼Œè¿˜æ€•è‹è‡ä¸æ¥å®ï¼Ÿ<br />\nçˆ¹ï¼šä»å°æ§åˆ°æ”¾å¼€ï¼Œå°±è¯´æ˜æˆ‘ä»¬ä¹Ÿæœ‰è‡ªæˆ‘çº é”™èƒ½åŠ›ã€‚<br />\næˆ‘ï¼šæ”¾å¼€æ˜¯å› ä¸ºå„åœ°çˆ†å‘çš„æŠ—è®®æ´»åŠ¨ï¼Œæ˜¯å‹‡æ•¢çš„å¤§å­¦ç”Ÿå’Œå›¢ç»“çš„æ°‘ä¼—ä¸ºæˆ‘ä»¬äº‰å–æ¥çš„ï¼Œä¸æ˜¯å› ä¸ºè‰¯å¿ƒå‘ç°ã€‚<br />\nçˆ¹ï¼šåšæ ¸é…¸æ˜¯æ”¿åºœå‡ºé’±ï¼Œç°åœ¨è‡ªæµ‹æŠ—åŸéœ€è¦èŠ±è‡ªå·±çš„é’±ï¼Œå¤§å®¶è‚¯å®šæ›´æ„¿æ„å…è´¹åšæ ¸é…¸ã€‚<br />\næˆ‘ï¼šè¿™å°±æ˜¯æ²¡æœ‰å…¬æ°‘æ„è¯†å•Šã€‚<br />\næ”¿åºœå‡ºçš„ä¹Ÿæ˜¯çº³ç¨äººçš„é’±ï¼Œçº³ç¨å°±æ˜¯æˆ‘ä»¬è®©æ¸¡å‡ºå»çš„æƒç›Šçš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸ªäººè®©æ¸¡å‡ºçš„ç§æƒç»„æˆäº†å…¬æƒåŠ›ï¼Œæ”¿åºœã€è­¦å¯Ÿç­‰å…¬æƒåŠ›æ˜¯ç”¨æ¥ä¿æŠ¤ç§æƒè€Œä¸æ˜¯ä¾µèš€ç§æƒçš„ï¼Œæ‰€ä»¥å…¬æƒåŠ›å¿…é¡»å—åˆ°ç›‘ç£ã€‚<br />\nä½ æœ‰çº³ç¨çš„ä¹‰åŠ¡ä¹Ÿæœ‰ç›‘ç£è´¢æ”¿çš„æƒåˆ©ï¼Œè´¢æ”¿ä¸å—ç›‘ç£å°±ä¼šå¯¼è‡´è…è´¥ã€‚ä½ å…œé‡Œçš„é’±æ˜¯ä½ è‡ªå·±çš„ï¼Œä½ çº³å‡ºå»çš„ç¨ä¹Ÿæ˜¯ä½ çš„ï¼Œè¿™ä¸ªå›½å®¶ä¹Ÿæ˜¯ä½ çš„ã€‚</p>\n<p>çˆ¹ï¼šæˆ‘ä¸ç®¡åˆ«äººæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæˆ‘ä»¬è¿‡å¥½è‡ªå·±çš„å°±å¥½äº†ã€‚<br />\næˆ‘ï¼šä½ å‚¬ä¹°æˆ¿å‚¬å©šå‚¬ç”Ÿçš„æ—¶å€™å¯ä¸æ˜¯è¿™ä¹ˆè¯´çš„ï¼Œä½ è¯´çš„æ˜¯åˆ«äººéƒ½åœ¨åšä¸ºä»€ä¹ˆä½ ä¸åšã€‚<br />\nçˆ¹ï¼šæ‰€ä»¥åˆ«äººéƒ½åœ¨å±¯è¯ï¼Œä½ ä¹Ÿåº”è¯¥å±¯ã€‚<br />\næˆ‘ï¼šä½ åˆšæ‰å¯ä¸æ˜¯è¿™ä¹ˆè¯´çš„ï¼Œä½ æ‰¹åˆ¤èµ„æœ¬å®¶çš„æ—¶å€™è¯´ä»–ä»¬å ç”¨äº†åˆ«äººçš„èµ„æºã€‚<br />\nçˆ¹ï¼šæ€ä¹ˆè·Ÿçˆ¸çˆ¸è¯´è¯å‘¢è¿™æ˜¯ï¼Ÿè¯»ä¹¦è¯»å‚»äº†ä½ ã€‚<br />\næˆ‘ï¼šå¯æ˜¯æˆ‘åœ¨å¦é—¨å·²ç»ä¹°ä¸åˆ°è¯äº†ã€‚ä½ å±¯äº†è¯è®©æœ‰çš„äººä¹°ä¸åˆ°è¯ï¼Œåˆ«äººå±¯è¯è®©æˆ‘ä¹Ÿä¹°ä¸åˆ°è¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä»¬å±¯çš„è¯æœ€ç»ˆå¯¼è‡´äº†ä½ ä»¬çš„ä¸‹ä¸€ä»£æ²¡æœ‰è¯ã€‚<br />\nçˆ¹ï¼šä¸å¯¹ï¼Œæ­£æ˜¯å› ä¸ºæˆ‘å±¯äº†è¯ï¼Œæˆ‘æ‰èƒ½å¸®ä½ è¿™ä¸ªä¹°ä¸åˆ°è¯çš„ä¸‹ä¸€ä»£å…œåº•ã€‚</p>\n<p>çˆ¹ï¼šå¼ é›ªå³°è¯´æˆ‘çš„å¥³å„¿ä¸ç”¨è€ƒç ”ï¼Œæˆ‘ç»™æˆ‘å¥³å„¿å·²ç»èµšå¤Ÿäº†ä¸€ç”Ÿçš„é’±ï¼Œå¥¹ä¸ä¼šä¸ºé’±å‘æ„ï¼Œå¥¹ä¸ç”¨ä¸ºäº†ç”Ÿè®¡å»åšå¥¹ä¸æƒ³åšçš„äº‹æƒ…ã€‚<br />\nèƒ½å¤Ÿå…œåº•çš„çˆ¶æ¯éƒ½ä¼šä¸ºä¸‹ä¸€ä»£æä¾›æ›´å¥½çš„ç¯å¢ƒã€‚<br />\næˆ‘ï¼šæ›´å¥½çš„ç¯å¢ƒæ˜¯æŒ‡ç°åœ¨çš„ç¯å¢ƒå¹¶ä¸å¥½ï¼Œè‡³å°‘å¼ é›ªå³°è®¤ä¸ºç°åœ¨çš„è€ƒç ”å¹¶ä¸æ˜¯å¥”ç€å¥½å»çš„ã€‚<br />\nçˆ¹ï¼šæ˜¯çš„ï¼Œå¦‚æœå¥½ï¼Œå°±ä¸å­˜åœ¨ä¸ºäº†ç”Ÿè®¡åšä¸æƒ³åšçš„äº‹æƒ…ã€‚<br />\næˆ‘ï¼šå¼ é›ªå³°ä¸ºäº†è‡ªå·±çš„ä¸‹ä¸€ä»£è·³å‡ºè¿™ä¸ªç¯å¢ƒï¼Œè€Œè®©è¿™ä¸ªäº’å®³çš„æ³•åˆ™ç»§ç»­ä¾µå®³åˆ«äººçš„ä¸‹ä¸€ä»£ã€‚æˆ‘ä¸èƒ½è‹ŸåŒã€‚<br />\nçˆ¹ï¼šä»–æ”¹å˜ä¸äº†ä»€ä¹ˆï¼Œåªèƒ½è‡ªæ±‚å¤šç¦äº†ã€‚<br />\næˆ‘ï¼šé‚£ä½ è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¥½çš„ç¤¾ä¼šç¯å¢ƒå—ï¼Ÿ<br />\nçˆ¹ï¼šä¸ç®—ã€‚<br />\næˆ‘ï¼šä½ æ„¿æ„ä½ çš„åä»£åƒä½ ä¸€æ ·æŒ£æ‰åœ¨è¿™æ ·ä¸€ä¸ªæ²‰ç–´åˆ¶åº¦å¯¼è‡´çš„è‡ªåˆ©äº’å®³çš„ç¤¾ä¼šå—ï¼Ÿ<br />\nçˆ¹ï¼šä¸æ„¿æ„ï¼Œä½†åˆèƒ½æ€ä¹ˆåŠå‘¢ï¼Ÿ<br />\næˆ‘ï¼šä½ è®¤ä¸ºè¿™ä¸æ˜¯ä¸ªå¥½çš„ç¤¾ä¼šï¼Œä¹Ÿä¸æ„¿æ„åä»£ç”Ÿæ´»åœ¨è¿™æ ·çš„ç¤¾ä¼šä¸­ï¼Œåˆè®¤ä¸ºä½ æ— æ³•æ”¹å˜ç¤¾ä¼šè¿›ç¨‹ï¼Œé‚£ä¸ºä»€ä¹ˆè¦ç¹è¡ä¸‹ä¸€ä»£æ¥é‡å¤æ‰¿å—ä½ çš„å›°å¢ƒå‘¢ï¼Ÿ<br />\næŸæ‹‰å›¾è®²çˆ±æƒ…ï¼Œé»‘æ ¼å°”è®²å©šå§»ï¼Œä¼¼ä¹æ²¡æœ‰å“²å­¦å®¶è®²ç¹è¡ã€‚å¦‚æœäººç±»è¿˜æœ‰ä¸€ç‚¹è‡ªç”±æ„å¿—çš„è¯ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºæ˜¯æƒ³è¦é€‰æ‹©ç”Ÿæ´»ã€‚ç¬¬ä¸€æ­¥æ˜¯æƒ³è¦ï¼Œç¬¬äºŒæ­¥æ˜¯é€‰æ‹©ã€‚ç½—æ›¼ãƒ»ç½—å…°çš„ â€œçƒ­çˆ±ç”Ÿæ´»â€ ä¸èƒ½è¢«ç†è§£ä¸ºé¸¡æ±¤å¼çš„è‡ªæˆ‘éº»é†‰ï¼Œçƒ­çˆ±ç”Ÿæ´»çš„å½¢å¼æ˜¯ä¾ç„¶æƒ³è¦ã€ä¾ç„¶é€‰æ‹©ï¼Œè€Œä¸æ˜¯çœ‹æ¸…ç”Ÿæ´»çœŸç›¸åçš„æ— å¥ˆå¦¥åä¸è‹Ÿä¸”ã€‚<br />\næˆ‘ä»¬ç§°é¢‚ä¹”å¸ƒæ–¯ï¼Œç§°é¢‚å“¥ä¼¦å¸ƒï¼Œç§°é¢‚ä¸€åˆ‡æ”¹å˜ä¸–ç•Œçš„è‹±é›„ï¼Œä½†æºäºå¸Œè…Šçš„ä¸ªäººè‹±é›„ä¸»ä¹‰å™äº‹çš„é—å®³æ˜¯æˆåŠŸå­¦ï¼Œæˆ‘ä»¬ç§°é¢‚çš„å¹¶ä¸æ˜¯ â€œæƒ³è¦â€ æ”¹å˜ä¸–ç•Œçš„ç²¾ç¥ï¼Œè€Œæ˜¯ â€œæˆåŠŸâ€ æ”¹å˜ä¸–ç•Œçš„ç»“æœã€‚å¦‚æœè¯´åœ¨æ¼«é•¿çš„äººç±»å†å²ä¸­æ³¨å®šè¦æ©åŸ‹é‚£äº›æœªç«Ÿçš„åŠªåŠ›å’Œå¤±è´¥ï¼Œé‚£ä¹ˆç¼©çŸ­åˆ°ä¸€å¹´ä¹‹å†…çš„æ¥åŠ›ä¾¿å¯è®©æˆ‘ä»¬çœ‹è§æ¸…æ™°çš„è„‰ç»œï¼šå››é€šæ¡¥ä¸Šçš„å­¤å‹‡è€…çš„æ ‡è¯­å“éå…¨å›½ï¼ŒA4 è¿åŠ¨å¯¼è‡´çµè½¦é£˜ç§»å¼çš„è½¬å‘ï¼Œæ¨åŠ¨è¿™ä¸€åˆ‡çš„æ˜¯å‚ä¸å…¶ä¸­çš„æ¯ä¸€ä¸ªäººï¼Œæ˜¯è‡ªä¸‹è€Œä¸Šçš„é€‰æ‹©æ„æ„¿ï¼Œè€Œä¸æ˜¯æŸä¸€ä¸ªäººçš„é‡‘ç‰Œä»¤ç®­ã€‚<br />\næˆ–è®¸æˆ‘ä»¬çš„ â€œæƒ³è¦â€ å¹¶ä¸åƒè¿™çŸ­çŸ­å‡ ä¸ªæœˆå†…çš„å¥‡æ•ˆï¼Œè€Œè¿™ä¸€æ¬¡çš„äº‹ä»¶ä¹Ÿåªæ˜¯æ¥åŠ›èµ›ä¸­çš„å…¶ä¸­ä¸€æ£’ï¼Œå…¶ä¸­çš„å…³é”®åœ¨äºæ¯ä¸ªäººéƒ½æ”¾å¼ƒå…³äºä¼Ÿå¤§çš„å¹»æƒ³ï¼Œæ”¾å¼ƒä¸€è¹´è€Œå°±çš„æ•‘ä¸–è€…å™äº‹ï¼Œæ‰¿è®¤èšæ²™æˆå¡”çš„å…¬æ°‘ä¹‹åŠ›ï¼Œæ‰¿è®¤æˆ‘ä»¬æƒ³è¦é€‰æ‹©çš„ç”Ÿæ´»ã€‚å³ä½¿æˆ‘ä»¬ä¸æ˜¯æœ€åå†²çº¿çš„é‚£ä¸€æ£’ï¼Œä¹Ÿæ‰¿è®¤æ¯ä¸€æ£’çš„åŠŸç»©ä¸ä¸æœ½ï¼Œè·‘å¥½è‡ªå·±çš„ä¸€æ£’å¹¶äº¤ç»™ä¸‹ä¸€ä»£æ¥æ£’äººï¼Œæœ€ç»ˆæ‰æœ‰å¯èƒ½è®©ä»–ä»¬çš„ä¸‹ä¸€ä»£ï¼Œç”Ÿæ´»åœ¨ä½ æ‰€æ„¿æ™¯çš„æ›´ç¾å¥½çš„ç¤¾ä¼šä¸­ã€‚<br />\nä¸ºæ¯ä»£ä¸‹ä¸€ä»£æ¨åŠ¨æ›´ç¾å¥½çš„ç¤¾ä¼šï¼Œè¿™æ‰æ˜¯ç¹è¡çš„çœŸä¹‰ã€‚</p>\n<p>ä»¥ä¸Šä»¿è‹æ ¼æ‹‰åº•å¯¹è¯å½•æ˜¯è™šæ„çš„ï¼Œä½†ä»¥ä¸‹å¯¹è¯æ˜¯çœŸå®çš„ï¼Œæ¥è‡ªåæ´¾å½±è¯„ã€Šå“æŒ‡ä¹‹åï¼Œä½•å»ä½•ä»ï¼Ÿã€‹ã€‚</p>\n<p>æ¨è¶…ï¼šç‰¹åˆ«å¬ä¸å¾—æœ‰ä¸€å¥è¯ï¼Œ&quot; æˆ‘ä¹Ÿæ”¹å˜ä¸äº†ä»€ä¹ˆâ€ã€‚è¿™å¥è¯é¦–å…ˆæ˜¯ä¸€ä¸ªç»å¯¹çš„åºŸè¯ï¼ŒåŒ…å«ç€æå¤§çš„ç‹‚å¦„å’Œæå¤§çš„è‡ªå‘ã€‚åºŸè¯ï¼Œä½ å½“ç„¶æ”¹å˜ä¸äº†ä»€ä¹ˆï¼Œä½ ä¸€ä¸ªäººæ€ä¹ˆå¯èƒ½æ”¹å˜ä»€ä¹ˆï¼Œä½†æ˜¯å¾ˆå¤šäººè¿™ä¹ˆè¯´çš„æ—¶å€™ï¼Œå…¶å®ä¸ºåé¢æ”¾å¼ƒåšå‡†å¤‡çš„ã€‚åæ­£æˆ‘ä¹Ÿå¹²ä¸äº†ä»€ä¹ˆï¼Œæˆ‘å°±è¿™æ ·äº†ï¼Œä»¥ä¸€ç§éå¸¸ä½è°ƒè°¦é€Šçš„çŠ¶æ€ï¼Œè¯´ä¸€å¥éå¸¸ç‹‚å¦„ï¼Œä½†æ˜¯åˆæŠ›å¼ƒè´£ä»»çš„è¯ã€‚å…ˆæ˜¯ç‹‚åˆ°ä¸Šå¸é‚£å»ï¼Œç„¶åå†ä½åˆ°é­”é¬¼é‚£ï¼ŒæŠŠè‡ªå·±çš„æ‰€æœ‰è´£ä»»å…¨éƒ½æ”¾å¼ƒæ‰ã€‚</p>\n<p>æ³¢ç±³ï¼šæˆ‘ä»¬ä»Šå¤©è°ˆçš„ä½ ä¹Ÿæ”¹å˜ä¸äº†è¡Œä¸šï¼Œä½ æ”¹å˜ä¸äº†ä¸–ç•Œã€‚å…¶å®æ”¹å˜ä¸–ç•Œçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªéå¸¸éå¸¸æ¼«é•¿çš„æ¥åŠ›èµ›è·‘ï¼Œè€Œæ¯ä¸€ä¸ªäººæˆ–è€…æ¯ä¸€ä»£äººéƒ½ä»¥ä¸ºè‡ªå·±è·‘çš„æ˜¯æœ€åä¸€æ£’ï¼Œéƒ½ä»¥ä¸ºåˆ°è‡ªå·±é‚£ä¸€æ£’çš„æ—¶å€™åº”è¯¥å‡ºæˆç»©ã€‚</p>\n<p>ä½†æ˜¯æœ‰ä¸€ä¸ªæ—¶æœŸä½ ä¼šæ„è¯†åˆ°ï¼ŒçœŸæ­£æ”¹å˜äº†ä¸–ç•Œçš„è¿‡ç¨‹éƒ½ä¸æ˜¯ 4 æ£’çš„é—®é¢˜ï¼Œå®ƒå¯èƒ½æ˜¯ 40 æ£’ã€400 æ£’çš„é—®é¢˜ï¼Œè€Œä½ å…¶å®åªæ˜¯è·‘çš„ç¬¬ 20 æ£’ã€ç¬¬ 2 æ£’ï¼Œä½†æ˜¯åœ¨è¿™æ ·ä¸€ä¸ªæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ€ä¹ˆåšï¼Ÿ</p>\n<p>è¿˜è®°ä¸è®°å¾—ã€Šé“¶ç¿¼æ€æ‰‹ 2049ã€‹ï¼Œå°±æ˜¯é«˜å¸ä»¤ï¼Œä»–å¼€å§‹å…¶å®å°±æ˜¯è¿™æ ·çš„ã€‚ä»–åŸä»¥ä¸ºè‡ªå·±æ˜¯æ•‘ä¸–è€…ï¼Œåˆ°ä¸­é—´ä»–å‘ç°æ¯ä¸ªäººéƒ½æ˜¯è¿™ä¹ˆæƒ³çš„ï¼ŒåŸæ¥æˆ‘æ˜¯éå¸¸æ™®é€šçš„ä¸€ä¸ªï¼Œä½†æ˜¯ä»–å› æ­¤å¹²è„†æ‹¿èµ·æªæ¥æŠŠè‡ªå·±å´©äº†ï¼Œæˆ–è€…è¯´è¿™äº‹è·Ÿæˆ‘æ²¡å…³ç³»ï¼Ÿä»–ä¸æ˜¯ã€‚ä»–æœ€åè¿˜æ˜¯æŠŠè‡ªå·±çš„ä½¿å‘½å®Œæˆï¼Œæ‰€ä»¥æœ€åä¸€å¹•è½åœ¨é‚£ï¼Œä»–æŠŠå“ˆé‡Œæ£®ç¦ç‰¹å¸¦åˆ°çœŸæ­£çš„å¤©é€‰ä¹‹å­é‚£é‡Œï¼Œä»–è‡ªå·±èººåœ¨äº†å¤–é¢ã€‚åœ¨é‚£ä¸€åˆ»ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯æœ€ç‰›é€¼çš„è‹±é›„æˆé•¿ã€‚å› ä¸ºä»–å®Œæˆäº†æœ€å¤§çš„è§‰é†’ï¼Œè§‰é†’ä¹‹å¤„åœ¨äºï¼Œä»–è®¤è¯†åˆ°äº†è‡ªå·±ä¸æ˜¯è·‘æœ€åä¸€æ£’çš„äººï¼Œä½†ä¸æ­¤åŒæ—¶æˆ‘ä¹Ÿè¦å®Œæˆå¥½æˆ‘è‡ªå·±è¿™ä¸€æ£’ã€‚</p>\n<p>æ”¹å˜ä¸–ç•Œçš„äº‹åœ¨ä½ è¿™å®Œä¸æˆï¼Œé‚£ä½ è¦åšçš„äº‹æƒ…æ˜¯ä½ æŠŠè¿™ç§ä¿¡å¿µï¼Œä½ æŠŠåˆšæ‰è¯´çš„æ‰€æœ‰ï¼Œä½ è¦åšæŒå¸¸è¯†ï¼ŒåšæŒä¿æŒåˆ¤æ–­æ˜¯éçš„èƒ½åŠ›ï¼Œä¼ ç»™ä¸‹ä¸€æ£’è·‘æ­¥çš„äººï¼Œåˆ«æ‰æ£’ï¼Œç»§ç»­è·‘ã€‚</p>\n<p>æ¨è¶…ï¼šè€Œä¸”æˆ‘ä»¬çš„ä¸‹ä¸€ä»£äººä¼šä¸ä¼šæœ‰å¯èƒ½å°±æ˜¯æœ€åä¸€æ£’ï¼Œå…¶å®å–å†³äºæˆ‘ä»¬è·‘çš„æ€ä¹ˆæ ·ï¼Œè¯´ä¸å®šä½ è¦è·‘å¾—éå¸¸å¥½ï¼Œä¸‹ä¸€ä»£äººæˆæœ€åä¸€æ£’ã€‚</p>\n<p>æ³¢ç±³ï¼šä½ è¦æŠŠæ£’æ‰”äº†ï¼Œé‚£è‚¯å®šå°±æ²¡æœ‰ä¸‹ä¸€æ£’ï¼Œæ°¸è¿œæ˜¯ä¸€ä¸ªæœªç«Ÿäº‹ä¸šã€‚</p>\n",
            "tags": []
        }
    ]
}